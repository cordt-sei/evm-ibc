"use strict";(self.webpackChunkibc_transfer_ui=self.webpackChunkibc_transfer_ui||[]).push([[3479],{69304:(e,t,i)=>{i.d(t,{D:()=>o});var n=i(50574),r=i(53626);const o=()=>{const{theme:{theme:{name:e}}}=(0,n.wR)(),t=(0,r.T)();return"auto"===e?t:e}},5332:(e,t,i)=>{i.d(t,{g:()=>c});var n=i(29109),r=i(96540),o=(i(83650),i(46759),i(69648)),l=(i(88393),i(80066),i(74848),i(41253)),a=(i(95821),i(60445),i(3418),i(48702),i(10941),i(16219),i(12174)),d=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(75988)),s=(i(451),i(55229)),u=i(10741),v=(i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(95081),i(100),i(58080),i(53006),i(11012),i(71172),i(14624),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(26968),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(78080),i(95253),i(44719),i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const c=()=>{const{primaryWallet:e,environmentId:t,user:i,projectSettings:c,setShowAuthFlow:f}=(0,v.J)(),{setView:m}=(0,l.At)(),[h,y]=(0,r.useState)(!1),[p,W]=(0,r.useState)(),{getEOAWallet:b}=(0,d.R)();return{error:p,initAuthMethod:r=>(0,n.s)(void 0,[r],void 0,(function*({authenticatorType:n,iframeContainer:r,currentAction:l}){var d,v,h,p,g;y(!0);const k=null!==(d=e&&b(e))&&void 0!==d?d:e,A=(null===(h=null===(v=null==c?void 0:c.sdk.embeddedWallets)||void 0===v?void 0:v.sessionKeyDuration)||void 0===h?void 0:h.amount)||0,w="minutes"===(null===(g=null===(p=null==c?void 0:c.sdk.embeddedWallets)||void 0===p?void 0:p.sessionKeyDuration)||void 0===g?void 0:g.unit)?60:3600,E="email"===n||!(null==k?void 0:k.connector).getAuthenticatorHandler().isSessionActive();try{yield(0,u.UX)({authenticatorType:n,environmentId:t,iframeContainer:r,iframeElementId:s.M,sessionExpiration:A*w||void 0,user:i,wallet:k}),E?(m("passkey-recovery-bundle",{authenticatorType:n,currentAction:l}),f(!0,{ignoreIfIsEmbeddedWidget:!1,performMultiWalletChecks:!1})):f(!1)}catch(e){W(e),o.v.error("Failed to create embedded wallet session",e),a.zm.emit("passkeyRecoveryFailed",e)}finally{y(!1)}})),isLoading:h}}},15652:(e,t,i)=>{i.d(t,{$:()=>o});var n=i(96540),r=i(67416);const o=(e,t)=>{const i=(0,n.useRef)(e);(0,r.E)((()=>{i.current=e}),[e]),(0,n.useEffect)((()=>{if(!t&&0!==t)return;const e=setInterval((()=>i.current()),t);return()=>clearInterval(e)}),[t])}},280:(e,t,i)=>{i.d(t,{m:()=>r});var n=i(96540);const r=()=>{const e=(0,n.useRef)(!0);return(0,n.useEffect)((()=>{e.current&&(e.current=!1)}),[]),e.current}},29756:(e,t,i)=>{i.d(t,{D:()=>d});var n=i(80066),r=(i(96540),i(83650),i(46759),i(69648)),o=(i(88393),i(74848),i(41253),i(95821),i(60445),i(3418),i(48702),i(10941),i(16219),i(12174),i(29109),i(54769),i(60337),i(4402),i(11011),i(40337),i(30325)),l=(i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(75988)),a=(i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(95081),i(100),i(58080),i(53006),i(11012),i(71172),i(14624),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(26968),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(78080),i(95253),i(44719),i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const d=()=>{var e,t,i;const{user:d,primaryWallet:s,authMode:u,projectSettings:v}=(0,a.J)(),{getEOAWallet:c}=(0,l.R)(),f=s&&c(s),m=s&&(0,n.vh)(s)||f&&(0,n.vh)(f),h=(0,o.A)(v),y=Boolean(d)||"connect-only"===u&&Boolean(s),p=null===(e=null==d?void 0:d.verifiedCredentials)||void 0===e?void 0:e.filter((({walletProvider:e})=>e)),W=Boolean(null==p?void 0:p.find((({walletProvider:e})=>"embeddedWallet"===e))),b=h&&(null===(i=null===(t=null==v?void 0:v.sdk)||void 0===t?void 0:t.embeddedWallets)||void 0===i?void 0:i.automaticEmbeddedWalletCreation)&&(!(null==v?void 0:v.sdk.embeddedWallets.forceAuthenticatorAtSignup)||m)&&(!(null==p?void 0:p.length)||W);return r.v.logVerboseTroubleshootingMessage("useIsLoggedIn",{authMode:u,eoaWallet:f,isSessionKeyCompatible:m,isTurnkeyProviderEnabled:h,primaryWallet:s,projectSettings:v,user:d}),b?Boolean(s&&y):y}},5678:(e,t,i)=>{i.d(t,{b:()=>a});var n=i(46759),r=(i(96540),i(83650),i(69648),i(88393),i(80066),i(74848),i(41253),i(95821),i(60445),i(3418),i(48702),i(10941),i(16219),i(12174),i(29109),i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(63789)),o=(i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(75988)),l=(i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(95081),i(100),i(58080),i(53006),i(11012),i(71172),i(14624),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(26968),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(78080),i(95253),i(44719),i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const a=()=>{var e,t,i;const{primaryWallet:a,user:d}=(0,l.J)(),{getEOAWallet:s}=(0,o.R)(),u=null!==(e=a&&s(a))&&void 0!==e?e:a,v=(()=>{if(!u||!d||!u.connector.key.startsWith("turnkey"))return;const e=u.id;return d.verifiedCredentials.find((t=>t.id===e))||void 0})(),c=Boolean((()=>{if(!u||!d)return!1;const e=d.verifiedCredentials.find((e=>{var t,i;return(null===(t=e.walletName)||void 0===t?void 0:t.startsWith("turnkey"))&&!1===(null===(i=e.walletProperties)||void 0===i?void 0:i.isAuthenticatorAttached)}));return d.verifiedCredentials.find((t=>e&&t.signerRefId===e.id))})()),f=Boolean(v||c),m=Boolean(null===(t=null==v?void 0:v.walletProperties)||void 0===t?void 0:t.isAuthenticatorAttached),h=f&&!m||c;return{hasRecoveryEmail:f&&Boolean((0,r.X)(d,n.z3W.Email)),hasTurnkeyVerifiedCredentialAuthenticator:m,isSessionKeyCompatible:f&&Boolean(null===(i=null==v?void 0:v.walletProperties)||void 0===i?void 0:i.isSessionKeyCompatible),isTurnkeyWallet:f,isTurnkeyWalletWithoutAuthenticator:h,turnkeyVerifiedCredential:v}}},67416:(e,t,i)=>{i.d(t,{E:()=>r});var n=i(96540);const r="undefined"!=typeof window?n.useLayoutEffect:n.useEffect}}]);