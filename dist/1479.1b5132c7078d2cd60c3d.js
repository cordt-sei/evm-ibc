"use strict";(self.webpackChunkibc_transfer_ui=self.webpackChunkibc_transfer_ui||[]).push([[1479],{69123:(e,t,n)=>{n.d(t,{x:()=>l});const l=(e,t)=>(e%t+t)%t},29213:(e,t,n)=>{n.d(t,{F:()=>i,V:()=>o});var l=n(48702);const o=(e,t)=>{if(!e||!e.symbol)return;const n="ETH"===e.symbol||"EVM"===e.symbol?"evm":e.symbol.toLowerCase(),o=t[n]||t[l.ED[n.toUpperCase()]];return o?"evm"===n?o.find((t=>t.chainId===(null==e?void 0:e.chainId))):o[0]:void 0},i=e=>({1:"Ethereum",10:"OP Mainnet",11155111:"Sepolia",137:"Polygon",42161:"Arbitrum One",43114:"Avalanche",8453:"Base"}[e]||"Unknown")},38612:(e,t,n)=>{n.d(t,{N:()=>i});var l=n(8293);const o=["light","dark","auto"],i=(e,t)=>(e=>o.includes(e))(e)?(0,l.iV)(t,e):e},93509:(e,t,n)=>{n.d(t,{c:()=>i});var l=n(60445),o=(n(46759),n(69648),n(88393),n(80066),n(96540),n(74848),n(41253),n(95821),n(33321));n(3418),n(48702),n(10941),n(16219);const i=e=>{const t=(0,l.mU)()||(0,l.bh)(),n=(0,o.h)()||"chrome";let i;switch(n){case"edge":i=e.edge;break;case"firefox":i=e.firefox;break;default:i=e.chrome}const a=!t&&Boolean(e.android),r=(t||!(0,l.Fr)())&&Boolean(e.ios);return{canShowAndroidAppButton:a,canShowIosAppButton:r,currentDesktopUrl:i,hasMobileAppUrl:a||r,userBrowser:n}}},41653:(e,t,n)=>{n.d(t,{a:()=>l});const l=e=>e/16+"rem"},60867:(e,t,n)=>{n.d(t,{D:()=>l});const l=e=>{let t="";for(let n=e;n>0;--n)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[Math.floor(64*Math.random())];return t}},91969:(e,t,n)=>{n.d(t,{P:()=>l});const l=e=>{let t;if("undefined"!=typeof window){t=window.document.getElementById(e);const n=null==t?void 0:t.parentElement;if(!t||!n)return;n.removeChild(t)}}},89297:(e,t,n)=>{n.d(t,{q:()=>l});const l=e=>{var t,n;const l=null===(n=null===(t=null==e?void 0:e.sdk.embeddedWallets)||void 0===t?void 0:t.supportedSecurityMethods)||void 0===n?void 0:n.password;return!!l&&l.isEnabled&&l.isDefault}},2341:(e,t,n)=>{n.d(t,{t:()=>o}),n(46759),n(48702),n(60445),n(29109),n(4402),n(69648),n(3418),n(11011),n(88393),n(80066),n(96540),n(74848),n(41253),n(95821),n(10941),n(16219),n(40337),n(81285);var l=n(89297);n(45468),n(99157),n(7116),n(20433),n(83073);const o=e=>{const t=null==e?void 0:e.sdk.embeddedWallets;return!!t&&(0,l.q)(e)&&Boolean(t.forceAuthenticatorAtSignup)}},21537:(e,t,n)=>{n.d(t,{$:()=>i});var l=n(60445);const o=["dapper"],i=e=>(0,l.Fr)()&&!(null==e?void 0:e.canConnectViaCustodialService)||o.includes((null==e?void 0:e.key)||"")},34037:(e,t,n)=>{n.d(t,{N:()=>l});const l=(e,t)=>{if(!e)return;const n=Math.pow(10,t),l=Math.round(e*n)/n,o="0".repeat(t-1);return 0===l?`<0.${o}1`:l}},27953:(e,t,n)=>{n.d(t,{w:()=>o}),n(46759);var l=n(69648);n(88393),n(80066),n(96540),n(74848),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219);const o=e=>{try{if(!e)return;return e.map((e=>e.name))}catch(e){return void l.v.error("error serializing walletConnectors",e)}}},41305:(e,t,n)=>{n.d(t,{I:()=>l});const l=e=>"STARK"===e.connectedChain||"FLOW"===e.connectedChain},63241:(e,t,n)=>{n.d(t,{Oz:()=>r,tj:()=>i,us:()=>a});var l=n(60445);const o="dynamic_social_storage",i=e=>{var t;const n=l.n$.getItem(o);if(!n)return;const i=Object.entries(n),[a]=null!==(t=i.find((([,{state:t}])=>t===e)))&&void 0!==t?t:[];return a?n[a]:void 0},a=(e,t)=>{var n;const i=null!==(n=l.n$.getItem(o))&&void 0!==n?n:{};i[e]=Object.assign({provider:e},t),l.n$.setItem(o,i)},r=e=>{var t;const n=null!==(t=l.n$.getItem(o))&&void 0!==t?t:{};delete n[e],l.n$.setItem(o,n)}},19469:(e,t,n)=>{n.d(t,{N:()=>r});var l=n(60445),o=n(53968),i=n(48702),a=n(69793);const r=({jwt:e,minifiedJwt:t,expiresAt:n})=>{if(void 0!==n&&(e=>{l.n$.setItem(o.aE,e)})(n),e&&t&&(l.n$.setItem(o.$x,e,{priority:["secureStorage","localStorage"]}),l.n$.setItem(o.SD,t,{priority:["secureStorage","localStorage"]}),(0,a.M)())){const e=new Date(1e3*n).toUTCString(),l=`${i.ab}=${t}; expires=${e}; path=/; SameSite=Lax`;document.cookie=l}}},78561:(e,t,n)=>{n.d(t,{O:()=>l});const l=e=>{const t=[];for(const n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}},81149:(e,t,n)=>{n.d(t,{q:()=>s});var l=n(29109),o=(n(60445),n(46759),n(45468),n(48702),n(4402),n(69648),n(3418),n(11011),n(88393),n(80066),n(96540),n(74848),n(41253),n(95821),n(10941),n(16219),n(40337),n(81285),n(20433)),i=n(83073),a=n(99157),r=(n(7116),n(52331));const s=e=>(0,l.s)(void 0,void 0,void 0,(function*(){if((0,i.Z1)(e),(0,a.wz)()){const t=(0,o.nN)();yield(0,r.Ch)({environmentId:t,walletId:e})}}))},19205:(e,t,n)=>{n.d(t,{x:()=>o});var l=n(11011);const o=(e,t)=>(0,l.yT)({dialCode:t.dialCode,phone:e}).length>0},37305:(e,t,n)=>{n.d(t,{Lo:()=>l,mS:()=>o});const l=e=>t=>t.filter((t=>t.walletConnector.supportedChains.includes(e))),o=e=>t=>t.filter((t=>t.walletConnector.supportedChains.includes(e)))},57372:(e,t,n)=>{n.d(t,{z:()=>l});const l=e=>{var t;return Boolean(null===(t=e.groupedWallets)||void 0===t?void 0:t.length)}},45272:(e,t,n)=>{n.d(t,{N7:()=>d});var l=n(80066),o=(n(3418),n(48702)),i=n(57372);var a=n(13593),r=n(60445);const s="metamask",c=["metamask","coinbase","walletconnect","phantom","argentx","blocto","solflare","braavos","trust","rainbow","dapper","glow","flowwalletflow"],d=({authMode:e,userWallets:t,multiWallet:n,numberOfWalletsToShow:o,inputList:c,isWalletConnectList:d,lastUsedWalletKey:y,searchFilter:h,walletsFilter:g,loginWithEmail:v,groupWallets:m,walletGroups:f,showMoreWalletsWithFilter:_,recommendedWallets:k})=>{let C,b=c;d&&(b=c.filter((e=>e.walletConnector.isWalletConnect&&"walletconnect"!==e.key))),n&&(b=(({authMode:e,userWallets:t,walletOptions:n})=>{const o=n.filter((e=>e.some((e=>e.connector.isWalletConnect))?e=>!e.walletConnector.isWalletConnect:()=>!0)(t)).filter((e=>(0,r.Fr)()&&e.some((e=>e.key===s))?e=>e.walletConnector.key!==s:()=>!0)(t));return"connect-only"===e?(({walletOptions:e,userWallets:t})=>{const n=new Set(t.map((e=>e.connector.key)));return(n.has("phantom")||n.has("phantomledger"))&&(n.add("phantom"),n.add("phantomledger")),e.filter((e=>!n.has(e.walletConnector.key)))})({userWallets:t,walletOptions:o}):((e,t)=>t.filter((t=>!(!t.walletConnector||!(0,l.s8)(t.walletConnector,"accountChanged",(0,a.K)(t.walletConnector)))||!e.some((e=>e.connector.key===t.key)))))(t,o)})({authMode:e,userWallets:t,walletOptions:b}));const W=Boolean(g),S=[],A=[],M=[],I=Array.from(new Set((k||[]).map((e=>e.walletKey)))),E=u(b,g,d,I);E.forEach((e=>{!(0,l.WX)(e.walletConnector)&&e.walletConnector.isAvailable&&((null==I?void 0:I.includes(e.key))?S.push(e):y===e.key?C=e:e.isInstalledOnBrowser?A.push(e):M.push(e))}));const x=[...C?[C]:[]],O=[...S,...x,...A,...M],T=m?((e,t)=>{const n=[];return t.forEach((l=>{var o;if(!l.group)return n.push(l);const a=(r=l.group,n.findIndex((e=>(0,i.z)(e)&&e.key===r)));var r;if(a>-1)return null===(o=n[a].groupedWallets)||void 0===o?void 0:o.push(l);const s=t.some((e=>{var t;const n=l.group===e.group,o=l.key!==e.key,i=(null===(t=e.injectedConfig)||void 0===t?void 0:t.length)&&e.injectedConfig.length>1;return n&&(i||o)}));if(!s)return n.push(l);const c=e[l.group],d={groupedWallets:[l],key:c.key,name:c.name};return n.push(d)})),n})(f,O):O,F=_&&W?p(E,x.concat(A),o):o;return{numberOfWallets:O.length,walletsList:w(T,h,d,F,W,v)}},u=(e,t,n,l)=>{const o=((e,t)=>{const n=[],l=[],o=[];e.forEach((e=>{const i=t.includes(e.key);i?n.push(e):c.includes(e.key)&&!i?l.push(e):o.push(e)}));const i=l.slice().sort(((e,t)=>c.indexOf(e.key)-c.indexOf(t.key)));return[...n.slice().sort(((e,n)=>t.indexOf(e.key)-t.indexOf(n.key))),...i,...o]})(e,l);return!n&&t?t(o):o},y=["walletconnect","bitcoin.com wallet"],w=(e,t,n,l,i,a)=>{if(t)return((e,t)=>{const n=e.trim().toLowerCase(),l=e=>{const t=e.trim().toLowerCase();return y.includes(t)?t:t.replace("wallet","").replace("evm","").replace("starknet","").replace("solana","").replace("flow","").replace("bitcoin","")};return t.filter((e=>{var t;return l(e.name).includes(n)||(null===(t=e.groupedWallets)||void 0===t?void 0:t.some((e=>l(e.name).includes(n))))}))})(t,e);if(n)return e;if(a)return e.slice(0,l);{const t=(({hasWalletFilter:e,defaultOffset:t,list:n,priorityList:l})=>{const i=((e,t)=>t.reduce(((t,n)=>{const l=e.indexOf(n.toLowerCase());return l>t?l:t}),-1))(n,l);return t===o.ru&&!e&&n.length>t&&-1!==i?i+1:t})({defaultOffset:l,hasWalletFilter:i,list:e.map((e=>e.name.toLowerCase())),priorityList:c});return e.slice(0,t)}},p=(e,t,n)=>{const l=e.slice(0,n);return n+t.filter((e=>!l.includes(e))).length}},53894:(e,t,n)=>{n.d(t,{N:()=>l});const l=(e,t)=>"connect-only"===t&&!(void 0!==e)},77007:(e,t,n)=>{n.d(t,{S:()=>a});var l=n(29109),o=n(90745);const i=["bloctoevm","perawallet","metamaskstarknet"],a=(e,t)=>(0,l.s)(void 0,void 0,void 0,(function*(){const n=(0,o.z)(e);"walletConnect"!==n&&"qrCode"!==n&&(i.forEach((n=>{e.key===n&&t("pending-connect")})),0===(yield e.getConnectedAccounts()).length&&t("pending-connect"))}))},71571:(e,t,n)=>{n.d(t,{s:()=>m});var l=n(29109),o=n(80066),i=n(60445),a=n(54769),r=(n(96540),n(83650),n(46759),n(69648)),s=(n(88393),n(74848),n(41253)),c=(n(95821),n(53968)),d=(n(3418),n(48702),n(10941),n(16219),n(12174),n(60337)),u=(n(4402),n(11011),n(40337),n(60857)),y=n(22671),w=(n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(60036)),p=n(58296),h=n(77007),g=n(53894),v=(n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(47979),n(7085),n(87237),n(63055),n(80607),n(21029),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const m=({shouldUpdateWallets:e=!0,shouldCallCallback:t=!0}={})=>{const{setView:n,goToInitialView:m}=(0,s.At)(),{engageCaptcha:f,getCaptchaToken:_}=(0,a.Tr)(),{setErrorMessage:k}=(0,d.pu)(),{authMode:C,connectWallet:b,displaySiweStatement:W,environmentId:S,projectSettings:A,networkValidationMode:M,setIsSingleWalletAccount:I,user:E,walletUiUtils:x}=(0,v.J)(),{handleWalletsToConnect:O}=(0,w.D)(),T=(0,p.e)({displaySiweStatement:W,environmentId:S,projectSettings:A,setIsSingleWalletAccount:I}),F=(e,t,i)=>(0,l.s)(void 0,void 0,void 0,(function*(){!(0,o.VC)(e)||(0,o.NP)(e)?n("pending-signature"):x.disabledConfirmationOnce(),yield T({captchaToken:i,publicWalletAddress:t,walletConnector:e})})),$=e=>{var t;"user-cancelled"===(null==e?void 0:e.code)||r.v.debug(e),k(null===(t=null==e?void 0:e.code)||void 0===t?void 0:t.toString()),m()};return a=>(0,l.s)(void 0,[a],void 0,(function*({walletConnector:a,getAddressOpts:r}){var s;try{yield(0,h.S)(a,n),(0,o.VC)(a)&&((0,o.oz)(a)?n("email-wallet-otp-verification-view"):(0,o.NP)(a)||n("wait-for-email-confirmation-view"));const d=yield b(a,r,{applyHandleConnectedWallet:t});if(!(null==d?void 0:d.address))return;const{address:w}=d,p=yield a.getNetwork();if(!(0,y.l)({network:p,walletConnector:a})&&("always"===M||"sign-in"===M))return(0,u.Q)(a)?n("network-not-supported"):n("network-not-supported-manual");if((0,g.N)(E,C))return i.n$.setItem(c.$1,a.key),void(e&&O({walletConnector:a}));if(null===(s=null==A?void 0:A.security.hCaptcha)||void 0===s?void 0:s.enabled)return void f({authMethod:"wallet",onCaptchaSuccess:e=>(0,l.s)(void 0,void 0,void 0,(function*(){try{yield F(a,w,e)}catch(e){$(e)}}))});yield F(a,w,_())}catch(e){$(e)}}))}},28019:(e,t,n)=>{n.d(t,{F:()=>v});var l=n(29109),o=n(60445),i=n(54769),a=(n(96540),n(83650),n(46759),n(69648)),r=(n(88393),n(80066),n(74848),n(41253)),s=(n(95821),n(53968)),c=(n(3418),n(48702),n(10941),n(16219),n(12174),n(60337)),d=(n(4402),n(11011),n(40337),n(60857)),u=n(22671),y=(n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(60036)),w=n(58296),p=n(77007),h=n(53894),g=(n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(47979),n(7085),n(87237),n(63055),n(80607),n(21029),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const v=()=>{const{setView:e,goToInitialView:t}=(0,r.At)(),{setErrorMessage:n}=(0,c.pu)(),{getCaptchaToken:v,engageCaptcha:m}=(0,i.Tr)(),{connectWallet:f,displaySiweStatement:_,projectSettings:k,environmentId:C,networkValidationMode:b,setIsSingleWalletAccount:W,setShowAuthFlow:S,user:A,authMode:M}=(0,g.J)(),{handleWalletsToConnect:I}=(0,y.D)(),E=(0,w.e)({displaySiweStatement:_,environmentId:C,projectSettings:k,setIsSingleWalletAccount:W}),x=e=>{var l;a.v.debug(e),e instanceof o.qM&&(0,o.Fr)()||(t(),n(null!==(l=e.code)&&void 0!==l?l:e.toString()))};return{onlyConnectUser:t=>(0,l.s)(void 0,[t],void 0,(function*({walletConnector:t,getAddressOpts:n,shouldShowPendingConnectView:i=!0}){var a;i&&(yield(0,p.S)(t,e));try{if(yield f(t,n),(0,h.N)(A,M))return o.n$.setItem(s.$1,t.key),void I({walletConnector:t});if(null===(a=null==k?void 0:k.security.hCaptcha)||void 0===a?void 0:a.enabled)return void m({authMethod:"wallet",onCaptchaSuccess:t=>(0,l.s)(void 0,void 0,void 0,(function*(){S(!0),e("pending-signature")}))});S(!0),e("pending-signature")}catch(e){return void x(e)}})),signAlreadyConnectedUser:t=>(0,l.s)(void 0,[t],void 0,(function*({walletConnector:t,getAddressOpts:n}){try{const l=yield f(t,n);if(!(null==l?void 0:l.address))return;const o=yield t.getNetwork();if(!(0,u.l)({network:o,walletConnector:t})&&("always"===b||"sign-in"===b))return(0,d.Q)(t)?e("network-not-supported"):e("network-not-supported-manual");yield E({captchaToken:v(),publicWalletAddress:l.address,walletConnector:t})}catch(e){return void x(e)}}))}}},1259:(e,t,n)=>{n.d(t,{D:()=>p,b:()=>h});var l=n(29109),o=n(96540),i=n(60445),a=(n(12174),n(83650),n(46759),n(69648),n(88393),n(80066),n(74848),n(41253),n(95821),n(3418),n(48702),n(10941),n(16219),n(89809)),r=(n(54769),n(60337),n(83219)),s=(n(4402),n(11011),n(40337),n(81285),n(23431)),c=n(12707),d=(n(99157),n(45468),n(85743)),u=n(63137),y=(n(20433),n(83073),n(21029),n(47979),n(63055),n(28765)),w=(n(40961),n(20545),n(50574),n(11016));n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(451),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(7116),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825);const p=()=>{const{environmentId:e,user:t,userWithMissingInfo:n}=(0,a.J)(),{verificationUUID:w}=(0,y.vm)();return{verifyOtp:(0,o.useCallback)(((o,a,y,p)=>(0,l.s)(void 0,void 0,void 0,(function*(){var l;if(!t&&!n)throw new i.ii(r.nM);if(!p&&!w)throw new i.ii("No verification UUID is available");const h=null!=p?p:w,g="email"===y?s.A$:d.$1,v=yield g({environmentId:e,verificationToken:a,verificationUUID:h}),m=v.user,f=null!==(l=null==m?void 0:m.missingFields)&&void 0!==l?l:[],_=(0,u.C)(v.nextView);return(0,c.n)(v),_?o({destination:_,missingFields:f,updateUserProfileResponse:v}):{isEmailVerificationRequired:!1,isSmsVerificationRequired:!1,missingFields:f,updateUserProfileResponse:v}}))),[w,e,t,n])}},h=()=>{const e=(0,w.u)(),{verifyOtp:t}=p();return(0,o.useMemo)((()=>({verifyOtp:(n,l,o)=>t(e,n,l,o)})),[e,t])}},3194:(e,t,n)=>{n.d(t,{K:()=>a,h:()=>i});var l=n(96540),o=n(12174);const i=(e,t)=>{const n=(0,l.useRef)(t);n.current=t,(0,l.useEffect)((()=>{const t=(...e)=>n.current(...e);return o.zm.on(e,t),()=>{o.zm.off(e,t)}}),[e])},a=(e,t)=>{if(!o.h5.includes(e))throw new Error(`Unrecognized event "${e}" used with useDynamicEvents`);i(e,t)}},69206:(e,t,n)=>{n.d(t,{k:()=>o});var l=n(96540);const o=(e,t,n)=>{const o=(0,l.useRef)(n);o.current=n,(0,l.useEffect)((()=>{if(!e)return;const n=Array.isArray(e)?e:[e];n.forEach((e=>e.initEventListener()));const l=Array.from(new Set(n)).map((e=>{const n=(...t)=>{o.current(...t,e)};return e.on(t,n),()=>e.off(t,n)}));return()=>l.forEach((e=>e()))}),[e,t])}},76050:(e,t,n)=>{n.d(t,{R:()=>r});var l=n(96540);const o={idle:["linking_new_wallet","primary_not_connected","switching_primary"],linking_new_wallet:["idle"],primary_not_connected:["idle"],switching_primary:["idle"]},i={idle:["linking_new_wallet","transferring_wallet"],linking_new_wallet:["idle"],transferring_wallet:["idle"]},a={awaiting_account_switch:["awaiting_signature","idle"],awaiting_connection:["idle"],awaiting_signature:["idle"],detected_new_wallet:["awaiting_signature","idle"],idle:["awaiting_account_switch","awaiting_connection","awaiting_signature","detected_new_wallet"]},r=()=>{const[e,t]=(0,l.useState)("idle"),[n,r,s]=(()=>{const[e,t]=(0,l.useState)("idle"),n=(0,l.useCallback)((()=>{t("idle")}),[t]),i=(0,l.useCallback)(((n,l)=>{(e=>{if("awaiting_account_switch"!==e)throw new Error(`Invalid MultiWalletWidget state while trying to set AccountSwitch state: ${e}\nExpected: awaiting_account_switch`)})(l),(({from:e,to:t})=>{if(e!==t&&!o[e].includes(t))throw new Error(`Invalid AccountSwitch state transition from ${e} to ${t}`)})({from:e,to:n}),t(n)}),[e]);return[e,i,n]})(),[c,d,u]=(()=>{const[e,t]=(0,l.useState)("idle"),n=(0,l.useCallback)((()=>{t("idle")}),[t]),o=(0,l.useCallback)(((n,l)=>{(e=>{if("awaiting_signature"!==e)throw new Error(`Invalid MultiWalletWidget state while trying to set AwaitingSignature state: ${e}\nExpected: awaiting_signature`)})(l),(({from:e,to:t})=>{if(e!==t&&!i[e].includes(t))throw new Error(`Invalid AwaitingSignature state transition from ${e} to ${t}`)})({from:e,to:n}),t(n)}),[e]);return[e,o,n]})(),y=(0,l.useCallback)((()=>{s(),u()}),[s,u]),w=(0,l.useCallback)(((n,l,o)=>{(({from:e,to:t})=>{if(e!==t&&!a[e].includes(t))throw new Error(`Invalid MultiWalletWidget state transition from ${e} to ${t}`)})({from:e,to:n}),t(n),y(),l&&r(l,n),o&&d(o,n)}),[e,y,r,d]);return[e,w,{awaiting_account_switch:[n,r],awaiting_signature:[c,d]}]}},51727:(e,t,n)=>{n.d(t,{w:()=>d});var l=n(29109),o=n(96540),i=(n(83650),n(46759),n(69648)),a=(n(88393),n(80066),n(74848),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(3194)),r=n(71571),s=(n(60337),n(21029),n(47979),n(63055),n(45468),n(4402),n(11011),n(40337),n(21537)),c=(n(81285),n(20433),n(83073),n(99157),n(7116),n(12174),n(54769),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const d=()=>{const{awaitingSignatureState:e,multiWalletWidgetState:t,setMultiWalletWidgetState:n,legacyIsVerifying:d,setLegacyIsVerifying:u,selectedWalletConnector:y}=(0,c.J)(),w=(0,r.s)(),p=(0,o.useRef)(!1),h=(0,o.useCallback)((e=>(0,l.s)(void 0,void 0,void 0,(function*(){i.v.debug("runConnectAndSign",{selectedWalletConnector:y,walletConnector:e});const t=null!=e?e:y;if(t){p.current=!0,u(!0);try{yield w({walletConnector:t})}catch(e){i.v.error(e)}n("idle"),u(!1),p.current=!1}}))),[null==y?void 0:y.key,u,n,w]);(0,o.useEffect)((()=>{d||p.current||"awaiting_signature"!==t||!y||"linking_new_wallet"!==e||(0,s.$)(y)||h()}),[h,e,d,t,null==y?void 0:y.key,u,n]),(0,a.h)("triggerConnectAndSign",h)}},96126:(e,t,n)=>{n.d(t,{P:()=>r});var l=n(63055),o=n(83073),i=n(3194),a=n(12174);const r=()=>{const{userWallets:e}=(0,l.i0)(),t=e=>e.find((e=>e.id===(0,o.r6)()));(0,i.h)("walletAdded",((e,n)=>{a.zm.emit("userWalletsChanged",{addedWallet:e,primaryWallet:t(n),updateType:"walletAdded",userWallets:n})})),(0,i.h)("walletRemoved",((e,n)=>{a.zm.emit("userWalletsChanged",{primaryWallet:t(n),removedWallet:e,updateType:"walletRemoved",userWallets:n})})),(0,i.h)("primaryWalletChanged",(t=>{a.zm.emit("userWalletsChanged",{primaryWallet:t,updateType:"primaryWalletChanged",userWallets:e})})),(0,i.h)("primaryWalletNetworkChanged",(n=>{a.zm.emit("userWalletsChanged",{newNetwork:n,primaryWallet:t(e),updateType:"primaryWalletNetworkChanged",userWallets:e})})),(0,i.h)("nonPrimaryWalletNetworkChanged",((n,l)=>{const o=e.filter((e=>e.connector.key===l.key));a.zm.emit("userWalletsChanged",{affectedWallets:o,newNetwork:n,primaryWallet:t(e),updateType:"nonPrimaryWalletNetworkChanged",userWallets:e})}))}},26480:(e,t,n)=>{n.d(t,{h:()=>c}),n(96540),n(83650),n(46759),n(69648),n(88393),n(80066),n(74848);var l=n(41253),o=(n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(12174),n(29109),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147)),i=(n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(52925)),a=n(75458),r=n(58169),s=(n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const c=()=>{var e;const{view:t}=(0,l.At)(),{user:n,customPrivacyPolicy:c,customTermsOfServices:d,privacyPolicyUrl:u,termsOfServiceUrl:y,isBridgeFlow:w,authMode:p,projectSettings:h}=(0,s.J)(),{isFooterExpanded:g}=(0,r.wg)(),{mockedSDK:v}=(0,o.lc)(),{helpHeaderData:m}=(0,a.V)({authMode:p,view:t.type}),f="wallet-list"!==t.type&&"login-with-email-or-wallet-full-wallet-list"!==t.type&&"multi-wallet-wallet-list"!==t.type&&"login-with-wallet-only"!==t.type||g,_="wallet-connect-mobile-wallets-list"===t.type||"wallet-list"===t.type||"login-with-email-or-wallet-full-wallet-list"===t.type||"login-with-wallet-only"===t.type,k=Boolean(m&&!("qr-code"===t.type||"no-qr-not-installed"===t.type||"wallet-used"===t.type||"chainalysis-blocked-wallet"===t.type||"wallet-sign"===t.type||"collect-user-data"===t.type||"passkey-new-domain-detected"===t.type||(0,i.b)(n,t.type,v))),C="collect-user-data"!==t.type&&"no-access"!==t.type&&"chainalysis-blocked-wallet"!==t.type&&"wallet-locked-view"!==t.type&&"gate-blocked-wallet"!==t.type&&"email-wallet-otp-verification-view"!==t.type&&"bridge-welcome"!==t.type&&"bridge-summary"!==t.type&&"bridge-next-wallet-connection"!==t.type&&"passkey-intro"!==t.type&&"passkey-new-domain-detected"!==t.type&&"social-redirect-view"!==t.type&&"collect-user-data-login-no-wallet"!==t.type&&"passkey-recovery-bundle"!==t.type&&"passkey-recovery-start"!==t.type&&"embedded-reveal-view"!==t.type&&"embedded-reveal-account-view"!==t.type&&"rename-passkey"!==t.type&&"create-password-view"!==t.type&&"embedded-wallet-auth-choice"!==t.type&&"wallet-claim-intro"!==t.type&&"passkey-recovery-add-email"!==t.type&&"global-wallet-confirm"!==t.type&&"global-wallet-malicious"!==t.type&&"global-wallet-info"!==t.type&&"mfa-choose-device"!==t.type&&"mfa-verification"!==t.type,b=w&&("wallet-list"===t.type||"qr-code"===t.type||"wallet-connect-mobile-wallets-list"===t.type||"pending-connect"===t.type||"pending-signature"===t.type||"pending-signature-without-back-button"===t.type||"bridge-next-wallet-connection"===t.type||"bridge-summary"===t.type),W=Boolean(!(0,i.b)(n,t.type,v)&&("wallet-list"===t.type||"wallet-connect-mobile-wallets-list"===t.type||("login-with-email-or-wallet"===t.type||"login-with-email-or-wallet-full-wallet-list"===t.type||"login-with-wallet-only"===t.type||"multi-wallet-wallet-list"===t.type)&&(y||u||c||d))),S=Boolean(null===(e=null==h?void 0:h.sdk)||void 0===e?void 0:e.displayDynamicMessaging)&&("login-with-email-or-wallet"===t.type||"login-with-email-or-wallet-full-wallet-list"===t.type||"login-with-wallet-only"===t.type||"login-with-email-verification"===t.type||"login-with-sms-verification"===t.type||"verify-email"===t.type||"verify-sms"===t.type||"pending-connect"===t.type||"wallet-group"===t.type||"select-wallet-in-wallet-group"===t.type||"select-hardware-wallet"===t.type||"pending-signature"===t.type||"qr-code"===t.type||"wallet-used"===t.type||"email-wallet-otp-verification-view"===t.type||"farcaster-connect-view"===t.type||"merge-user-accounts"===t.type||"merge-user-accounts-conflicts"===t.type||"mfa-verification"===t.type||"mfa-display-backup-codes"===t.type||"mfa-recovery"===t.type),A="login-with-email-or-wallet-full-wallet-list"!==t.type&&"login-with-email-verification"!==t.type&&"login-with-sms-verification"!==t.type&&"network-not-supported"!==t.type&&"passkey-recovery-complete"!==t.type&&"passkey-recovery-start"!==t.type&&"passkey-recovery-bundle"!==t.type&&"rename-passkey"!==t.type&&"mobile-wallet-redirect-view"!==t.type&&"qr-code"!==t.type&&"mfa-verification"!==t.type&&"mfa-display-backup-codes"!==t.type&&"mfa-recovery"!==t.type&&"deposit-view"!==t.type;return{displayBorderBelowHeader:f,isWalletListTypeView:_,shouldHideDynamicFooterSeparator:S&&W,showBackButton:"pending-signature"===t.type||"no-qr-not-installed"===t.type||"wallet-connect-mobile-wallets-list"===t.type||"login-with-email-verification"===t.type||"login-with-sms-verification"===t.type||"login-with-email-or-wallet-full-wallet-list"===t.type||"wallet-group"===t.type||"select-wallet-in-wallet-group"===t.type||"select-hardware-wallet"===t.type||"pending-connect"===t.type||"mobile-wallet-redirect-view"===t.type||"account-exists"===t.type||"passkey-intro"===t.type||"qr-code"===t.type||"farcaster-connect-view"===t.type||"mfa-verification"===t.type||"mfa-secure-device-help"===t.type||"merge-user-accounts-conflicts"===t.type||"mfa-recovery"===t.type||"deposit-view"===t.type||"merge-user-accounts-with-same-email"===t.type&&!n,showCloseButton:A,showConnectedWalletProgress:b,showDefaultFooter:!b&&!S&&!W,showDynamicFooter:S,showHeader:C,showHelpContent:k,showToSFooter:W}}},16837:(e,t,n)=>{n(29109),n(96540),n(60445),n(83650),n(46759),n(69648),n(88393),n(80066),n(74848),n(41253),n(95821),n(3418),n(48702),n(10941),n(16219),n(12174),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(58296),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809)},52968:(e,t,n)=>{n.d(t,{N:()=>a});var l=n(96540),o=n(60445),i=n(53968);const a=({connectors:e})=>((0,l.useEffect)((()=>{if("undefined"==typeof window)return;if(0===e.length)return;const t=new Set(e.map((e=>e.key)));for(const e of o.n$.getKeys())e.startsWith("walletconnect")&&!t.has(e.replace("walletconnect-",""))&&localStorage.removeItem(e)}),[e]),{clearAllWalletConnectSessions:()=>{if("undefined"!=typeof window){for(const e of o.n$.getKeys())(e.startsWith("walletconnect")||e.startsWith("walletlink")||e.startsWith("wc@2"))&&localStorage.removeItem(e);null==e||e.forEach((e=>{var t,n,l;(null===(n=null===(t=null==e?void 0:e.name)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.startsWith("turnkey"))&&(null===(l=e.getAuthenticatorHandler())||void 0===l||l.clear(),o.n$.removeItem(i.E4),o.n$.removeItem(i.c6))}))}}})},53626:(e,t,n)=>{n.d(t,{T:()=>o}),n(46759),n(69648),n(88393),n(80066),n(96540),n(74848),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941);var l=n(47404);n(16219);const o=()=>(0,l.U)("(prefers-color-scheme: dark)")?"dark":"light"},15896:(e,t,n)=>{n.d(t,{Y:()=>s});var l=n(29109),o=n(74848),i=n(96540),a=n(40961),r=n(74456);const s=({elementId:e})=>{const{createRootElement:t}=(0,r.k)(),n=t(e),[s,c]=(0,i.useState)(null),d=(0,i.useCallback)((e=>(0,l.s)(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{c(e(t,n))}catch(e){n(e)}})).finally((()=>{c(void 0)}))}))),[c]);return{modal:s?(0,o.jsx)("div",{children:(0,a.createPortal)(s,n.current)}):void 0,open:d}}},27524:(e,t,n)=>{n.d(t,{z:()=>a});var l=n(96540),o=n(60445),i=(n(46759),n(69648),n(88393),n(80066),n(74848),n(41253),n(95821),n(3418),n(48702),n(10941),n(116));n(16219);const a=({onResolve:e,onReject:t,defaultErrorMessage:n})=>{(0,i.A)(!0);const[a,r]=(0,l.useState)(!0),s=(0,l.useRef)(null),c=(0,l.useRef)(null),d=(0,l.useCallback)((()=>{r(!1)}),[r]),u=(0,l.useCallback)((()=>{if(c.current)return e(c.current);const l=s.current||new o.ii(n||"Something went wrong");return t(l)}),[e,t,n]);return{closeModal:d,handleOnModalUnmount:u,onError:(e,t=!1)=>{c.current=null,s.current=e,t&&d()},onSuccess:(e,t=!0)=>{s.current=null,c.current=e,t&&d()},show:a}}},74172:(e,t,n)=>{n.d(t,{V:()=>f});var l=n(29109),o=n(96540),i=n(60445),a=n(80066),r=n(46759),s=n(63055),c=(n(45468),n(48702),n(4402),n(53968)),d=(n(69648),n(3418),n(11011),n(88393),n(74848),n(41253),n(95821),n(10941),n(6916)),u=(n(16219),n(40337),n(41305)),y=(n(81285),n(81149)),w=(n(99157),n(94243)),p=(n(7116),n(90745)),h=n(53894),g=n(92461),v=n(75328),m=n(83073);const f=({authMode:e,enableVisitTrackingOnConnectOnly:t,environmentId:n,primaryWalletId:f,walletConnectorOptions:_,handleConnectedWallet:k,setShowAuthFlow:C,isBridgeFlow:b,user:W})=>{const[S,A,M]=(0,d.M)(c.GV,[]),[I,E]=(0,o.useState)([]),{setUserWallets:x,addedWalletsIds:O,removedWalletsIds:T}=(0,s.i0)(),F=(0,o.useCallback)((e=>{E(e),x((t=>((e,t)=>{const n=[...e],l=new Set,o=new Set;for(const e of t)l.add(e.address),o.add(e.chain),n.find((t=>t.address===e.address&&t.chain===e.chain))||n.push(e);return n.filter((e=>l.has(e.address)&&o.has(e.chain)||e.isAuthenticated))})(t,e)))}),[x]),$=(0,o.useCallback)((e=>(0,l.s)(void 0,void 0,void 0,(function*(){const t=I.find((t=>t.id===e));yield null==t?void 0:t.connector.endSession();const n=S.filter((t=>t.id!==e));if(A(n),T.current.push(e),e!==f)return;const l=n.length>0;b||!l?(0,m.qz)():(0,y.q)(n[0].id)}))),[I,S,b,f,T,A]),B=(0,v.d)((()=>(0,l.s)(void 0,void 0,void 0,(function*(){const e=_.map((e=>e.walletConnector));if(!e.length)return;const t=(yield Promise.all(S.map((t=>(0,l.s)(void 0,void 0,void 0,(function*(){const n=(0,a.Nx)(e,t.walletConnectorKey);if(!n)return a.vF.error("Could not find walletConnector: "+t.walletConnectorKey),yield $(t.id),null;(0,a.fg)(n)&&t.hardwareWallet===r.PXK.Ledger&&(n.isHardwareWalletEnabled=!0);const[l]=yield n.getConnectedAccounts();if(!l)return yield $(t.id),null;const o=yield n.getAdditionalAddresses(l),i=n.connectedChain;return n.createWallet({additionalAddresses:o,address:l,chain:i,connector:n,id:t.id,isAuthenticated:!1,key:n.key})})))))).filter((e=>Boolean(e)));F(t)}))),300);(0,o.useEffect)((()=>{B()}),[S,_]);const D=(0,o.useCallback)((e=>{const t=e.map((({id:e})=>e)).map((e=>Number(e.replace("connect-wallet-","")))).sort(((e,t)=>e-t));for(let e=0;e<t.length;e++)if(t[e]!==e)return e;return t.length}),[]),P=(0,o.useCallback)(((e,t)=>{var n;const l=[...I],o=l.findIndex((t=>t.id===e));o<0||(l[o]=l[o].connector.createWallet(Object.assign(Object.assign({},l[o]),{address:null!==(n=t.address)&&void 0!==n?n:l[o].address,connector:(0,g.P)(l[o])})),F(l))}),[I,F]),V=(0,o.useCallback)((e=>I.find((t=>t.id===e))),[I]);return{connectWallet:(o,s,c)=>(0,l.s)(void 0,void 0,void 0,(function*(){const{applyHandleConnectedWallet:l=!0}=null!=c?c:{},d=yield o.getAddress(s);if(!d)throw new i.qM;if(k&&l&&!(yield k({address:d,chain:o.connectedChain,connector:o})))return a.vF.info("Connection was not established because handleConnectedWallet returned false"),void C(!1);const u=S.some((({walletConnectorKey:e})=>e===o.key)),g=o.connectedChain;if(!u&&("connect-only"!==e||t)&&(0,w._m)({authMode:e,chain:g||"",environmentId:n,publicWalletAddress:d,walletName:o.key,walletProvider:(0,p.z)(o)}),!(0,h.N)(W,e))return{address:d,id:""};const v=`connect-wallet-${D(S)}`;return f||(0,y.q)(v),O.current.push(v),u?yield B():(({walletId:e,walletConnectorKey:t,walletChain:n,provider:l})=>{const o=[...S],i=_.map((e=>e.walletConnector)),s=(0,a.Nx)(i,t),c=s&&(0,a.fg)(s)&&s.isHardwareWalletEnabled?r.PXK.Ledger:void 0;o.push({hardwareWallet:c,id:e,provider:l,walletChain:n,walletConnectorKey:t}),A(o)})({provider:(0,p.z)(o),walletAddress:d,walletChain:g,walletConnectorKey:o.key,walletId:v}),{address:d,id:v}})),connectedWallets:I,connectedWalletsInfo:S,disconnectWallet:$,getConnectedWalletById:V,refreshConnectedWallet:(e,t)=>(0,l.s)(void 0,void 0,void 0,(function*(){(0,u.I)(t)&&(yield t.connect());const n=yield t.getAddress();if(n&&k&&!(yield k({address:n,chain:t.connectedChain,connector:t})))return a.vF.info("Connection was not established because handleConnectedWallet returned false"),$(e),void C(!1,{emitCancelAuth:!0});P(e,{address:n})})),removeConnectedWalletsInfo:M}}},90168:(e,t,n)=>{n(80426)},68364:(e,t,n)=>{n.d(t,{A:()=>u});var l=n(29109),o=n(96540),i=(n(83650),n(46759),n(69648),n(88393),n(80066),n(74848),n(41253)),a=(n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(12174),n(69206)),r=(n(54769),n(60337),n(4402),n(11011),n(40337),n(60857)),s=n(22671),c=(n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(29756)),d=(n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const u=()=>{const{connectedWallets:e,selectedWalletConnector:t,setSelectedWalletConnectorKey:n,setShowAuthFlow:u,bridgeChainsToConnect:y,sdkHasLoaded:w}=(0,d.J)(),{setView:p}=(0,i.At)(),h=(0,c.D)(),g=(0,o.useCallback)((()=>(0,l.s)(void 0,void 0,void 0,(function*(){const t=[];for(const n of e){const e=null==y?void 0:y.some((e=>e.chain===n.chain)),l=yield n.connector.getNetwork(),o=(0,s.l)({network:l,walletConnector:n.connector});e||o||t.push(n)}return t}))),[y,e]),v=(0,o.useCallback)((()=>(0,l.s)(void 0,void 0,void 0,(function*(){const e=yield g();if(!e.length)return;const[l]=e;l.connector.key!==(null==t?void 0:t.key)&&n(l.connector.key);const o=(0,r.Q)(l.connector)?"network-not-supported":"network-not-supported-manual";u(!0),p(o)}))),[g,null==t?void 0:t.key,n,u,p]),m=(0,o.useMemo)((()=>{const t=e.map((({connector:e})=>e)),n=new Set([...t].filter((e=>Boolean(e))));return Array.from(n)}),[e]);(0,a.k)(m,"chainChange",(({chain:e})=>{v()})),(0,o.useEffect)((()=>{w&&h&&v()}),[w,h,v])}},42898:(e,t,n)=>{n.d(t,{L:()=>o});var l=n(96540);const o=({callback:e,seconds:t})=>{const[n,o]=(0,l.useState)(t),i=(0,l.useRef)(),a=()=>{i.current=setTimeout((()=>{o((e=>e-1))}),1e3)};return(0,l.useEffect)((()=>{if(i.current){if(!(n<=0))return a(),()=>clearTimeout(i.current);e&&e()}}),[n,e]),{remainingSeconds:n,startCountdown:()=>{if(i.current)return o(t);a()},stopCountdown:()=>{clearTimeout(i.current),i.current=void 0}}}},86754:(e,t,n)=>{n.d(t,{X:()=>v});var l=n(29109),o=n(96540),i=n(46759),a=n(60445),r=(n(83650),n(69648)),s=(n(88393),n(80066),n(74848),n(41253),n(95821),n(3418),n(48702),n(10941),n(16219),n(12174)),c=(n(54769),n(60337),n(83219)),d=(n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(81149)),u=(n(21029),n(47979),n(63055),n(28765),n(40961),n(64533)),y=n(21521),w=n(42475),p=n(11823),h=n(30447),g=(n(50574),n(20545),n(451),n(30593),n(7085),n(87237),n(83073),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(20433),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const v=()=>{var e,t;const{user:n,setShowAuthFlow:v,projectSettings:m,environmentId:f}=(0,g.J)(),[_,k]=(0,o.useState)(!1),[C,b]=(0,o.useState)(),{getSessionPublicKey:W,shouldRegisterSessionKeysOnSignin:S}=(0,h.t)({environmentId:f,projectSettings:m}),A=(null===(t=null===(e=null==m?void 0:m.sdk)||void 0===e?void 0:e.embeddedWallets)||void 0===t?void 0:t.chainConfigurations)||[],M=(0,p.x)(m),I=A.filter((e=>e.enabled)).map((e=>"SOL"===e.name?i.uPd.Sol:i.uPd.Evm)),E=(0,o.useCallback)((e=>(0,l.s)(void 0,[e],void 0,(function*({environmentId:e,walletConnectorOptions:t,withAuthenticator:l,options:o,chains:i}){var p,h;if(k(!0),!n)throw new a.ii(c.nM);let g;S()&&(g=W());try{const{embeddedWalletVerifiedCredential:a,updatedUser:r,walletConnector:c}=yield(0,u.d)({chains:null!=i?i:I,environmentId:e,sessionPublicKey:g,user:n,walletConnector:(0,y.q)(t,M),webAuthnAttestation:null==o?void 0:o.webAuthnAttestation,withAuthenticator:l}),m=null===(p=r.verifiedCredentials)||void 0===p?void 0:p.find((({walletName:e})=>null==e?void 0:e.startsWith("turnkey"))),f=Boolean(null===(h=null==m?void 0:m.walletProperties)||void 0===h?void 0:h.isAuthenticatorAttached),_=c.createWallet({address:(yield c.getAddress())||"",chain:c.connectedChain,connector:c,id:a.id,isAuthenticated:f,key:a.walletName||c.key}),k=(0,w.K3)(a,r.verifiedCredentials);k?(yield(0,w.$1)({account:k,primaryWalletId:k.id,verifiedCredentials:r.verifiedCredentials,walletConnectorOptions:t}),(0,d.q)(k.id)):(0,d.q)(a.id),s.zm.emit("embeddedWalletCreated",_,m,r),v(!1,{performMultiWalletChecks:!1})}catch(e){r.v.error("Failed to create embedded wallet",e),b(e),s.zm.emit("embeddedWalletFailed",e)}finally{k(!1)}}))),[I,M,v,n]);return{createDynamicEmbeddedWalletMutation:E,error:C,isLoading:_}}},25913:(e,t,n)=>{n.d(t,{k:()=>h});var l=n(29109),o=n(96540),i=n(95821),a=n(69649),r=n(46759),s=(n(48702),n(60445)),c=(n(4402),n(69648),n(3418),n(11011),n(88393),n(80066),n(74848),n(41253),n(10941),n(16219),n(40337),n(81285),n(45468),n(99157),n(7116),n(27953)),d=(n(20433),n(83073),n(27373)),u=n(89741);class y extends s.ii{constructor(e,t){super(`${e} is enabled but ${t} is not in your walletConnectors list. See https://docs.dynamic.xyz/react-sdk/wallet-connectors for more information.`)}}const w="magicemailotp",p="magicsocial",h=e=>{var{projectSettings:t,networkConfigurations:n,walletBook:s,walletConnectorsProp:h,walletConnectorExtensions:g}=e,v=(0,l.T)(e,["projectSettings","networkConfigurations","walletBook","walletConnectorsProp","walletConnectorExtensions"]);const m=(0,o.useMemo)((()=>{var e;return null===(e=(0,c.w)(h))||void 0===e?void 0:e.join(",")}),[h]),f=(0,o.useMemo)((()=>(0,i.rh)(s)),[s]),_=(0,o.useMemo)((()=>t&&f&&n?(0,a.d)({getSupportedWalletOpts:Object.assign({networkConfigurations:n,settings:t,skipMemo:!0,walletBook:s,walletConnectorsProp:null!=h?h:[]},v),walletConnectorExtensions:g}):[]),[t,m,f,n]);return(0,o.useEffect)((()=>{t&&0!==_.length&&(((e,t)=>{((e,t)=>{var n;const l=(0,u.L)(null!==(n=e.providers)&&void 0!==n?n:[],r.bph.MagicLink),o=t.some((({key:e})=>[w,p].includes(e)));if(l&&!o)throw new y("Magic","MagicWalletConnectors")})(e,t),((e,t)=>{var n;const l=(0,u.L)(null!==(n=e.providers)&&void 0!==n?n:[],r.bph.Zerodev),o=t.some((({key:e})=>"zerodev"===e));if(l&&!o)throw new y("ZeroDev","ZeroDevSmartWalletConnectors")})(e,t)})(t,_.map((({walletConnector:e})=>e))),(0,d.xq)(_))}),[_,t]),{walletConnectorOptions:_}}},38512:(e,t,n)=>{n.d(t,{R:()=>r});var l=n(96540),o=(n(46759),n(69648)),i=(n(88393),n(80066),n(74848),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(80077)),a=n(27373);const r=({walletConnectorOptions:e})=>{(0,l.useEffect)((()=>{if(!e.length)return;const t={};e.forEach((e=>{const n=(0,i.j)(e);t[n.key]||(t[n.key]=n),e.chainGroup=n.key,e.group=n.key})),o.v.logVerboseTroubleshootingMessage("[DynamicContext] mergeWalletGroups",{groups:t}),(0,a.yT)(t)}),[e])}},75328:(e,t,n)=>{n.d(t,{d:()=>o});var l=n(96540);const o=(e,t)=>{const n=(0,l.useRef)(null),o=(0,l.useRef)(e);return o.current=e,(0,l.useCallback)(((...e)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout((()=>{o.current(...e)}),t)}),[t])}},18008:(e,t,n)=>{n.d(t,{M:()=>s});var l=n(29109),o=n(96540),i=(n(46759),n(69648),n(88393),n(80066),n(74848),n(41253),n(95821),n(60445),n(53968)),a=(n(3418),n(48702),n(10941),n(6916)),r=(n(16219),n(80426));const s=()=>{const[e,t]=(0,a.M)(i.m_,void 0),s=""!==e&&void 0!==e;(0,r.v)((()=>(0,l.s)(void 0,void 0,void 0,(function*(){if("undefined"!=typeof window&&"undefined"!=typeof document)return n.e(343).then(n.bind(n,70343)).then((e=>e.getFingerprint())).catch((()=>{}))}))),{deps:[s],enabled:!s,initialData:void 0,onResolve:t,retries:2});const c=(0,o.useCallback)((()=>e),[e]);return{consumeDeviceFingerprint:()=>c()}}},75458:(e,t,n)=>{n.d(t,{V:()=>c});var l=n(74848),o=n(96540),i=n(95081),a=n(88393),r=n(5678),s=(n(83650),n(46759),n(69648),n(80066),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(12174),n(29109),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const c=({view:e,authMode:t})=>{const{t:n}=(0,i.Bd)(),{isTurnkeyWalletWithoutAuthenticator:c}=(0,r.b)(),{selectedWalletConnector:d}=(0,s.J)(),u=(0,o.useMemo)((()=>({"login-with-email-or-wallet-full-wallet-list":{copykey:"dyn_login.helper.all_wallet_list",heading:n("dyn_login.helper.all_wallet_list")},"login-with-wallet-only":{copykey:"dyn_login.helper.wallet_only",heading:n("dyn_login.helper.wallet_only")},"passkey-intro":{copykey:"dyn_passkey_intro.helper.title",heading:n("dyn_passkey_intro.helper.title")},"pending-connect":{copykey:"dyn_login.helper.pending_connect.title",heading:n("dyn_login.helper.pending_connect.title")},"pending-signature":{copykey:"dyn_login.helper.pending_signature.title",heading:n("dyn_login.helper.pending_signature.title")},"pending-signature-without-back-button":{copykey:"dyn_login.helper.pending_signature_without_back_button.title",heading:n("dyn_login.helper.pending_signature_without_back_button.title")},"qr-code":{copykey:"dyn_login.helper.qr_code.title",heading:n("dyn_login.helper.qr_code.title")},"wallet-connect-mobile-wallets-list":{copykey:"dyn_wallet_conect.mobile.wallet_list.helper",heading:n("dyn_wallet_conect.mobile.wallet_list.helper")},"wallet-list":{copykey:"dyn_wallet_list.helper",heading:n("dyn_wallet_list.helper")}})),[n]),y=(0,o.useMemo)((()=>{var e;return{"account-exists":{copykey:"dyn_account_exists.title",heading:n("dyn_account_exists.title")},"chainalysis-blocked-wallet":{copykey:"dyn_chainalysis_blocked_wallet.title",heading:n("dyn_chainalysis_blocked_wallet.title")},"deposit-view":{copykey:"dyn_deposit.title",heading:n("dyn_deposit.title")},"embedded-delete-view":{copykey:"dyn_embedded_delete.title",heading:n("dyn_embedded_delete.title")},"external-funding-wallet-list":{copykey:"dyn_receive_external_wallet_funds.wallet_list.title",heading:n("dyn_receive_external_wallet_funds.wallet_list.title")},"farcaster-connect-view":{copykey:"dyn_login.qr_code.title",heading:n("dyn_login.qr_code.title")},"login-with-email-or-wallet":{copykey:"dyn_login.title.all",heading:n("dyn_login.title.all")},"login-with-email-or-wallet-full-wallet-list":{copykey:"dyn_login.title.all_wallet_list",heading:n("dyn_login.title.all_wallet_list")},"login-with-email-verification":{copykey:"dyn_otp_verification.confirm_code",heading:n("dyn_otp_verification.confirm_code")},"login-with-sms-verification":{copykey:"dyn_otp_verification.confirm_code",heading:n("dyn_otp_verification.confirm_code")},"login-with-wallet-only":{copykey:"dyn_login.title.wallet_only",heading:n("dyn_login.title.wallet_only")},"merge-user-accounts":{copykey:"dyn_merge_user_accounts.wallet.title",heading:n("dyn_merge_user_accounts.wallet.title")},"merge-user-accounts-conflicts":{copykey:"dyn_merge_user_accounts_conflicts.title",heading:n("dyn_merge_user_accounts_conflicts.title")},"mfa-choose-device":{copykey:"dyn_mfa.choose_device_view.title",heading:n("dyn_mfa.choose_device_view.title")},"mfa-display-backup-codes":{copykey:"dyn_mfa.display_backup_codes_view.title",heading:n("dyn_mfa.display_backup_codes_view.title")},"mfa-recovery":{copykey:"dyn_mfa.recovery_view.title",heading:n("dyn_mfa.recovery_view.title")},"mfa-secure-device":{copykey:"dyn_mfa.secure_device_view.title",heading:n("dyn_mfa.secure_device_view.title")},"mfa-secure-device-help":{copykey:"dyn_mfa.secure_device_view.helper.title",heading:n("dyn_mfa.secure_device_view.helper.title")},"mfa-verification":{copykey:"dyn_mfa.otp_verification_view.title",heading:n("dyn_mfa.otp_verification_view.title")},"mobile-wallet-redirect-view":{copykey:"dyn_login.mobile_wallet_redirect.backup_title",heading:null!==(e=null==d?void 0:d.name)&&void 0!==e?e:n("dyn_login.mobile_wallet_redirect.backup_title")},"multi-wallet-wallet-list":{copykey:"connect-only"===t?"dyn_wallet_list.title.connect":"dyn_wallet_list.title.link",heading:n("connect-only"===t?"dyn_wallet_list.title.connect":"dyn_wallet_list.title.link")},"network-not-supported":{copykey:"dyn_network_not_supported.title",heading:n("dyn_network_not_supported.title")},"passkey-recovery-complete":{copykey:c?"dyn_passkey_secure_modal.complete.title":"dyn_passkey_recovery.complete.title",heading:n(c?"dyn_passkey_secure_modal.complete.title":"dyn_passkey_recovery.complete.title")},"passkey-recovery-start":{copykey:c?"dyn_passkey_secure_modal.start.title":"dyn_passkey_recovery.start.title",heading:n(c?"dyn_passkey_secure_modal.start.title":"dyn_passkey_recovery.start.title")},"pending-connect":{copykey:"dyn_login.connect_wallet.title",heading:n("dyn_login.connect_wallet.title")},"pending-signature":{copykey:"dyn_login.sign_wallet.title",heading:n("dyn_login.sign_wallet.title")},"qr-code":{copykey:"dyn_login.qr_code.title",heading:n("dyn_login.qr_code.title")},"select-hardware-wallet":{copykey:"dyn_select_hardware_wallet.title",heading:n("dyn_select_hardware_wallet.title")},"select-wallet-in-wallet-group":{copykey:"dyn_login.select_wallet_in_wallet_group.title",heading:n("dyn_login.select_wallet_in_wallet_group.title")},"verify-email":{copykey:"dyn_otp_verification.confirm_code",heading:n("dyn_otp_verification.confirm_code")},"verify-sms":{copykey:"dyn_otp_verification.confirm_code",heading:n("dyn_otp_verification.confirm_code")},"wallet-connect-mobile-wallets-list":{copykey:"dyn_wallet_conect.mobile.wallet_list.title",heading:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.JV,{style:{height:"1.5rem",width:"1.5rem"}})," ",n("dyn_wallet_conect.mobile.wallet_list.title")]})},"wallet-group":{copykey:"dyn_login.wallet_group.title",heading:n("dyn_login.wallet_group.title")},"wallet-list":{copykey:"dyn_wallet_list.title.select",heading:n("dyn_wallet_list.title.select")},"wallet-sign":{copykey:"dyn_wallet_transfer.sign.title",heading:n("dyn_wallet_transfer.sign.title")},"wallet-used":{copykey:"dyn_wallet_link.title",heading:n("dyn_wallet_link.title")}}}),[t,c,null==d?void 0:d.name,n]),w=(0,o.useMemo)((()=>({"external-funding-wallet-list":{copykey:"dyn_receive_external_wallet_funds.wallet_list.description",text:n("dyn_receive_external_wallet_funds.wallet_list.description")}})),[n]);if("no-access"===e)return{headerData:{copykey:"dyn_no_access.title",heading:n("dyn_no_access.title")}};if("access-blocked"===e)return{headerData:{copykey:"dyn_access_blocked.title",heading:n("dyn_access_blocked.title")}};const p=u[e],h=y[e];return{descriptionData:w[e],headerData:h,helpHeaderData:p}}},11646:(e,t,n)=>{n.d(t,{J:()=>d});var l=n(96540),o=(n(83650),n(46759),n(69648)),i=(n(88393),n(80066),n(74848),n(41253)),a=(n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(12174),n(29109),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(13286)),r=(n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(29756)),s=(n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(2204)),c=(n(80622),n(31825),n(89809));const d=()=>{const{projectSettings:e,user:t,multiWallet:n,setShowAuthFlow:d}=(0,c.J)(),u=(0,r.D)(),{setView:y}=(0,i.At)(),w=(0,a.D)(e,null==t?void 0:t.verifiedCredentials,n),{setShowMfaChooseType:p,setShowMfaEnterBackupCodes:h,setShowMfaQRCode:g,setShowMfaViewBackupCodes:v,setShowOTPVerification:m}=(0,s.E)();return{setShowLinkNewWalletModal:(0,l.useCallback)((e=>{if(e){if(!u)return void o.v.warn("setShowLinkNewWalletModal was called while the user was not logged in. This results in a no-op. To log the user in, use setShowAuthFlow. For more information, see: https://docs.dynamic.xyz/react-sdk/hooks/usedynamiccontext");if(!w)return void o.v.warn("setShowLinkNewWalletModal was called but the user is not allowed to link a wallet. This results in a no-op. Please double check that multi-wallet is enabled in the dashboard. For more information, see: https://docs.dynamic.xyz/branded-wallets/multi-wallet");y("multi-wallet-wallet-list")}d(e,{emitCancelAuth:!0,ignoreIfIsEmbeddedWidget:!0,initializeWalletConnect:!0,performMultiWalletChecks:!1})}),[w,u,d,y]),setShowMfaChooseType:p,setShowMfaEnterBackupCodes:h,setShowMfaQRCode:g,setShowMfaViewBackupCodes:v,setShowOTPVerification:m}}},82400:(e,t,n)=>{n(96540),n(83650),n(46759),n(69648),n(88393),n(80066),n(74848),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(12174),n(29109),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809)}}]);