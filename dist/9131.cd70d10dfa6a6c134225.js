"use strict";(self.webpackChunkibc_transfer_ui=self.webpackChunkibc_transfer_ui||[]).push([[9131],{21029:(e,t,n)=>{n.d(t,{IA:()=>s,iU:()=>a});var o=n(74848),r=n(96540);const i=(0,r.createContext)(void 0),s=({children:e})=>{const[t,n]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[l,d]=(0,r.useState)(void 0),c=(0,r.useMemo)((()=>({deniedAddress:s,deniedOauthProvider:l,deniedOauthUsername:t,setDeniedAddress:a,setDeniedOauthProvider:d,setDeniedOauthUsername:n})),[s,l,t]);return(0,o.jsx)(i.Provider,{value:c,children:e})},a=()=>{const e=(0,r.useContext)(i);if(void 0===e)throw new Error("usage of useAccessDeniedContext not wrapped in `AccessDeniedContextProvider`.");return e}},47979:(e,t,n)=>{n.d(t,{G$:()=>s,g:()=>a});var o=n(74848),r=n(96540);const i=(0,r.createContext)(void 0),s=({children:e})=>{const[t,n]=(0,r.useState)(),s=(0,r.useMemo)((()=>({existentAccountData:t,setExistentAccountData:n})),[t,n]);return(0,o.jsx)(i.Provider,{value:s,children:e})},a=()=>{const e=(0,r.useContext)(i);if(void 0===e)throw new Error("usage of useAccountExistsContext not wrapped in `AccountExistsContextProvider`.");return e}},54769:(e,t,n)=>{n.d(t,{Tr:()=>c,bp:()=>d});var o=n(74848),r=n(96540),i=n(41253),s=(n(46759),n(69648),n(88393),n(80066),n(95821),n(60445),n(53968)),a=(n(3418),n(48702),n(10941),n(6916));n(16219);const l=(0,r.createContext)(void 0),d=({children:e})=>{const{setView:t}=(0,i.At)(),[n,d,c]=(0,a.M)(s.Xi,void 0),[u,v]=(0,r.useState)(),m=(0,r.useCallback)((({authMethod:e,onCaptchaSuccess:n})=>{v({authMethod:e,onCaptchaSuccess:n}),t("captcha")}),[t,v]),h=(0,r.useCallback)((()=>{const e=n;return c(),e}),[n,c]),g=(0,r.useMemo)((()=>({captchaAuthState:u,engageCaptcha:m,getCaptchaToken:h,removeCaptchaToken:c,setCaptchaAuthState:v,setCaptchaToken:d})),[u,h,m,v,d,c]);return(0,o.jsx)(l.Provider,{value:g,children:e})},c=()=>{const e=(0,r.useContext)(l);if(void 0===e)throw new Error("usage of useCaptchaContext not wrapped in `CaptchaContextProvider`.");return e}},44917:(e,t,n)=>{n.d(t,{N:()=>o});const o=(0,n(96540).createContext)(void 0)},94734:(e,t,n)=>{n.d(t,{M:()=>r});const o={dynamic:n(46759).bph.Dynamic},r=Object.values(o)},97891:(e,t,n)=>{n.d(t,{N:()=>i});var o=n(96540),r=n(44917);const i=({emailProvider:e}={})=>{const t=(0,o.useContext)(r.N);if(!t)throw new Error("useConnectWithOtp must be used within a DynamicContextProvider");return{connectWithEmail:(n,o={})=>t.connectWithEmail(n,Object.assign({provider:e},o)),connectWithSms:t.connectWithSms,retryOneTimePassword:t.retryOneTimePassword,verifyOneTimePassword:t.verifyOneTimePassword}}},83650:(e,t,n)=>{n.d(t,{zB:()=>it,y0:()=>at});var o=n(29109),r=n(74848),i=n(96540),s=n(95081),a=n(88393),l=n(45109),d=n(60445),c=n(95821),u=n(80066),v=n(91382),m=n(60853),h=(n(100),n(58080),n(12174)),g=n(46759),w=n(69648),p=n(41253),f=n(53968),y=(n(3418),n(48702)),C=n(51036),S=n(6916),b=n(21124),k=(n(16219),n(54769)),W=n(60337),x=(n(4402),n(34712)),P=(n(11011),n(40337)),E=n(81285),A=n(45468),I=n(99157),F=n(38399),M=n(7116),j=n(20433),O=n(83073),T=n(21029),U=n(47979),D=n(63055),L=n(28765),R=(n(40961),n(20545),n(50574)),_=(n(451),n(75512)),B=(n(30593),n(7085)),N=n(87237),V=(n(80607),n(6864),n(29147),n(72366),n(55537)),$=n(65381),z=(n(75705),n(60054)),K=n(25913),J=n(38512),Q=n(35567),q=n(81464),H=n(20176),G=n(36312),Y=n(57632),X=(n(80622),n(23121)),Z=n(27373),ee=n(16902),te=(n(31825),n(46356)),ne=n(18008),oe=n(96126),re=(n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(4623)),ie=n(22923),se=(n(10941),n(89741)),ae=n(11643),le=n(89809),de=n(30447),ce=n(44917),ue=n(23431),ve=n(12707);const me=(e,{shouldRegisterSessionKeysOnSignin:t,generateSessionKey:n})=>(r,i)=>(0,o.s)(void 0,void 0,void 0,(function*(){const s=yield(0,ue.CA)({captchaToken:i,email:r,environmentId:e});let{verificationUUID:a}=s;return{retry:()=>(0,o.s)(void 0,void 0,void 0,(function*(){const t=yield(0,ue.qc)({email:r,environmentId:e,verificationUUID:a});a=t.verificationUUID})),type:"email",verify:(s,l)=>(0,o.s)(void 0,void 0,void 0,(function*(){let o;t()&&(o=(yield n()).publicKey);const d=yield(0,ue.AE)({captchaToken:i,environmentId:e,sessionPublicKey:o,verificationToken:s,verificationUUID:a});return(null==l?void 0:l.skipSetUserAndAuthToken)||(0,ve.n)(d),{destination:r,response:d,verified:Boolean(d.jwt)}}))}}));var he=n(85743),ge=n(94734);n(26490),n(10647);var we=n(78080),pe=n(95253);n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858);const{Provider:fe}=ce.N,ye=({children:e})=>{const{environmentId:t,projectSettings:n,setCallback:s}=(0,le.J)(),a=(0,de.t)({environmentId:t,projectSettings:n}),l=(0,i.useRef)(null),d=(null==n?void 0:n.providers)||[],c={[g.bph.Dynamic]:{enabled:(0,se.L)(d,g.bph.Dynamic),handler:me(t,a)}};return(0,r.jsx)(fe,{value:{connectWithEmail:(e,n)=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!(0,ae.x)(e))throw new Error("Email is not valid");const r=(null==n?void 0:n.provider)||(yield((e,t)=>(0,o.s)(void 0,void 0,void 0,(function*(){const{emailProvider:n}=yield(0,ue.g9)({email:t,environmentId:e});if(!ge.M.includes(n))throw new Error("Email provider is not supported");return n})))(t,e));if(!c[r].enabled)throw new Error("Email provider is not enabled");const i=yield c[r].handler(e,null==n?void 0:n.captchaToken);l.current=i})),connectWithSms:(e,n)=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!(0,se.L)(d,g.bph.Sms))throw new Error("SMS provider is not enabled");const r=((e,{shouldRegisterSessionKeysOnSignin:t,generateSessionKey:n})=>(r,i)=>(0,o.s)(void 0,void 0,void 0,(function*(){const{verificationUUID:s}=yield(0,he.LF)({captchaToken:i,environmentId:e,isoCountryCode:r.iso2,phoneCountryCode:r.dialCode,phoneNumber:r.phone});return{type:"sms",verify:(a,l)=>(0,o.s)(void 0,void 0,void 0,(function*(){let o;t()&&(o=(yield n()).publicKey);const d=yield(0,he.vi)({captchaToken:i,environmentId:e,sessionPublicKey:o,verificationToken:a,verificationUUID:s});return(null==l?void 0:l.skipSetUserAndAuthToken)||(0,ve.n)(d),{destination:r,response:d,verified:Boolean(d.jwt)}}))}})))(t,a),i=yield r(e,null==n?void 0:n.captchaToken);l.current=i})),retryOneTimePassword:()=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!l.current)throw new Error("Verification has not started, use connectWithEmail or connectWithSms before verifying");if(!l.current.retry)throw new Error("Re-send is not supported");return l.current.retry()})),verifyOneTimePassword:(e,t)=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!l.current)throw new Error("Verification has not started, use connectWithEmail or connectWithSms before verifying");const{type:n,verify:o}=l.current,{destination:r,response:i,verified:a}=yield o(e,t);if("sms"===n?h.zm.emit("smsVerificationResult",a,r):h.zm.emit("emailVerificationResult",a,r),!a)throw new Error(("sms"===n?"SMS":"Email")+" verification failed");return(null==t?void 0:t.skipSetUserAndAuthToken)||s("authSuccess"),i}))},children:e})};var Ce=n(10528),Se=n(68404),be=n(8861),ke=n(8156),We=n(60564),xe=n(32799),Pe=n(38612),Ee=n(76050),Ae=n(52968),Ie=n(74172),Fe=n(82424),Me=n(2224),je=n(68568),Oe=n(83261),Te=n(30204),Ue=(n(49532),n(60203)),De=n(53108),Le=n(72377),Re=n(72711),_e=(n(99120),n(6439)),Be=n(71585),Ne=n(58296),Ve=n(80396);const $e=(0,i.createContext)(void 0),ze=({children:e})=>{const{sdkHasLoaded:t}=(0,le.J)(),{phantomRedirectConnector:n,handleConnectResponse:s,handleUserResponse:a,handleErrorResponse:l}=(()=>{const{walletConnectorOptions:e,displaySiweStatement:t,environmentId:n,projectSettings:r,setIsSingleWalletAccount:s,connectWallet:a,setShowAuthFlow:l,setSelectedWalletConnectorKey:c,siweStatement:v,appName:m,user:h}=(0,le.J)(),{setView:g}=(0,p.At)(),{setErrorMessage:w}=(0,W.pu)(),{getCaptchaToken:y}=(0,k.Tr)(),C=(0,Ne.e)({displaySiweStatement:t,environmentId:n,projectSettings:r,setIsSingleWalletAccount:s}),S=e.map((({walletConnector:e})=>e)).find(u.Pt),b=(0,i.useCallback)((()=>(0,o.s)(void 0,void 0,void 0,(function*(){S&&(yield S.getSession(),yield a(S),l(!0,{ignoreIfIsEmbeddedWidget:!0}),g("pending-signature"),c("phantom"))}))),[a,S,c,l,g]),x=(0,Ve.i)(),P=(0,i.useCallback)((()=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!S)return;c("phantom");const[e]=yield S.getConnectedAccounts();switch(S.consumeMethod()){case"signAndSendTransaction":{const{signature:e}=S.extractSignature();S.emit("signAndSendTransaction",{signature:e});break}case"signAllTransactions":S.emit("signAllTransactions",{transactions:S.extractTransactions()});break;case"signTransaction":S.emit("signTransaction",{transaction:S.extractTransaction()});break;case"signMessage":{const{signature:t,message:n}=S.extractSignature(),o=d.n$.getItem(f.jF);if(d.n$.removeItem(f.jF),"awaiting_transfer"===(null==o?void 0:o.verificationType)){const r=(0,Be.i)({appName:m,siweStatement:v});yield x({messageToSignOverride:n,overrideSiweStatement:r,publicWalletAddress:e,signedMessageOverride:t,skipEmptyAccountCheck:o.loseOriginalAccountOnTransfer,walletConnector:S})}else"awaiting_verification"!==(null==o?void 0:o.verificationType)&&h?S.emit("signMessage",{signature:t}):(g("wallet-redirect-view"),yield C({captchaToken:y(),messageToSignOverride:n,publicWalletAddress:e,signedMessageOverride:t,walletConnector:S}));break}}}))),[S,c,h,m,v,x,g,C,y]);return{handleConnectResponse:b,handleErrorResponse:(0,i.useCallback)((e=>{var t;if(!S)return;const n=e.get("errorCode"),o=null!==(t=e.get("errorMessage"))&&void 0!==t?t:void 0;if(n)switch(w(n),e.delete("errorCode"),e.delete("errorMessage"),history.replaceState(null,"",`${window.location.origin}${window.location.pathname}?${e.toString()}`),S.consumeMethod()){case"signAndSendTransaction":S.emit("signAndSendTransaction",{errorCode:n,errorMessage:o});break;case"signAllTransactions":S.emit("signAllTransactions",{errorCode:n,errorMessage:o});break;case"signTransaction":S.emit("signTransaction",{errorCode:n,errorMessage:o});break;case"signMessage":S.emit("signMessage",{errorCode:n,errorMessage:o})}}),[S,w]),handleUserResponse:P,phantomRedirectConnector:S}})();return(0,i.useEffect)((()=>{if(!n||!(0,d.Fr)()||!t)return;const e=new URLSearchParams(window.location.search);e.has("errorCode")?l(e):e.has("phantom_encryption_public_key")?s():e.has("data")&&a()}),[s,a,l,n,t]),(0,r.jsx)($e.Provider,{value:{phantomRedirectConnector:n},children:e})};var Ke=n(14508),Je=n(19918),Qe=n(68364);const qe=()=>((0,Qe.A)(),null);var He=n(38928),Ge=n(53299);const Ye=()=>{(0,We.ty)(),d.n$.clearRegistry()};var Xe=n(85017),Ze=n(27439),et=n(94243),tt=n(3194),nt=n(51805),ot=n(27213),rt=n(12177);const it=(0,i.createContext)(void 0),st=e=>{var t,n,l,g,D,V,re,se,ae,le,de,ce,ue,ve,me;const{children:he,theme:ge,settings:fe,locale:Ue,enableInstrumentation:Le=!1}=e,{accessDeniedMessagePrimary:Be,accessDeniedMessageSecondary:Ne,accessDeniedButton:Ve,defaultPhoneInputIso2:$e,apiBaseUrl:Ke,coinbaseWalletPreference:Qe,detectNewWalletsForLinking:Ye=He.c.detectNewWalletsForLinking,enableConnectOnlyFallback:st=He.c.enableConnectOnlyFallback,deepLinkPreference:at=He.c.deepLinkPreference,bridgeChains:lt,cssOverrides:dt,defaultNumberOfWalletsToShow:ct=y.ru,flowNetwork:ut,initialAuthenticationMode:vt=He.c.initialAuthenticationMode,debugError:mt=He.c.debugError,displaySiweStatement:ht=He.c.displaySiweStatement,newToWeb3WalletChainMap:gt,enableVisitTrackingOnConnectOnly:wt=He.c.enableVisitTrackingOnConnectOnly,environmentId:pt,walletsFilter:ft,logLevel:yt=He.c.logLevel,mobileExperience:Ct,notInTheListImageUrl:St,onboardingImageUrl:bt,policiesConsentInnerComponent:kt,customPrivacyPolicy:Wt,privacyPolicyUrl:xt,socialMediaLinkText:Pt,socialMediaIconUrl:Et,socialMediaUrl:At,customTermsOfServices:It,termsOfServiceUrl:Ft,toolkitEnabled:Mt,siweStatement:jt,shadowDOMEnabled:Ot=He.c.shadowDOMEnabled,walletConnectors:Tt,socialProvidersFilter:Ut,showLockedWalletView:Dt=He.c.showLockedWalletView,walletConnectPreferredChains:Lt,walletConnectorExtensions:Rt,recommendedWallets:_t,handlers:Bt,suppressEndUserConsoleWarning:Nt,transactionConfirmation:Vt}=fe;let{appLogoUrl:$t=He.c.appLogoUrl,appName:zt=He.c.appName}=fe;(({storagePostfix:e})=>{const t=(0,i.useRef)(e);if(!(0,ot.f)()&&d.fP.isNativeMobile)return;const n={clear:()=>{},getItem:()=>null,key:()=>null,length:0,removeItem:()=>{},setItem:()=>null},o=(0,ot.f)()?n:window.localStorage,r=(0,ot.f)()?n:window.sessionStorage;t.current!==e&&(t.current=e,d.n$.clearRegistry()),d.n$.getSourceStorage("localStorage")||d.n$.registerSourceStorage("localStorage",(0,d.$P)({postfix:e,storage:(0,d.tc)({storage:o})})),d.n$.getSourceStorage("sessionStorage")||d.n$.registerSourceStorage("sessionStorage",(0,d.$P)({postfix:e,storage:(0,d.tc)({storage:r})}))})({storagePostfix:fe.localStorageSuffix}),(0,We.Mb)(e),(0,j.Ts)(e),(0,u.RY)(null===(t=fe.overrides)||void 0===t?void 0:t.chainDisplayValues);const Kt=(0,x.Rl)({bridgeChains:fe.bridgeChains,networkValidationMode:fe.networkValidationMode});if(!pt)throw new d.$z;w.v.setLogLevel(yt),u.vF.setLogLevel(yt),"2762a57b-faa4-41ce-9f16-abff9300e2c9"===pt&&w.v.warn(`WARNING: DYNAMIC is using a test environment ID ${pt}. Please sign up on https://app.dynamic.xyz/ to get your production environment ID.`),A.A.setBaseUrl(null!==(n=process.env.DYNAMIC_API_BASE_URL)&&void 0!==n?n:Ke);const Jt=M.h.setup(Ue),Qt=Boolean(lt),qt=(0,x._0)(at,Qt),{selectedTabIndex:Ht,setSelectedTabIndex:Gt,selectedTabSettings:Yt,tabsItems:Xt}=(0,Oe.i)({settingsOverrides:fe.overrides}),[Zt,en,tn]=(0,S.M)(f.u$,!1),[nn,on]=(0,i.useState)(!1),[rn,sn]=(0,i.useState)(!1),[an,ln]=(0,i.useState)(!1),{user:dn,userWithMissingInfo:cn}=(0,I.Jd)();(0,ne.M)();const un=Boolean(dn),[vn,mn]=(0,i.useState)(""),[hn,gn]=(0,i.useState)(""),[wn,pn,{awaiting_account_switch:[fn],awaiting_signature:[yn]}]=(0,Ee.R)(),Cn=(0,E.KK)(),Sn=(0,Ce.r)({cosmosNetworkOverrides:null===(l=fe.overrides)||void 0===l?void 0:l.cosmosNetworks,evmNetworksOverrides:null===(g=fe.overrides)||void 0===g?void 0:g.evmNetworks,projectSettings:Cn});(0,Y.T)({environmentId:pt,settings:fe}),(0,te.w)({projectSettings:Cn,suppress:Nt});const bn=(({isBridgeFlow:e,multiWalletOverride:t,multiWalletSettings:n})=>{var o;return void 0!==t?t:null!==(o=n||e)&&void 0!==o&&o})({isBridgeFlow:Qt,multiWalletOverride:null===(D=fe.overrides)||void 0===D?void 0:D.multiWallet,multiWalletSettings:null===(V=null==Cn?void 0:Cn.sdk)||void 0===V?void 0:V.multiWallet}),kn=(({multiAssetOverride:e,multiAssetSettings:t})=>void 0!==e?e:null==t||t)({multiAssetOverride:null===(re=fe.overrides)||void 0===re?void 0:re.multiAsset,multiAssetSettings:null===(se=null==Cn?void 0:Cn.sdk)||void 0===se?void 0:se.enableMultiAsset}),Wn=(({showFiatOverride:e,showFiatSettings:t})=>void 0!==e?e:null==t||t)({showFiatOverride:null===(ae=fe.overrides)||void 0===ae?void 0:ae.showFiat,showFiatSettings:null===(le=null==Cn?void 0:Cn.sdk)||void 0===le?void 0:le.showFiat}),[xn,Pn]=(0,i.useState)(!1),En=(0,c.pj)(),{imageUserInAccessList:An,imageUserNotInAccessList:In,displayName:Fn,appLogo:Mn}=(null==Cn?void 0:Cn.general)||{};$t=Mn||$t,zt=Fn||zt;const[jn,On,Tn]=((e,t)=>{const[n,o]=(0,i.useState)(null),r=(0,i.useMemo)((()=>!t&&(0,Ze.V)(e)),[e,t]);return[null!=n?n:r,e=>{o(e)},()=>{o(null)}]})((null==Cn?void 0:Cn.providers)||[],dn),[Un,Dn]=(e=>{const[t,n]=(0,i.useState)(null),o=(0,i.useMemo)((()=>{var t;const n=null===(t=null==e?void 0:e.design.modal)||void 0===t?void 0:t.displayOrder;return n?(0,Xe.J)(n)?"web3":"web2":"web3"}),[e]);return[t||o,n]})(Cn),Ln=((e,t)=>{var n,o;return!!(null==e?void 0:e.required)||!!t&&null!==(o=null===(n=t.sdk.embeddedWallets)||void 0===n?void 0:n.showEmbeddedWalletActionsUI)&&void 0!==o&&o})(Vt,Cn),[Rn,_n]=(0,q.S)({appLogoUrl:$t,appName:zt,hideEmbeddedWalletTransactionUIs:!Ln}),Bn=(0,i.useMemo)((()=>({appLogoUrl:$t,appName:zt,coinbaseWalletPreference:Qe,deepLinkPreference:qt,flowNetwork:ut,mobileExperience:Ct,networkConfigurations:Sn,projectSettings:Cn,walletBook:En,walletConnectPreferredChains:Lt,walletConnectorExtensions:Rt,walletConnectorsProp:Tt,walletUiUtils:_n})),[$t,zt,Qe,qt,ut,Ct,Sn,Cn,En,Lt,Rt,Tt,_n]);(0,K.k)(Bn);const Nn=(0,Z.Ct)();(0,J.R)({walletConnectorOptions:Nn});const[Vn,$n]=(0,i.useState)(vt),zn=(0,O.yp)(),[Kn,Jn]=(0,i.useState)(!1),Qn=Boolean("connect-and-sign"===Vn?dn:Kn),qn=(0,i.useRef)(!1),[Hn,Gn]=(({isAuthenticated:e,isRenderingEmbeddedAuthFlow:t,isMultiWalletEnabled:n,setShowDynamicUserProfile:o})=>{const[r,s]=(0,i.useState)(!1),{setError:a}=(0,W.pu)(),l=(0,i.useCallback)(((i,l={})=>{const{emitCancelAuth:d,ignoreIfIsEmbeddedWidget:c,initializeWalletConnect:u,performMultiWalletChecks:v,clearErrors:m}=Object.assign({clearErrors:!0,emitCancelAuth:!1,ignoreIfIsEmbeddedWidget:!0,initializeWalletConnect:!0,performMultiWalletChecks:!1},l);if(w.v.logVerboseTroubleshootingMessage("setShowAuthFlow",{clearErrors:m,emitCancelAuth:d,ignoreIfIsEmbeddedWidget:c,initializeWalletConnect:u,performMultiWalletChecks:v}),!r&&i?h.zm.emit("authFlowOpen"):r&&!i&&h.zm.emit("authFlowClose"),i){if(c&&t.current)return;if(v&&e)return n?void w.v.warn("Use setShowLinkNewWalletModal to render the wallet list instead. For more information, see: https://docs.dynamic.xyz/react-sdk/hooks/usedynamiccontext"):o(!0)}else d&&r&&h.zm.emit("authFlowCancelled");m&&a(void 0),s(i)}),[e,n,t,a,o,r]);return[r,l]})({isAuthenticated:Qn,isMultiWalletEnabled:bn,isRenderingEmbeddedAuthFlow:qn,setShowDynamicUserProfile:on}),{connectWallet:Yn,removeConnectedWalletsInfo:Xn,connectedWalletsInfo:Zn,getConnectedWalletById:eo,connectedWallets:to,disconnectWallet:no,refreshConnectedWallet:oo}=(0,Ie.V)({authMode:Vn,enableVisitTrackingOnConnectOnly:wt,environmentId:pt,handleConnectedWallet:null==Bt?void 0:Bt.handleConnectedWallet,isBridgeFlow:Qt,primaryWalletId:zn,setShowAuthFlow:Gn,user:dn,walletConnectorOptions:Nn}),ro=(0,i.useMemo)((()=>(0,xe.F)(lt,Zn)),[lt,Zn]),{selectedWalletConnector:io,setSelectedWalletConnectorKey:so}=(({walletConnectorOptions:e})=>{const[t,n]=(0,i.useState)(null);return{selectedWalletConnector:(0,i.useMemo)((()=>{var n,o;return t&&null!==(o=null===(n=e.find((({walletConnector:e})=>e.key===t)))||void 0===n?void 0:n.walletConnector)&&void 0!==o?o:null}),[t,e]),setSelectedWalletConnectorKey:n}})({walletConnectorOptions:Nn}),[ao,lo]=(0,i.useState)(null);(0,_.a)(null!=dn?dn:cn,Nn),(0,G.K)(Nn,pt,Cn);const{primaryWallet:co,showQrcodeModal:uo,secondaryWallets:vo,setPrimaryWallet:mo,setShowQrcodeModal:ho,wallets:go}=(0,Q.n)({authMode:Vn,canHaveMultipleWalletsConnected:bn,connectedWallets:to,primaryWalletId:zn,separateSmartWalletAndSigner:null===(ce=null===(de=null==Cn?void 0:Cn.sdk)||void 0===de?void 0:de.accountAbstraction)||void 0===ce?void 0:ce.separateSmartWalletAndSigner,setMultiWalletWidgetState:pn,user:dn||cn,walletConnectorOptions:Nn});(0,i.useEffect)((()=>{Jn(!(null==ro?void 0:ro.length)&&Boolean(co))}),[ro,co]);const wo=go.map((e=>e.connector));(0,E.uG)(),(0,P.b8)({shouldFetch:(0,Ge.l)({authMode:Vn})});const{getNameService:po,removeConnectedNameService:fo}=(({currentWallet:e,user:t})=>{const[n,r,s]=(0,S.M)(f.KB,null),a=(0,i.useRef)(),l=(0,i.useRef)(),d=(0,i.useCallback)((e=>(0,o.s)(void 0,void 0,void 0,(function*(){const{address:t,connector:n}=e,o=yield n.getNetwork();if(t===a.current&&o===l.current)return;let i;r(null),a.current=t,l.current=o;try{i=yield e.getNameService()}catch(e){}return a.current===t&&l.current===o?(r({address:t,avatar:null==i?void 0:i.avatar,name:null==i?void 0:i.name,network:o}),i):void 0}))),[r]);return{getNameService:r=>(0,o.s)(void 0,void 0,void 0,(function*(){var o;if(!e)return;const i=yield e.connector.getNetwork(),s=null==t?void 0:t.verifiedCredentials;if(s){const t=(0,nt.r)(null==e?void 0:e.address,s,e.chain);if(t&&(null===(o=t.nameService)||void 0===o?void 0:o.name))return t.nameService}return r&&(null==e?void 0:e.address)!==r?void 0:n&&n.address===(null==e?void 0:e.address)&&n.network===i?{avatar:n.avatar,name:n.name}:d(e)})),removeConnectedNameService:s}})({currentWallet:null!=co?co:to[0],user:dn}),{clearAllWalletConnectSessions:yo}=(0,Ae.N)({connectors:wo}),Co=(e=>{const t=(0,i.useRef)(e);t.current=e;const n=(0,i.useCallback)((()=>(0,o.s)(void 0,void 0,void 0,(function*(){const e=t.current;e.setSelectedWalletConnectorKey(null),e.clearAllWalletConnectSessions(),e.setShowDynamicUserProfile(!1),e.setShowBridgeWidget(!1),e.resetLoginWithEmail(),e.user&&(document.cookie=`${y.ab}=; Max-Age=-99999999; path=/; SameSite=Lax`,(0,et.T$)({environmentId:e.environmentId,sessionId:e.user.sessionId})),e.setLegacyIsVerifying(!1),d.n$.removeItem(f.$x,{priority:["secureStorage","localStorage"]}),d.n$.removeItem(f.SD,{priority:["secureStorage","localStorage"]}),d.n$.removeItem(f.Qt),d.n$.removeItem(f.jF),d.n$.removeItem(f.aE),e.setAuthMode(e.initialAuthenticationMode),e.setShowAuthFlow(!1,{emitCancelAuth:!1,ignoreIfIsEmbeddedWidget:!1,initializeWalletConnect:!1,performMultiWalletChecks:!1}),e.setMultiWalletWidgetState("idle"),e.removeConnectedWalletsInfo(),e.removeBridgeOnboardingCompleted(),(0,O.qz)(),e.removeConnectedNameService(),e.removeSessionStorageSessionKeys(),h.zm.removeListener("embeddedWalletCreatePasswordCompleted"),h.zm.removeListener("embeddedWalletCreatePasswordFailed"),h.zm.removeListener("embeddedWalletUpdatePasswordCompleted"),h.zm.removeListener("embeddedWalletUpdatePasswordFailed"),h.zm.emit("logout"),(0,I.gV)(void 0),yield Promise.all(e.walletConnectors.map((e=>e.endSession()))),yield Promise.all(e.connectedWallets.map((e=>e.connector.endSession())))}))),[]);return(0,i.useEffect)((()=>(d.n$.events.on("parseFailure",n),()=>{d.n$.events.off("parseFailure",n)})),[n]),(0,tt.h)("triggerLogout",(()=>n())),n})({bridgeChains:lt,clearAllWalletConnectSessions:yo,connectedWallets:to,environmentId:pt,events:fe.events,initialAuthenticationMode:vt,removeBridgeOnboardingCompleted:tn,removeConnectedNameService:fo,removeConnectedWalletsInfo:Xn,removeSessionStorageSessionKeys:()=>{d.n$.removeItem(f.Bs,f.k2),wo.forEach((e=>{(0,u.SE)(e)&&"function"==typeof(null==e?void 0:e.removeSessionKeys)&&(null==e||e.removeSessionKeys())}))},resetLoginWithEmail:Tn,setAuthMode:$n,setLegacyIsVerifying:Pn,setMultiWalletWidgetState:pn,setSelectedWalletConnectorKey:so,setShowAuthFlow:Gn,setShowBridgeWidget:sn,setShowDynamicUserProfile:on,user:dn,walletConnectors:wo});(0,z.u)({environmentId:pt,handleLogOut:Co});const{isLoading:So}=(0,ee.F)(),bo=(0,P.dD)(),ko=(0,C.P)({appName:zt,authMode:Vn,connectedInfo:Zn[0],connectedWallets:to,enableInstrumentation:Le,environmentId:pt,isLoadingUserFromCookie:So,nonce:bo,primaryWallet:co,primaryWalletId:zn,projectSettings:Cn,user:null!=dn?dn:cn,walletBook:En});(({clientCallbacks:e,user:t})=>{(0,tt.h)("emailVerificationResult",((t,n)=>{var o;return null===(o=null==e?void 0:e.onOtpVerificationResult)||void 0===o?void 0:o.call(e,t,{type:"email",value:n})})),(0,tt.h)("smsVerificationResult",((t,n)=>{var o;return null===(o=null==e?void 0:e.onOtpVerificationResult)||void 0===o?void 0:o.call(e,t,{type:"sms",value:n})})),(0,tt.h)("authFlowCancelled",(()=>{var t;return null===(t=null==e?void 0:e.onAuthFlowCancel)||void 0===t?void 0:t.call(e)})),(0,tt.h)("authFlowOpen",(()=>{var t;null===(t=null==e?void 0:e.onAuthFlowOpen)||void 0===t||t.call(e)})),(0,tt.h)("authFlowClose",(()=>{var t;null===(t=null==e?void 0:e.onAuthFlowClose)||void 0===t||t.call(e)})),(0,tt.h)("walletAdded",((t,n)=>{var o;h.zm.emit("triggerSessionValidation"),w.v.debug("[walletAdded]",{userWallets:n,wallet:t}),null===(o=null==e?void 0:e.onWalletAdded)||void 0===o||o.call(e,{userWallets:n,wallet:t})})),(0,tt.h)("walletRemoved",((t,n)=>{var o;w.v.debug("[walletRemoved]",{userWallets:n,wallet:t}),null===(o=null==e?void 0:e.onWalletRemoved)||void 0===o||o.call(e,{userWallets:n,wallet:t})})),(0,tt.h)("embeddedWalletCreated",((t,n,o)=>{var r;w.v.debug("[embeddedWalletCreated]",{_wallet:t,jwtVerifiedCredential:n,user:o}),null===(r=null==e?void 0:e.onEmbeddedWalletCreated)||void 0===r||r.call(e,n,o)})),(0,tt.h)("logout",(()=>{var n;null===(n=null==e?void 0:e.onLogout)||void 0===n||n.call(e,t)})),(0,tt.h)("authFailure",((t,n)=>{var o;w.v.debug("[authFailure]",{data:t,reason:n}),null===(o=null==e?void 0:e.onAuthFailure)||void 0===o||o.call(e,t,n)})),(0,tt.h)("authInit",(t=>{var n;w.v.debug("[authInit]",{data:t}),null===(n=null==e?void 0:e.onAuthInit)||void 0===n||n.call(e,t)})),(0,tt.h)("userProfileUpdated",(t=>{var n;null===(n=null==e?void 0:e.onUserProfileUpdate)||void 0===n||n.call(e,t)}))})({clientCallbacks:fe.events,user:dn});const Wo=(0,Me.Q)({environmentId:pt,primaryWalletId:zn,secondaryWallets:vo,verifiedCredentials:(null==dn?void 0:dn.verifiedCredentials)||[]}),{isLoading:xo,network:Po}=(0,H.g)(null==co?void 0:co.connector,{onChange:e=>{e&&h.zm.emit("primaryWalletNetworkChanged",e)}});(0,oe.P)(),(0,je.Q)({authMode:Vn,detectNewWalletsForLinking:Ye,disconnectWallet:no,handleLogOut:Co,multiWallet:bn,multiWalletWidgetState:wn,primaryWallet:co,refreshConnectedWallet:oo,secondaryWallets:vo,selectedWalletConnector:io,selectedWalletWithAction:ao,setMultiWalletWidgetState:pn,setSelectedWalletConnectorKey:so,setSelectedWalletWithAction:lo,user:dn});const{walletsForChainsMap:Eo}=(0,Fe.F)(gt);(0,i.useEffect)((()=>{(0,x.zC)(Co)}),[Co,un]);const{setCallback:Ao}=(({callbacks:{onAuthSuccess:e,onUserProfileUpdate:t},handleLogOut:n,primaryWallet:o,user:r,isAuthenticated:s})=>{const[a,l]=(0,i.useState)([]),d=(0,i.useCallback)(((t,r)=>{if("authSuccess"===(null==t?void 0:t.callback))try{null==e||e({handleLogOut:n,isAuthenticated:s,primaryWallet:o,user:r}),h.zm.emit("triggerSessionValidation")}catch(e){w.v.error("Error calling onAuthSuccess: ",e)}}),[n,s,e,o]);return(0,i.useEffect)((()=>{a.length&&r&&((0,rt.w)(r)&&!o||(d(a[0],r),l((e=>{const[t,...n]=e;return t&&(w.v.debug("Resolved callback: ",t.callback),w.v.debug("Callbacks in queue: ",n.map((e=>e.callback)))),n}))))}),[a,d,o,r]),{setCallback:(0,i.useCallback)(((e,t)=>{l((n=>[...n,{callback:e,params:t}]))}),[])}})({callbacks:{onAuthSuccess:null===(ue=fe.events)||void 0===ue?void 0:ue.onAuthSuccess,onUserProfileUpdate:null===(ve=fe.events)||void 0===ve?void 0:ve.onUserProfileUpdate},handleLogOut:Co,isAuthenticated:un,primaryWallet:co,user:dn}),Io=(0,i.useCallback)((()=>e=>{const{dynamicWagmiSettings:t}=e;t&&(0,F.C)(pt,{dynamicWagmiSettings:{dynamicWagmiSettings:t}})}),[pt]),Fo=(0,i.useCallback)((()=>(0,o.s)(void 0,void 0,void 0,(function*(){gn(""),Pn(!1),dn||yo(),pn("idle"),"connect-only"!==Vn&&Xn(),d.n$.getItem(f.Qt)&&d.n$.removeItem(f.Qt),d.n$.removeItem(f.jF),!io||co&&co.connector.key===io.key||(yield null==io?void 0:io.endSession())}))),[dn,pn,Vn,io,co,yo,Xn]),{passkeySuccessPopup:Mo,setPasskeySuccessPopup:jo}=(()=>{const[e,t]=(0,i.useState)(void 0);return{passkeySuccessPopup:e,setPasskeySuccessPopup:e=>{t(e),setTimeout((()=>{t(void 0)}),2e3)}}})(),Oo=(0,i.useMemo)((()=>{var e;return{accessDeniedButton:Ve,accessDeniedMessagePrimary:Be,accessDeniedMessageSecondary:Ne,accountSwitchState:fn,appLogoUrl:$t,appName:zt,authMode:Vn,authorizationViewDisplayOrder:Un,awaitingSignatureState:yn,bridgeChains:lt,bridgeChainsToConnect:ro,bridgeOnboardingCompleted:Zt,clearStatesOnBackClick:Fo,connectWallet:Yn,connectedWallets:to,cssOverrides:dt,customPrivacyPolicy:Wt,customTermsOfServices:It,debugError:mt,defaultNumberOfWalletsToShow:ct,defaultPhoneInputIso2:$e,desktopUri:hn,detectNewWalletsForLinking:Ye,disconnectWallet:no,displaySiweStatement:ht,enableConnectOnlyFallback:st,environmentId:pt,events:fe.events,getConnectedWalletById:eo,getNameService:po,handleLogOut:Co,handleUnlinkWallet:"connect-only"===Vn?no:Wo,handlers:Bt,i18nSDKInstance:Jt,isBridgeFlow:Qt,isRenderingEmbeddedAuthFlow:qn,isSingleWalletAccount:an,legacyIsVerifying:xn,linkedWallets:"connect-only"!==Vn&&dn?go:[],loadingNetwork:xo,locale:{changeLanguage:M.h.getInstance().changeLanguage},loginWithEmail:jn,multiAsset:kn,multiWallet:bn,multiWalletWidgetState:wn,network:Po,networkConfigurations:Sn,networkValidationMode:Kt,newToWeb3WalletChainMap:Eo,notInTheListImageUrl:In||St,onboardingImageUrl:An||bt,overrides:fe.overrides,passkeySuccessPopup:Mo,policiesConsentInnerComponent:kt,primaryWallet:co,primaryWalletId:zn,privacyPolicyUrl:xt,projectSettings:Cn,qrcodeUri:vn,recommendedWallets:_t,redirectUrl:fe.redirectUrl,removeBridgeOnboardingCompleted:tn,removeConnectedWalletsInfo:Xn,sdkHasLoaded:ko,secondaryWallets:vo,selectedTabIndex:Ht,selectedTabSettings:Yt,selectedWalletConnector:io,selectedWalletWithAction:ao,sendWagmiSettings:Io,setAuthMode:$n,setAuthorizationViewDisplayOrder:Dn,setBridgeOnboardingCompleted:en,setCallback:Ao,setDesktopUri:gn,setIsSingleWalletAccount:ln,setLegacyIsVerifying:Pn,setLogInWithEmail:On,setMultiWalletWidgetState:pn,setPasskeySuccessPopup:jo,setPrimaryWallet:mo,setQrcodeUri:mn,setSelectedTabIndex:Gt,setSelectedWalletConnectorKey:so,setSelectedWalletWithAction:lo,setShowAuthFlow:Gn,setShowBridgeWidget:sn,setShowDynamicUserProfile:on,setShowQrcodeModal:ho,shadowDOMEnabled:Ot,showAuthFlow:Hn,showBridgeWidget:rn,showDynamicUserProfile:nn,showFiat:Wn,showLockedWalletView:Dt,showQrcodeModal:uo,siweStatement:jt,socialMediaIconUrl:(null===(e=null==Cn?void 0:Cn.general)||void 0===e?void 0:e.supportUrls)||Et,socialMediaLinkText:Pt,socialMediaUrl:At,socialProvidersFilter:Ut,socialSettings:fe.social,tabsItems:Xt,termsOfServiceUrl:Ft,theme:ge,toolkitEnabled:Mt,user:dn,userWithMissingInfo:cn,walletConnectorOptions:Nn,walletUiUtils:_n,walletsFilter:ft}}),[Ve,Be,Ne,fn,$t,zt,Vn,Un,yn,lt,ro,Zt,Fo,Yn,to,dt,Wt,It,mt,ct,$e,hn,Ye,no,ht,st,pt,fe.events,eo,po,Co,Wo,Bt,Jt,Qt,an,xn,dn,go,xo,jn,kn,bn,wn,Po,Sn,Kt,Eo,In,St,An,bt,fe.overrides,fe.redirectUrl,fe.social,Mo,kt,co,zn,xt,Cn,vn,_t,tn,Xn,ko,vo,Ht,Yt,io,ao,Io,$n,Dn,en,Ao,On,pn,jo,mo,Gt,so,Gn,ho,Ot,Hn,rn,nn,Wn,Dt,uo,jt,Et,Pt,At,Ut,Xt,Ft,ge,Mt,cn,Nn,_n,ft]);return(0,b.B)({as:"image",href:(0,a.k3)(),id:"sprite",type:"image/svg+xml"}),(0,b.B)({as:"fetch",href:(0,c.jK)(),id:"wallet-book",type:"application/json"}),(0,b.B)({as:"fetch",href:`${A.A.getBaseUrl()}/sdk/${pt}/settings?sdkVersion=${encodeURIComponent(`WalletKit/${v.x}`)}`,id:`project-settings-${pt}`,type:"application/json"}),(0,i.useEffect)((()=>{(bn||"awaiting_account_switch"===wn)&&dn&&"idle"!==wn&&!nn&&on(!0)}),[bn,wn,nn]),(0,r.jsx)(s.xC,{i18n:Jt,children:(0,r.jsx)(it.Provider,{value:Oo,children:(0,r.jsx)(c.v3,{walletBook:En,children:(0,r.jsx)(R.wX,{customerTheme:(0,Pe.N)(ge,(null===(me=null==Cn?void 0:Cn.design)||void 0===me?void 0:me.modal)||void 0),designSettings:null==Cn?void 0:Cn.design,children:(0,r.jsx)(B.tD,{children:(0,r.jsxs)(p.ex,{initialView:(0,x.KM)({bridgeOnboardingCompleted:Zt,connectedWallets:to,isAuthenticated:un||Boolean(co),isBridgeFlow:Qt,isMultiWalletEnabled:bn}),children:["always"===Kt&&(0,r.jsx)(qe,{}),(0,r.jsx)(k.bp,{children:(0,r.jsx)(U.G$,{children:(0,r.jsx)(N.ej,{children:(0,r.jsx)(L.lP,{children:(0,r.jsx)(pe.N3,{children:(0,r.jsx)(we.mG,{children:(0,r.jsx)(Te.DQ,{children:(0,r.jsx)(_e.Sy,{children:(0,r.jsx)(T.IA,{children:(0,r.jsx)(Je.z,{children:(0,r.jsx)(X.V3,{children:(0,r.jsx)($.F,{children:(0,r.jsx)(ye,{children:(0,r.jsx)(ze,{children:(0,r.jsxs)(ie.kD,{children:[(0,r.jsx)(m.W,{}),(0,r.jsx)(be.Z,{}),(0,r.jsx)(De.A,{}),(0,r.jsx)(Se._,{}),(0,r.jsx)(ke.o,{connectorProps:Bn}),Rn,(0,r.jsx)(Re.d,{children:he})]})})})})})})})})})})})})})})})]})})})})})})},at=e=>(l.V.setEnvironmentId(e.settings.environmentId),l.V.setEmitErrors(e.emitErrors),(()=>{if((0,i.useContext)(it))throw new Error("DynamicContextProvider should not be nested. Please wrap your application in a single DynamicContextProvider.")})(),(0,r.jsx)(Ke.W0,{onReinitialize:Ye,children:(0,r.jsx)(Le.t,{children:(0,r.jsx)(W.Xv,{children:(0,r.jsx)(D.nd,{children:(0,r.jsx)(V.gJ,{children:(0,r.jsx)(re.Yr,{children:(0,r.jsx)(Ue.Kc,{children:(0,r.jsx)(st,Object.assign({},e))})})})})})})}))},34712:(e,t,n)=>{n.d(t,{KM:()=>w,Rl:()=>k,SA:()=>p,VR:()=>f,_0:()=>W,ff:()=>S,nC:()=>v,r1:()=>m,yR:()=>C,zC:()=>g});var o=n(60445),r=n(53968),i=n(79553),s=n(99685),a=n(60973);let l,d,c;const u=864e5,v=e=>{const t=(0,s.K)(e);return h(t)},m=e=>{const t=(0,a.i)(e);return h(t)},h=e=>{if(!e)return!0;if(!e.exp)return!0;const t=new Date(1e3*e.exp).getTime();return(new Date).getTime()>=t},g=e=>{const t=(0,i.u)();if(!t)return clearTimeout(l);const n=new Date(1e3*t).getTime(),o=(new Date).getTime();if(o>=n)return clearTimeout(l),e();const r=n-o,s=Math.min(r,2147483647);l=setTimeout(e,s)},w=({connectedWallets:e,isBridgeFlow:t,bridgeOnboardingCompleted:n,isAuthenticated:o,isMultiWalletEnabled:r})=>o||n?{type:r?"multi-wallet-wallet-list":"wallet-list"}:t&&!e.length?{type:"bridge-welcome"}:{type:"login-with-email-or-wallet"},p=()=>{y(r.Uv),d=setTimeout(C,u)},f=()=>{y(r.wk),c=setTimeout(S,u)},y=e=>{const t=(new Date).getTime();o.n$.setItem(e,t.toString())},C=()=>b(r.Uv,d),S=()=>b(r.wk,c),b=(e,t)=>{const n=o.n$.getItem(e);if(!n)return!0;const r=parseInt(n);return(new Date).getTime()-r>u&&(clearTimeout(t),o.n$.removeItem(e),!0)},k=({networkValidationMode:e,bridgeChains:t})=>e||(t?"always":"sign-in"),W=(e,t)=>t?"universal":e},22130:(e,t,n)=>{n.d(t,{W:()=>a});var o=n(96540),r=n(83650),i=(n(46759),n(69648)),s=(n(88393),n(80066),n(74848),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(12174),n(29109),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(29756));n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825);const a=()=>{const e=(0,o.useContext)(r.zB);if(void 0===e)throw new Error("useDynamicContext must be used within a DynamicContextProvider");const{accountSwitchState:t,authMode:n,awaitingSignatureState:a,getNameService:l,handleLogOut:d,handleUnlinkWallet:c,loadingNetwork:u,locale:v,loginWithEmail:m,multiWalletWidgetState:h,network:g,networkConfigurations:w,qrcodeUri:p,sdkHasLoaded:f,setLogInWithEmail:y,setMultiWalletWidgetState:C,setShowAuthFlow:S,setShowDynamicUserProfile:b,setShowQrcodeModal:k,shadowDOMEnabled:W,showAuthFlow:x,showQrcodeModal:P,user:E,userWithMissingInfo:A,bridgeChains:I,bridgeChainsToConnect:F,primaryWallet:M,setShowBridgeWidget:j,sendWagmiSettings:O,showDynamicUserProfile:T,selectedTabIndex:U,setSelectedTabIndex:D}=e,{setAuthMode:L}=(e=>{const t=(0,o.useRef)(e),n=(0,s.D)();return t.current=e,(0,o.useMemo)((()=>({setAuthMode:e=>{const{setAuthMode:o}=t.current;if(!n)return o(e);i.v.error("Calling DynamicContext's setAuthMode method when the user already has a wallet is a noop")}})),[n])})(e);return{accountSwitchState:t,authMode:n,awaitingSignatureState:a,bridgeChains:I,bridgeChainsToConnect:F,getNameService:l,handleLogOut:d,handleUnlinkWallet:c,loadingNetwork:u,locale:v,loginWithEmail:m,multiWalletWidgetState:h,network:g,networkConfigurations:w,primaryWallet:M,qrcodeUri:p,sdkHasLoaded:f,selectedTabIndex:U,sendWagmiSettings:O,setAuthMode:L,setLogInWithEmail:y,setMultiWalletWidgetState:C,setSelectedTabIndex:D,setShowAuthFlow:e=>S(e,{clearErrors:!0,emitCancelAuth:!0,ignoreIfIsEmbeddedWidget:!0,initializeWalletConnect:!0,performMultiWalletChecks:!0}),setShowBridgeWidget:j,setShowDynamicUserProfile:b,setShowQrcodeModal:k,shadowDOMEnabled:W,showAuthFlow:x,showDynamicUserProfile:T,showQrcodeModal:P,user:E,userWithMissingInfo:A}}},89809:(e,t,n)=>{n.d(t,{J:()=>i});var o=n(96540),r=n(83650);const i=()=>{const e=(0,o.useContext)(r.zB);if(void 0===e)throw new Error("useInternalDynamicContext must be used within a DynamicContextProvider");return e}},72377:(e,t,n)=>{n.d(t,{t:()=>d});var o=n(29109),r=n(74848),i=(n(46759),n(69648)),s=(n(88393),n(80066),n(96540),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(99120)),a=n(50018);class l extends s.w{constructor(e){super(e),this.state={error:null,hasError:!1}}componentDidCatch(e,t){var n;const{onError:o}=this.props;throw(null===(n=this.context)||void 0===n?void 0:n.isDynamicSdkError)&&(null==o||o(e,t),i.v.error(e,{error:{bundleStack:e.stack,message:e,stack:t.componentStack}})),e}render(){const{children:e}=this.props,{hasError:t,error:n}=this.state;return t?((0,a.uG)(this.context),this.context.error=n,this.context.hasError=t,null):e}}const d=e=>{var{children:t}=e,n=(0,o.T)(e,["children"]);return(0,r.jsx)(a.UW.Provider,{value:{error:null,hasError:!1,isDynamicSdkError:!0},children:(0,r.jsx)(l,Object.assign({},n,{children:t}))})}},99120:(e,t,n)=>{n.d(t,{w:()=>a});var o=n(96540),r=(n(46759),n(69648)),i=(n(88393),n(80066),n(74848),n(41253),n(95821),n(60445),n(3418),n(48702),n(10941),n(16219),n(46136)),s=n(50018);class a extends o.Component{static getDerivedStateFromError(e){return{error:e,hasError:!0}}renderOrError(e,{isDynamicSdkError:t}){try{(0,s.uG)(this.context),this.context.isDynamicSdkError=t}catch(e){return r.v.error(e),(0,o.createElement)(i.O,null,"ErrorBoundary must be used within ErrorBoundaryContext")}return e}}a.contextType=s.UW},50018:(e,t,n)=>{n.d(t,{UW:()=>i,uG:()=>s});var o=n(96540);const r="ERROR_BOUNDARY_CONTEXT_NOT_FOUND",i=(0,o.createContext)(null);function s(e){if(null===e||"boolean"!=typeof e.hasError||"object"!=typeof e.error||"boolean"!=typeof e.isDynamicSdkError){const e=new Error("ErrorBoundaryContext not found");throw e.cause=r,e}}},72711:(e,t,n)=>{n.d(t,{d:()=>r});var o=n(99120);class r extends o.w{render(){const{children:e}=this.props;return this.renderOrError(e,{isDynamicSdkError:!1})}}},99417:(e,t,n)=>{n(99120)},60337:(e,t,n)=>{n.d(t,{Xv:()=>a,pu:()=>l});var o=n(74848),r=n(96540);const i={"-32000":"Message signature denied","-32002":"Please unlock your wallet extension and try again.","-32003":"Message signature denied.","-32602":"Invalid parameters. Please try again.","-32603":"There was an internal error. Please try again.",0:"Message signature denied.",4001:"Message signature denied.",4100:"Please unlock your wallet extension and try again.",4900:"There was an internal error. Please try again.",5001:"Message signature denied.",5002:"Message signature denied.",account_already_linked_to_different_profile:"This social account is already linked to a different profile.",connection_rejected:"Connection rejected. Please try again.",metamask_timeout:"Whoops. Looks like something went wrong. Please try again.","missing-nonce":"Something went wrong. Please try again.","missing-public-address":"Connection cancelled. Please try again",oauth_window_blocked:"To connect to your social account, enable popups in your browser and then try again.",oauth_window_timeout:"Session time out. Please try again.",too_many_email_verification_attempts:"Too many email verification attempts, please try again later","user-cancelled":"",wallet_not_deployed:"Your smart wallet has not been deployed.",wrong_email_verification_token:"The code you entered is incorrect. Please try again."},s=(0,r.createContext)(void 0),a=({children:e})=>{const[t,n]=(0,r.useState)(void 0),a=(0,r.useCallback)((e=>{var t;n(null!==(t=i[e])&&void 0!==t?t:"Something went wrong. Please try again.")}),[]),l=(0,r.useCallback)((()=>{n(void 0)}),[]);return(0,o.jsx)(s.Provider,{value:{clearError:l,error:t,setError:n,setErrorMessage:a},children:e})},l=()=>{const e=(0,r.useContext)(s);if(void 0===e)throw new Error("usage of useErrorContext not wrapped in `ErrorContextProvider`.");return e}},55537:(e,t,n)=>{n.d(t,{OT:()=>l,gJ:()=>a});var o=n(74848),r=n(96540),i=n(60445);const s=(0,r.createContext)(void 0),a=({children:e})=>{const t=(0,r.useRef)();return(0,o.jsx)(s.Provider,{value:{selectedPhoneCountry:t},children:e})},l=()=>{const e=(0,r.useContext)(s);if(!e)throw new i.ii("Can only call useFieldsState inside FieldsStateProvider");return e}},58169:(e,t,n)=>{n.d(t,{wW:()=>a,wg:()=>l});var o=n(74848),r=n(96540),i=n(41253);const s=(0,r.createContext)(void 0),a=({children:e})=>{const{view:t}=(0,i.At)(),[n,a]=(0,r.useState)(!1);(0,r.useEffect)((()=>{a(!1)}),[t]);const l=(0,r.useMemo)((()=>({isFooterExpanded:n,setIsFooterExpanded:a})),[n]);return(0,o.jsx)(s.Provider,{value:l,children:(0,o.jsx)("div",{children:e})})},l=()=>{const e=(0,r.useContext)(s);if(!e)throw new Error("Can only call useFooterAnimationContext inside FooterAnimationContextProvider");return e}},6439:(e,t,n)=>{n.d(t,{Oc:()=>m,Sy:()=>v});var o=n(29109),r=n(74848),i=n(96540),s=n(80066),a=n(46759),l=(n(60445),n(45468),n(48702),n(4402),n(69648),n(3418),n(11011),n(88393),n(41253),n(95821),n(10941),n(16219),n(40337),n(81285),n(35473)),d=(n(20433),n(83073),n(99157),n(87439)),c=(n(7116),n(83650),n(12174),n(54769),n(60337),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const u=(0,i.createContext)(void 0),v=({children:e})=>{var t,n,v,m,h;const g=(0,i.useRef)(null),[w,p]=(0,i.useState)([]),[f,y]=(0,i.useState)(),[C,S]=(0,i.useState)(!1),[b,k]=(0,i.useState)(!1),[W,x]=(0,i.useState)(""),{environmentId:P,network:E,primaryWallet:A,projectSettings:I}=(0,c.J)(),F=Boolean(null===(v=null===(n=null===(t=null==I?void 0:I.sdk)||void 0===t?void 0:t.funding)||void 0===n?void 0:n.onramps)||void 0===v?void 0:v.length);(0,i.useEffect)((()=>{var e;if(!f)return;const t=w.find((e=>e.provider===f));if(!t)return x(""),void k(!1);x(null!==(e=t.url)&&void 0!==e?e:""),k(!0)}),[w,f]);const M=(0,i.useCallback)((e=>{if(!w.length)return;const t=w.find((t=>t.provider===e));t&&(null==t?void 0:t.url)?y(e):k(!1)}),[w,p]),j=(0,i.useCallback)(((...e)=>(0,o.s)(void 0,[...e],void 0,(function*({address:e,token:t}={}){var n;if(!F)return;if(!A)return;const o=null===(n=(0,s.Qr)(A.chain))||void 0===n?void 0:n.name;if(!o)return;const r=(0,s.ox)(A.connector)&&(0,l.s)(a.C4g.Payment,A),i=E&&"evm"===o;try{const n=(yield(0,d.A)({chain:o,environmentId:P,networkId:i?E.toString():void 0,token:t,walletAddress:e||r||A.address})).filter((e=>{var t,n,o;return null===(o=null===(n=null===(t=null==I?void 0:I.sdk)||void 0===t?void 0:t.funding)||void 0===n?void 0:n.onramps)||void 0===o?void 0:o.includes(e.provider)}));n.length&&k(!0),p(n)}catch(e){k(!1)}}))),[P,F,E,A,null===(h=null===(m=null==I?void 0:I.sdk)||void 0===m?void 0:m.funding)||void 0===h?void 0:h.onramps]),O=(0,i.useMemo)((()=>({fundingEnabled:F,fundingRef:g,fundingUrl:W,selectedFundingProvider:f,setSelectedOnrampProvider:M,setShowFunding:S,showFunding:C,supportsFunding:b,updateSupportsFunding:j})),[F,W,f,M,C,b,j]);return(0,i.useEffect)((()=>{j()}),[P,F,E,null==A?void 0:A.address]),(0,r.jsx)(u.Provider,{value:O,children:e})},m=()=>{const e=(0,i.useContext)(u);if(void 0===e)throw new Error("usage of useFundingContext not wrapped in `FundingContextProvider`.");return e}},91650:(e,t,n)=>{n.d(t,{J:()=>u});var o=n(29109),r=n(96540),i=n(60445),s=n(6439),a=(n(83650),n(46759),n(69648),n(88393),n(80066),n(74848),n(41253)),l=(n(95821),n(3418),n(48702),n(10941),n(16219),n(3194)),d=(n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(12174),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(37305)),c=(n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(89809));const u=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),{fundingEnabled:n,setShowFunding:u,showFunding:v,setSelectedOnrampProvider:m,updateSupportsFunding:h}=(0,s.Oc)(),{primaryWallet:g,setShowAuthFlow:w}=(0,c.J)();(0,r.useEffect)((()=>{!v&&e.current&&(e.current.resolve(),e.current=null)}),[v]);const{setView:p}=(0,a.At)();return(0,l.h)("authFlowClose",(()=>{t.current=null})),{connectWalletForFunding:(0,r.useCallback)((()=>n?(t.current||(t.current=new Promise(((e,n)=>{p("external-funding-wallet-list",{onSelectWallet:r=>(0,o.s)(void 0,[r],void 0,(function*({walletConnector:o}){try{const t=yield o.getAddress();if(!t)return void n(new i.ii("No wallet address found"));const r=o.createWallet({address:t,chain:o.connectedChain,connector:o,id:"external-funding-wallet",isAuthenticated:!1,key:o.key});e(r)}catch(e){return void n(e)}finally{t.current=null,w(!1)}})),viewWalletsFilter:(null==g?void 0:g.chain)?(0,d.mS)(g.chain):void 0}),w(!0,{emitCancelAuth:!1,ignoreIfIsEmbeddedWidget:!0,initializeWalletConnect:!0,performMultiWalletChecks:!1})}))),t.current):Promise.reject(new Error("Funding is not enabled"))),[n,p,w]),enabled:n,fundWithExternalWallet:e=>(0,o.s)(void 0,[e],void 0,(function*({amount:e,fromWallet:t}){if(!e||!t)throw new Error("Amount and fromWallet are required");if(!g)throw new Error("Primary wallet not found");const n=yield t.getNetwork(),o=yield g.getNetwork();if(!n||!o)throw new Error("Wallet network not found");n!==o&&(yield t.switchNetwork(o));const r=g.address;return t.sendBalance({amount:e.toString(),toAddress:r})})),openExternalFunding:t=>(0,o.s)(void 0,[t],void 0,(function*({onrampProvider:t,address:o,token:r}){if(!n)throw new Error("Funding is not enabled");return e.current||(e.current=new i.Zv,(o||r)&&(yield h({address:o,token:r})),m(t),u(!0)),e.current.promise}))}}},4623:(e,t,n)=>{n.d(t,{Yr:()=>l,Yv:()=>d});var o=n(29109),r=n(74848),i=n(96540),s=n(80066);const a=(0,i.createContext)(void 0),l=({children:e})=>{const[t,n]=(0,i.useState)(null),l=(0,i.useCallback)((()=>(0,o.s)(void 0,void 0,void 0,(function*(){if(t)return t;try{const e=yield fetch("http://ip-api.com/json");if(!e.ok)return;const t=yield e.json();if("success"!==t.status)return;const{country:o,countryCode:r}=t,i={country:o,countryCode:r};return n(i),i}catch(e){return void s.vF.warn("Error fetching IP configuration",e)}}))),[t,n]),d=()=>{n(null)},c=(0,i.useMemo)((()=>({getIpConfiguration:l,removeIpConfiguration:d})),[l]);return(0,r.jsx)(a.Provider,{value:c,children:e})},d=()=>{const e=(0,i.useContext)(a);if(void 0===e)throw new Error("usage of useIpConfigurationContext not wrapped in `IpConfigurationContextProvider`.");return e}},7085:(e,t,n)=>{n.d(t,{nk:()=>l,tD:()=>a});var o=n(74848),r=n(96540),i=n(3194);n(29109),n(60445),n(83650),n(46759),n(69648),n(88393),n(80066),n(41253),n(95821),n(3418),n(48702),n(10941),n(16219),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(12174),n(28765),n(40961),n(20545),n(50574),n(451),n(30593),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825);const s=(0,r.createContext)(void 0),a=({children:e})=>{const[t,n]=(0,r.useState)(!1);(0,i.h)("logout",(()=>n(!1))),(0,i.h)("embeddedWalletCreated",(()=>n(!1)));const a=(0,r.useMemo)((()=>({loading:t,setLoading:n})),[t]);return(0,o.jsx)(s.Provider,{value:a,children:e})},l=()=>{const e=(0,r.useContext)(s);if(void 0===e)throw new Error("usage of useLoadingContext not wrapped in `LoadingContextProvider`.");return e}},29147:(e,t,n)=>{n.d(t,{lc:()=>i}),n(74848);var o=n(96540);n(95821),n(60337),n(58169),n(50574),n(41253),n(60445),n(100),n(58080),n(12174),n(29109),n(83650),n(46759),n(69648),n(88393),n(80066),n(3418),n(48702),n(10941),n(16219),n(54769),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(33656),n(11012),n(30261),n(44719),n(14624),n(53454),n(79903),n(74566),n(85168),n(71092),n(31448),n(95253),n(21858),n(53006),n(96696),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(26968),n(80622),n(31825),n(71172),n(44432),n(56950),n(43433),n(87583);const r=(0,o.createContext)(void 0),i=()=>{const e=(0,o.useContext)(r);return void 0===e?{mockedSDK:!1}:e}},95253:(e,t,n)=>{n.d(t,{N3:()=>p,rM:()=>f,yt:()=>g});var o=n(29109),r=n(74848),i=n(96540),s=n(60445),a=(n(12174),n(83650),n(46759),n(69648)),l=(n(88393),n(80066),n(41253),n(95821),n(53968)),d=(n(3418),n(48702),n(10941),n(6916)),c=(n(16219),n(89809)),u=(n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(96515)),v=(n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(40961),n(20545),n(50574),n(451),n(5678)),m=n(80426),h=(n(30593),n(7085),n(15047));n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825);const g=(0,i.createContext)(void 0),w=({children:e})=>{var t,n,w,p,f,y,C,S;const{userHasEmbeddedWallet:b}=(0,h.L)(),{isSessionKeyCompatible:k,isTurnkeyWalletWithoutAuthenticator:W}=(0,v.b)(),{environmentId:x,projectSettings:P,user:E}=(0,c.J)(),[A,I]=(0,i.useState)(!1),[F,M]=(0,i.useState)(void 0),[j,O]=(0,i.useState)(void 0),[T,U]=(0,d.M)(l.c6,!0),D=(0,i.useMemo)((()=>{var e,t,n,o;const r=Boolean(null===(o=null===(n=null===(t=null===(e=null==P?void 0:P.sdk)||void 0===e?void 0:e.embeddedWallets)||void 0===t?void 0:t.supportedSecurityMethods)||void 0===n?void 0:n.passkey)||void 0===o?void 0:o.isEnabled);return!1!==T&&W&&r}),[W,T,null===(p=null===(w=null===(n=null===(t=null==P?void 0:P.sdk)||void 0===t?void 0:t.embeddedWallets)||void 0===n?void 0:n.supportedSecurityMethods)||void 0===w?void 0:w.passkey)||void 0===p?void 0:p.isEnabled]),L=(0,i.useCallback)((()=>{var e,t,n,o;const r=Boolean(null===(o=null===(n=null===(t=null===(e=null==P?void 0:P.sdk)||void 0===e?void 0:e.embeddedWallets)||void 0===t?void 0:t.supportedSecurityMethods)||void 0===n?void 0:n.passkey)||void 0===o?void 0:o.isEnabled);return!k&&!D&&W&&r}),[null===(S=null===(C=null===(y=null===(f=null==P?void 0:P.sdk)||void 0===f?void 0:f.embeddedWallets)||void 0===y?void 0:y.supportedSecurityMethods)||void 0===C?void 0:C.passkey)||void 0===S?void 0:S.isEnabled,D,k,W]),R=(0,m.v)((()=>(0,o.s)(void 0,void 0,void 0,(function*(){return(yield(0,u.FO)({environmentId:x})).passkeys}))),{deps:[x,E,b(),A],enabled:Boolean(x&&E&&b())}),_=(0,i.useMemo)((()=>{if("undefined"==typeof window)return!1;const e=s.fP.getHostname();return!!R.data&&R.data.some((t=>{if(!t.origin)return!1;try{const n=new URL(t.origin).hostname;return n===(0,s.fL)()||n===e}catch(e){return a.v.error(e),!1}}))}),[R.data]),B=!W&&!_,N=(0,i.useMemo)((()=>{var e;return{passkey:F,passkeyEdited:A,passkeyIcon:j,setPasskey:M,setPasskeyEdited:I,setPasskeyIcon:O,setShowSecureAccountBanner:U,showAlert:L,showSecureAccountBanner:D,userHasPasskeysForCurrentOrigin:_,userNeedsCrossDomainPasskey:B,userPasskeys:null!==(e=R.data)&&void 0!==e?e:[],userPasskeysLoading:R.isLoading}}),[F,A,j,_,R.data,R.isLoading,B,L,U,D]);return(0,r.jsx)(g.Provider,{value:N,children:e})},p=({children:e})=>(0,r.jsx)(w,{children:e}),f=()=>{const e=(0,i.useContext)(g);if(void 0===e)throw new Error("usage of PasskeyContext not wrapped in `PasskeyContextProvider`.");return e}},14508:(e,t,n)=>{n.d(t,{W0:()=>a});var o=n(74848),r=n(96540),i=(n(46759),n(48702),n(60445),n(29109),n(4402),n(69648),n(3418),n(11011),n(88393),n(80066),n(41253),n(95821),n(10941),n(16219),n(40337),n(60867));n(81285),n(45468),n(99157),n(7116),n(20433),n(83073);const s=(0,r.createContext)(void 0),a=({children:e,onReinitialize:t})=>{const[n,a]=(0,r.useState)(),l=(0,r.useRef)(t);l.current=t;const d=(0,r.useCallback)((()=>{var e;const t=(0,i.D)(8);null===(e=l.current)||void 0===e||e.call(l,t),a(t)}),[]);return(0,o.jsx)(s.Provider,{value:{key:n,reinitialize:d},children:(0,r.cloneElement)(e,{key:n})})}},19918:(e,t,n)=>{n.d(t,{z:()=>g,q:()=>w});var o=n(29109),r=n(74848),i=n(96540),s=n(80066),a=(n(83650),n(46759),n(69648),n(88393),n(41253),n(95821),n(60445)),l=(n(3418),n(48702),n(10941),n(16219),n(12174),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(15896)),d=(n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(27373),n(95081),n(100),n(58080),n(40961),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253)),c=(n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(78770)),u=(n(21858),n(80622),n(31825),n(89809));const v=new a.ii("No wallet connected"),m=new a.ii("Primary wallet must use embedded wallet"),h=(0,i.createContext)(void 0),g=({children:e})=>{const{primaryWallet:t}=(0,u.J)(),{open:n,modal:a}=(0,l.Y)({elementId:"dynamic-send-balance"}),d=(0,i.useCallback)((e=>(0,o.s)(void 0,void 0,void 0,(function*(){return n(((n,o)=>{if(!t)throw v;if(!(0,s.Jd)(t.connector))throw m;return(0,r.jsx)(c.S,{onReject:o,onSuccess:n,initialRecipientAddress:null==e?void 0:e.recipientAddress,initialValue:null==e?void 0:e.value})}))}))),[n,t]);return(0,r.jsxs)(h.Provider,{value:{open:d},children:[a,e]})},w=()=>{const e=(0,i.useContext)(h);if(void 0===e)throw new Error("usage of useSendBalance not wrapped in `SendBalanceContextProvider`.");if(void 0===(0,i.useContext)(d.yt))throw new Error("usage of useSendBalance not wrapped in `PasskeyContextProvider`.");return e}},22923:(e,t,n)=>{n.d(t,{kD:()=>E,ki:()=>A});var o=n(29109),r=n(74848),i=n(96540),s=n(80066),a=(n(46759),n(69648)),l=(n(88393),n(41253)),d=(n(95821),n(60445)),c=(n(3418),n(48702),n(10941),n(16219),n(4402),n(11011),n(2239)),u=(n(40337),n(81285),n(45468),n(99157)),v=(n(7116),n(81149)),m=n(3194),h=(n(83650),n(89809)),g=n(54769),w=n(60337),p=n(58296),f=(n(28765),n(40961),n(12174),n(20545),n(50574),n(451),n(30593),n(47979),n(7085),n(87237),n(83073),n(63055),n(80607),n(21029),n(6864),n(29147),n(72366),n(55537),n(65381),n(75705),n(20433),n(27373),n(95081),n(100),n(58080),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(44917),n(94734),n(26490),n(10647),n(78080)),y=(n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(27213)),C=n(15988),S=n(74734),b=n(63241),k=n(95653),W=n(65050);const x=({setSocialProvider:e})=>{const{setView:t}=(0,l.At)(),{setDynamicWidgetView:n}=(0,f.pJ)(),[r,s]=(0,i.useState)(null),{sdkHasLoaded:c,setShowAuthFlow:v,isRenderingEmbeddedAuthFlow:m,setShowDynamicUserProfile:g,redirectUrl:w}=(0,h.J)(),{completeConnection:p}=(0,W.f)({}),x=(0,i.useCallback)((n=>{const o=(0,k.o)(n.provider);e(o),t("social-redirect-view"),m.current||v(!0)}),[e,t,m,v]),P=(0,i.useCallback)((()=>{n("profile"),g(!0)}),[n,g]);(0,C.S)((()=>{if((0,y.f)())return;const e=new URL(null!=w?w:window.location.href),t=e.searchParams.get("dynamicOauthState"),n=e.searchParams.get("dynamicOauthCode");if(!t||!n)return;const o=(0,b.tj)(t);o&&(o.code=n,s(o),(0,b.Oz)(o.provider))})),(0,S.v)((()=>(0,o.s)(void 0,void 0,void 0,(function*(){if(r){if("signin"===r.mode){if((0,u.wz)())return void a.v.error(new d.ii("User is already logged in"));x(r)}else if("link"===r.mode){if(!(0,u.wz)())return void a.v.error(new d.ii("User not logged in"));P()}yield p({authCode:r.code,authMode:r.mode,captchaToken:r.captchaToken,provider:r.provider,state:r.state,verifier:r.codeVerifier})}}))),Boolean(r)&&c)},P=(0,i.createContext)(void 0),E=({children:e})=>{var t,n,d,u;const{setShowAuthFlow:f,walletConnectorOptions:y,setSelectedWalletConnectorKey:C,walletUiUtils:S,displaySiweStatement:b,environmentId:k,projectSettings:W,setIsSingleWalletAccount:E,setShowDynamicUserProfile:A,secondaryWallets:I,sdkHasLoaded:F,user:M,connectWallet:j,primaryWallet:O,socialProvidersFilter:T=e=>e}=(0,h.J)(),{setErrorMessage:U}=(0,w.pu)(),{setView:D}=(0,l.At)(),{getCaptchaToken:L}=(0,g.Tr)(),R=(0,p.e)({displaySiweStatement:b,environmentId:k,projectSettings:W,setIsSingleWalletAccount:E}),_=null===(t=null==W?void 0:W.sdk.socialSignIn)||void 0===t?void 0:t.signInProvider,B=null!==(u=T((null!==(d=null===(n=null==W?void 0:W.sdk.socialSignIn)||void 0===n?void 0:n.providers)&&void 0!==d?d:[]).filter((e=>e.enabled)).map((e=>e.provider))))&&void 0!==u?u:[],N=y.map((({walletConnector:e})=>e)).find(s.eL),[V,$]=(0,i.useState)("idle"),[z,K]=(0,i.useState)(),J=(O?[O,...I]:I).find((e=>e.connector.key===(null==N?void 0:N.key))),Q=(0,i.useMemo)((()=>J?(0,c.b)(M,J.id):void 0),[M,J]);(0,m.h)("logout",(()=>K(void 0)));const q=(0,i.useCallback)((e=>{a.v.error(e),M?(f(!1,{emitCancelAuth:!0}),A(!0)):(f(!0),D("wallet-list"),U("-1"))}),[M,U,f,A,D]);return(0,i.useEffect)((()=>{var e,t;if(!W||!N||!F)return void(new URLSearchParams(window.location.search).has("magic_oauth_request_id")&&(D("social-redirect-view"),f(!0)));const n=new URLSearchParams(window.location.search);if(n.has("error")&&n.has("provider")){const t=n.get("error_description");return q(null!=t?t:"Unknown error"),void(null===(e=N.getSession)||void 0===e||e.call(N))}if(n.has("magic_oauth_request_id")){const e=n.get("provider");K(e),$("loading"),D("social-redirect-view"),f(!0),M||C(N.key),null===(t=N.getSession)||void 0===t||t.call(N).then((t=>(0,o.s)(void 0,void 0,void 0,(function*(){if(M){if(!Q)throw new Error("Social account not found");Q.oauthAccountId===t.oauthId?(null==J?void 0:J.id)!==(null==O?void 0:O.id)&&((0,v.q)(J.id),f(!1),A(!0)):(yield N.endSession(),D("social-wrong-account"))}else{yield j(N);const n=yield N.getAddress();S.disabledConfirmationOnce(),yield R({captchaToken:L(),oauth:{accessToken:t.accessToken,didToken:t.didToken,provider:e},publicWalletAddress:n,walletConnector:N})}K(void 0),$("success")})))).catch((e=>{K(void 0),$("error"),q(e)}))}}),[Q,M,W,F,I,C,f,A,D,N,R,S,J,q,j,null==O?void 0:O.id,L]),x({setSocialProvider:K}),(0,r.jsx)(P.Provider,{value:{enabledSocialProviders:B,redirectStatus:V,setSocialProvider:K,signInProvider:_,socialAccount:Q,socialProvider:z,socialWalletConnector:N},children:e})},A=()=>{const e=(0,i.useContext)(P);if(void 0===e)throw new Error("useSocialRedirectContext must be used within a SocialRedirectContextProvider");return e}},50574:(e,t,n)=>{n.d(t,{wX:()=>l,wR:()=>d});var o=n(74848),r=n(96540),i=(n(46759),n(69648),n(88393),n(80066),n(41253),n(95821),n(27213)),s=(n(60445),n(3418),n(48702),n(10941),n(16219),n(8293));const a=(0,r.createContext)(void 0),l=({customerTheme:e,designSettings:t,children:n})=>{const[l,d]=(0,r.useState)(e||(0,s.iV)(null==t?void 0:t.modal)),c=(0,r.useRef)((()=>{if((0,i.f)())return;const e=document.querySelector('[data-source="dynamic-theme-cdn"]');if(e)return e;const t=document.createElement("link");return document.head.append(t),t.dataset.source="dynamic-theme-cdn",t.rel="stylesheet",t})()),u=(0,r.useRef)((()=>{if((0,i.f)())return;const e=document.querySelector('[data-source="dynamic-theme"]');if(e)return e;const t=document.createElement("style");return document.head.append(t),t.dataset.source="dynamic-theme",t})()),v=(0,r.useCallback)((e=>{if(d(e),(0,i.f)()||void 0===c.current||void 0===u.current)return;document.body.dataset.dynamicTheme=e.theme.name,document.body.dataset.dynamicThemeBrand=e.brandStyle;const t="default"===e.template?"":`https://app.dynamic.xyz/assets/templates/${e.template}.css`;c.current.href!==t&&(c.current.href=t);const n=(e=>{const{customColor:t,brandStyle:n}=e;return`@layer dynamic-project-environment-theme {\n  #dynamic-widget, #dynamic-modal, .dynamic-shadow-dom {\n    ${[["--dynamic-brand-primary-color",t],["--dynamic-badge-dot-background",t],["--dynamic-footer-background-color","bold"===n?t:void 0],["--dynamic-footer-icon-color","subtle"===n?t:void 0]].filter((([,e])=>void 0!==e&&""!==e)).map((([e,t])=>`${e}: ${t};`)).join("\n    ")}\n  }\n}`})(e);u.current.innerHTML!==n&&(u.current.innerHTML=n)}),[]),m=(0,r.useCallback)(((e,t)=>{var n;const o=null===(n=s.fY.themes)||void 0===n?void 0:n[e],r=Object.assign(Object.assign({},l),{theme:Object.assign(Object.assign({},o),{colors:Object.assign(Object.assign({},o.colors),{ternary:null!=t?t:o.colors.ternary})})});v(r)}),[v,l]),h=(0,r.useCallback)((e=>v(Object.assign(Object.assign({},l),{template:e}))),[v,l]),g=(0,r.useCallback)((e=>v(Object.assign(Object.assign({},l),{border:e}))),[v,l]),w=(0,r.useCallback)((e=>v(Object.assign(Object.assign({},l),{view:e}))),[v,l]),p=(0,r.useCallback)((e=>v(Object.assign(Object.assign({},l),{customColor:e}))),[v,l]),f=(0,r.useCallback)((e=>v(Object.assign(Object.assign({},l),{brandStyle:e}))),[v,l]);(0,r.useEffect)((()=>v(e||(0,s.iV)(null==t?void 0:t.modal))),[e,null==t?void 0:t.modal,v]);const y=(0,r.useMemo)((()=>({changeBorder:g,changeBrandStyle:f,changePrimaryColor:p,changeTemplate:h,changeTheme:m,changeView:w,theme:l})),[l,g,f,h,m,p,w]);return(0,o.jsx)(a.Provider,{value:y,children:n})},d=()=>{const e=(0,r.useContext)(a);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e}},8293:(e,t,n)=>{n.d(t,{fY:()=>r,iV:()=>i}),n(46759),n(69648),n(88393),n(80066),n(96540),n(74848),n(41253),n(95821);var o=n(49122);n(60445),n(3418),n(48702),n(10941),n(16219);const r={border:"rounded",brandStyle:"subtle",customColor:"",template:"default",themes:{auto:{colors:{accent_1:"#2C303A",accent_2:"#3C414D",accent_3:"#4C525F",background:"#15181F",border:"1px solid #2C303A",error_1:"rgba(255, 106, 106, 0.2)",error_2:"#FF6A6A",footer:"#2C303A",primary:"#15181F",secondary:"#2C303A",ternary:"#2660FF",textPrimary:"#FFF",textSecondary:"#ACACB9"},name:"auto"},dark:{colors:{accent_1:"#2C303A",accent_2:"#3C414D",accent_3:"#4C525F",background:"#15181F",border:"1px solid #2C303A",error_1:"rgba(255, 106, 106, 0.2)",error_2:"#FF6A6A",footer:"#2C303A",primary:"#15181F",secondary:"#2C303A",ternary:"#2660FF",textPrimary:"#FFF",textSecondary:"#ACACB9"},name:"dark"},light:{colors:{accent_1:"#FFF",accent_2:"#F0F3FF",accent_3:"#E9EDFC",background:"#FFFFFF",border:"1px solid #E9EDFC",error_1:"rgba(255, 70, 70, 0.1)",error_2:"#FF4646",footer:"#F7F9FE",primary:"#F7F7F9",secondary:"#FFFFFF",ternary:"#2660FF",textPrimary:"#404040",textSecondary:"#80858B"},name:"light"}},view:"extended",walletColor:{color:"#1648F9",gradient:"90deg, #1648F9 0%, #4B73FF 100%"}},i=(e,t)=>{const{border:n,brand:i,view:s,primaryColor:a}=e||{},l=t||(null==e?void 0:e.theme)||"light",d=(null==e?void 0:e.template)||"default";return Object.assign(Object.assign({},r),{border:n||r.border,brandStyle:i||r.brandStyle,customColor:a||r.customColor,template:d,theme:(0,o.g)(r.themes,l),view:s||r.view})}},65381:(e,t,n)=>{n.d(t,{F:()=>c,i:()=>d});var o=n(29109),r=n(74848),i=n(96540),s=n(10198),a=(n(12174),n(60445),n(83650),n(46759),n(69648),n(88393),n(80066),n(41253),n(95821),n(3418),n(48702),n(10941),n(16219),n(54769),n(60337),n(4402),n(11011),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073),n(21029),n(47979),n(63055),n(28765),n(15896)),l=(n(20545),n(50574),n(451),n(30593),n(7085),n(87237),n(80607),n(6864),n(29147),n(72366),n(55537),n(75705),n(27373),n(95081),n(100),n(58080),n(40961),n(53006),n(11012),n(71172),n(14624),n(44432),n(79903),n(53454),n(74566),n(85168),n(71092),n(26968),n(56950),n(43433),n(87583),n(30261),n(96696),n(58169),n(23121),n(4623),n(22923),n(44917),n(94734),n(26490),n(10647),n(78080),n(95253),n(44719),n(79620),n(59553),n(31448),n(98592),n(18983),n(21858),n(80622),n(31825),n(77740));const d=(0,i.createContext)(void 0),c=({children:e})=>{const{modal:t,open:n}=(0,a.Y)({elementId:"dynamic-edit-user-field"}),c=(0,i.useCallback)(((e,t)=>(0,o.s)(void 0,void 0,void 0,(function*(){return n(((n,o)=>(0,r.jsx)(l.H,{children:(0,r.jsx)(s.s,{fields:e.fields,submitText:e.submitText,title:e.title,subtitle:e.subtitle,onCancel:o,onSubmit:e=>t(e).then((t=>n({fields:e,updateUserResult:t})))})})))}))),[n]);return(0,r.jsxs)(d.Provider,{value:{open:c},children:[t,e]})}},63055:(e,t,n)=>{n.d(t,{i0:()=>l,nd:()=>a,zy:()=>d});var o=n(74848),r=n(96540),i=n(12174);const s=(0,r.createContext)(void 0),a=({children:e})=>{const[t,n]=(0,r.useState)([]),a=(0,r.useRef)([]),l=(0,r.useRef)([]),d=(0,r.useCallback)((e=>{n((t=>{const n=e(t);return a.current.forEach((e=>{const t=n.find((({id:t})=>t===e));t&&i.zm.emit("walletAdded",t,n)})),l.current.forEach((e=>{const o=t.find((({id:t})=>t===e));o&&i.zm.emit("walletRemoved",o,n)})),a.current=[],l.current=[],n}))}),[]);return(0,o.jsx)(s.Provider,{value:{addedWalletsIds:a,registerUserWallet:e=>d((t=>[...t,e])),removeUserWallet:e=>d((t=>t.filter((({id:t})=>e!==t)))),removedWalletsIds:l,setUserWallets:d,userWallets:t},children:e})},l=()=>{const e=(0,r.useContext)(s);if(!e)throw new Error("Can only call useInternalUserWallets inside UserWalletsProvider");return e},d=()=>{const e=(0,r.useContext)(s);if(!e)throw new Error("Can only call useUserWallets inside UserWalletsProvider");return e.userWallets}},28765:(e,t,n)=>{n.d(t,{lP:()=>s,vm:()=>a});var o=n(74848),r=n(96540);const i=(0,r.createContext)(void 0),s=({children:e})=>{const[t,n]=(0,r.useState)(void 0),[s,a]=(0,r.useState)(void 0),[l,d]=(0,r.useState)(void 0),c=(0,r.useMemo)((()=>({displayedDestination:t,retryData:l,setDisplayedDestination:n,setRetryData:d,setVerificationUUID:a,verificationUUID:s})),[t,l,s]);return(0,o.jsx)(i.Provider,{value:c,children:e})},a=()=>{const e=(0,r.useContext)(i);if(void 0===e)throw new Error("usage of useVerification not wrapped in `VerificationProvider`.");return e}},41253:(e,t,n)=>{n.d(t,{At:()=>d,ex:()=>l});var o=n(74848),r=n(96540),i=n(3194),s=n(60337);const a=(0,r.createContext)(void 0),l=({children:e,initialView:t={props:{isWalletConnectList:!0},type:"wallet-list"}})=>{const[n,l]=(0,r.useState)(null),d=n||t,{clearError:c}=(0,s.pu)(),u=(0,r.useCallback)((()=>{l(null)}),[]),v=(0,r.useCallback)(((e,t,n)=>{d.type!==e&&c(),l({events:n,props:t,type:e})}),[]);(0,i.h)("logout",(()=>u()));const m=(0,r.useMemo)((()=>({goToInitialView:u,setView:v,view:d})),[u,v,d]);return(0,o.jsx)(a.Provider,{value:m,children:e})},d=()=>{const e=(0,r.useContext)(a);if(void 0===e)throw new Error("usage of useViewContext not wrapped in `ViewContextProvider`.");return e}},87237:(e,t,n)=>{n.d(t,{ej:()=>s,u2:()=>a});var o=n(74848),r=n(96540);const i=(0,r.createContext)(void 0),s=({children:e})=>{const[t,n]=(0,r.useState)(!1),s=(0,r.useMemo)((()=>({isLoadingEmbeddedWallet:t,setIsLoadingEmbeddedWallet:n})),[t]);return(0,o.jsx)(i.Provider,{value:s,children:e})},a=()=>{const e=(0,r.useContext)(i);if(void 0===e)throw new Error("usage of useWalletContext not wrapped in `WalletContextProvider`.");return e}},23121:(e,t,n)=>{n.d(t,{Rz:()=>d,V3:()=>c});var o=n(74848),r=n(96540),i=n(62511),s=n(9778),a=n(41253);const l=r.createContext(void 0),d=()=>{const e=r.useContext(l);if(void 0===e)throw new Error("usage of useWalletGroupContext not wrapped in `WalletGroupContextProvider`.");return e},c=({children:e})=>{const[t,n]=r.useState(),{setView:d}=(0,a.At)(),{handleWalletItemClick:c}=(0,s.f)(),u={navigateToWalletGroup:r.useCallback(((e,{onSelectWallet:t}={})=>{n(e);const o=(0,i.H)(e),r={"multi-chain":"wallet-group","multi-wallet":"select-wallet-in-wallet-group"};d(o?r[o]:r["multi-chain"],{onSelectWallet:null!=t?t:c})}),[c,d]),selectedWalletGroup:t};return(0,o.jsx)(l.Provider,{value:u,children:e})}},60203:(e,t,n)=>{n.d(t,{Kc:()=>s});var o=n(74848),r=n(96540);n(46759),n(48702),n(60445),n(29109),n(4402),n(69648),n(3418),n(11011),n(88393),n(80066),n(41253),n(95821),n(10941),n(16219),n(40337),n(81285),n(45468),n(99157),n(7116),n(20433),n(83073);const i=(0,r.createContext)(null),s=({children:e})=>{const[t,n]=(0,r.useState)({}),s=(0,r.useCallback)(((e,t)=>{n((n=>Object.assign(Object.assign({},n),{[e]:{type:t}})))}),[n]),a=(0,r.useCallback)((e=>{n((t=>{const n=Object.assign({},t);return delete n[e],n}))}),[n]),l=(0,r.useCallback)((e=>Object.values(t).some((t=>t.type===e))),[t]);return(0,o.jsx)(i.Provider,{value:{checkWidgetPresence:l,registerId:s,removeId:a},children:e})}}}]);