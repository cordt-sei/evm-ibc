"use strict";(self.webpackChunkibc_transfer_ui=self.webpackChunkibc_transfer_ui||[]).push([[1162],{29482:(e,i,t)=>{t.d(i,{D:()=>s}),t(96540),t(83650),t(46759),t(69648),t(88393),t(80066),t(74848),t(41253),t(95821),t(60445),t(3418),t(48702),t(10941),t(16219),t(12174),t(29109),t(54769),t(60337),t(4402),t(11011);var o=t(83943),n=(t(40337),t(76529)),r=(t(81285),t(45468),t(99157),t(7116),t(20433),t(83073),t(21029),t(47979),t(63055),t(28765),t(40961),t(20545),t(50574),t(451),t(55616)),d=(t(30593),t(7085),t(87237),t(80607),t(6864),t(29147),t(72366),t(55537),t(65381),t(75705),t(27373),t(95081),t(100),t(58080),t(53006),t(11012),t(71172),t(14624),t(44432),t(79903),t(53454),t(74566),t(85168),t(71092),t(26968),t(56950),t(43433),t(87583),t(30261),t(96696),t(58169),t(23121),t(4623),t(22923),t(44917),t(94734),t(26490),t(10647),t(78080),t(95253),t(44719),t(79620),t(59553),t(31448),t(98592),t(18983),t(21858),t(80622),t(31825),t(89809));const s=()=>{const e=(0,r._)(),{projectSettings:i,user:t}=(0,d.J)();return!e&&((0,o.cb)({customFields:null==i?void 0:i.customFields,projectSettingsKyc:null==i?void 0:i.kyc,user:t}).length>0||(0,n.Y)(i))}},80738:(e,i,t)=>{t.d(i,{d:()=>n});var o=t(96540);const n=({disabled:e,inputKey:i,onKeyPressed:t})=>{(0,o.useEffect)((()=>{const o=o=>{e||o.key!==i||t(o)};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}}),[e,i,t])}},75818:(e,i,t)=>{t.d(i,{j:()=>c});var o=t(29109),n=(t(60445),t(46759),t(45468),t(48702),t(4402),t(69648),t(3418),t(11011),t(88393),t(80066),t(96540),t(74848),t(41253),t(95821),t(10941),t(16219),t(40337),t(81285),t(20433),t(83073),t(99157),t(7116),t(18003)),r=(t(83650),t(12174)),d=(t(54769),t(60337),t(21029),t(47979),t(63055)),s=(t(28765),t(40961),t(20545),t(50574),t(451),t(30593),t(7085),t(87237),t(80607),t(6864),t(29147),t(72366),t(55537),t(65381),t(75705),t(27373),t(95081),t(100),t(58080),t(53006),t(11012),t(71172),t(14624),t(44432),t(79903),t(53454),t(74566),t(85168),t(71092),t(26968),t(56950),t(43433),t(87583),t(30261),t(96696),t(58169),t(23121),t(4623),t(22923),t(44917),t(94734),t(26490),t(10647),t(78080),t(95253),t(44719),t(79620),t(59553),t(31448),t(98592),t(18983),t(21858),t(80622),t(31825),t(89809));const c=()=>{const{environmentId:e,setShowAuthFlow:i,selectedWalletConnector:t}=(0,s.J)(),{addedWalletsIds:c}=(0,d.i0)();return{mergeUserAccounts:d=>(0,o.s)(void 0,void 0,void 0,(function*(){const o=(yield(0,n.yi)(e,d)).lastVerifiedCredentialId;o&&c.current.push(o);const s=yield null==t?void 0:t.getConnectedAccounts();(null==s?void 0:s.length)&&r.zm.emit("triggerComputePrimaryWalletMultiWalletStateFromAccounts",{accounts:s}),i(!1)}))}}},92408:(e,i,t)=>{t.d(i,{o:()=>l});var o=t(29109),n=t(46759),r=(t(96540),t(83650),t(69648),t(88393),t(80066),t(74848),t(41253),t(95821),t(60445),t(3418),t(48702),t(10941),t(16219),t(12174)),d=(t(54769),t(60337),t(83219)),s=(t(4402),t(11011),t(40337),t(81285),t(45468),t(99157),t(6831)),c=(t(7116),t(20433),t(83073),t(21029),t(47979),t(63055),t(28765),t(40961),t(20545),t(50574),t(451),t(30593),t(68248)),u=(t(6864),t(29147),t(72366),t(14170)),a=(t(65381),t(55537),t(75705),t(27373),t(95081),t(100),t(58080),t(53006),t(11012),t(71172),t(14624),t(44432),t(79903),t(53454),t(74566),t(85168),t(71092),t(26968),t(56950),t(43433),t(87583),t(87237),t(30261),t(96696),t(58169),t(23121),t(4623),t(22923),t(44917),t(94734),t(26490),t(10647),t(7085),t(78080),t(95253),t(44719),t(79620),t(59553),t(31448),t(98592),t(80607),t(18983),t(21858),t(80622),t(31825),t(89809));const l=()=>{const{completeAuth:e}=(0,c.r)({}),{user:i,userWithMissingInfo:t,environmentId:l}=(0,a.J)(),v=i||t,{updateUser:f}=(0,u.U)({validationSchemaStripUnknown:!1});return{addDevice:(...e)=>(0,o.s)(void 0,[...e],void 0,(function*(e=n.Fzs.Totp){if(!v)throw new Error(d.nM);const{id:i,secret:t,uri:o}=yield(0,s.AB)({environmentId:l,type:e});return{id:i,secret:t,uri:o}})),authDevice:(i,...t)=>(0,o.s)(void 0,[i,...t],void 0,(function*(i,t=n.Fzs.Totp,c){try{if(!v)throw new Error(d.nM);let n=!1;return yield e({onValidUpdatedJwt:()=>(0,o.s)(void 0,void 0,void 0,(function*(){n=!0})),updateJwtFunction:()=>(0,o.s)(void 0,void 0,void 0,(function*(){const e=yield(0,s.rx)({code:i,createMfaToken:{singleUse:!0},deviceId:c,environmentId:l,type:t});return r.zm.emit("mfaCompletionSuccess",{mfaToken:e.mfaToken}),{isEmailVerificationRequired:!1,isSmsVerificationRequired:!1,missingFields:[],updateUserProfileResponse:e}}))}),n}catch(e){throw r.zm.emit("mfaCompletionFailure",{error:e}),e}})),authRecoveryCode:i=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!v)throw new Error(d.nM);let t=!1;return yield e({onValidUpdatedJwt:()=>(0,o.s)(void 0,void 0,void 0,(function*(){t=!0})),updateJwtFunction:()=>(0,o.s)(void 0,void 0,void 0,(function*(){const e=yield(0,s.eE)({code:i,environmentId:l});if(!e)throw new Error("Failed to authenticate recovey code");return{isEmailVerificationRequired:!1,isSmsVerificationRequired:!1,missingFields:[],updateUserProfileResponse:e}}))}),t})),completeAcknowledgement:()=>(0,o.s)(void 0,void 0,void 0,(function*(){yield f({mfaBackupCodeAcknowledgement:n._7V.Complete})})),deleteUserDevice:(e,i)=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!v)throw new Error(d.nM);yield(0,s.Eu)({environmentId:l,mfaAuthToken:i,mfaDeviceId:e})})),getRecoveryCodes:(...e)=>(0,o.s)(void 0,[...e],void 0,(function*(e=!1){if(!v)throw new Error(d.nM);const i=e?s.IJ:s.Mw,t=yield i({environmentId:l});if(!t)throw new Error("Recovery codes not found");return t})),getUserDevices:()=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!v)throw new Error(d.nM);return yield(0,s.nB)({environmentId:l})})),updateUserDevice:e=>(0,o.s)(void 0,void 0,void 0,(function*(){if(!v)throw new Error(d.nM);yield(0,s.n5)({environmentId:l,mfaDeviceId:e})})),verifyDevice:(e,...i)=>(0,o.s)(void 0,[e,...i],void 0,(function*(e,i=n.Fzs.Totp){if(!v)throw new Error(d.nM);const t=yield(0,s.kB)({code:e,environmentId:l,type:i});if(!t)throw new Error("Failed to verify device");return t}))}}},2204:(e,i,t)=>{t.d(i,{E:()=>d});var o=t(96540),n=t(41253),r=(t(83650),t(46759),t(69648),t(88393),t(80066),t(74848),t(95821),t(60445),t(3418),t(48702),t(10941),t(16219),t(12174),t(29109),t(54769),t(60337),t(4402),t(11011),t(40337),t(81285),t(45468),t(99157),t(7116),t(20433),t(83073),t(21029),t(47979),t(63055),t(28765),t(40961),t(20545),t(50574),t(451),t(30593),t(7085),t(87237),t(80607),t(6864),t(29147),t(72366),t(55537),t(65381),t(75705),t(27373),t(95081),t(100),t(58080),t(53006),t(11012),t(71172),t(14624),t(44432),t(79903),t(53454),t(74566),t(85168),t(71092),t(26968),t(56950),t(43433),t(87583),t(30261),t(96696),t(58169),t(23121),t(4623),t(22923),t(44917),t(94734),t(26490),t(10647),t(78080),t(95253),t(44719),t(79620),t(59553),t(31448),t(98592),t(18983),t(21858),t(80622),t(31825),t(89809));const d=()=>{var e;const{setShowAuthFlow:i,projectSettings:t}=(0,r.J)(),{setView:d}=(0,n.At)(),s=null===(e=null==t?void 0:t.security.mfa)||void 0===e?void 0:e.enabled,c=(0,o.useCallback)((e=>{if(e){if(!s)return;d("mfa-choose-device")}i(e,{emitCancelAuth:!0})}),[s,i,d]),u=(0,o.useCallback)((e=>{if(e){if(!s)return;d("mfa-secure-device",{isInitialSetup:!0})}i(e,{emitCancelAuth:!0})}),[s,i,d]),a=(0,o.useCallback)((e=>{if(e){if(!s)return;d("mfa-verification")}i(e,{emitCancelAuth:!0})}),[s,i,d]),l=(0,o.useCallback)((e=>{if(e){if(!s)return;d("mfa-display-backup-codes")}i(e,{emitCancelAuth:!0})}),[s,i,d]);return{setShowMfaChooseType:c,setShowMfaEnterBackupCodes:(0,o.useCallback)((e=>{if(e){if(!s)return;d("mfa-recovery")}i(e,{emitCancelAuth:!0})}),[s,i,d]),setShowMfaQRCode:u,setShowMfaViewBackupCodes:l,setShowOTPVerification:a}}}}]);