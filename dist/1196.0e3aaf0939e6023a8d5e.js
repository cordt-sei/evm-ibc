"use strict";(self.webpackChunkibc_transfer_ui=self.webpackChunkibc_transfer_ui||[]).push([[1196],{71343:(e,t,i)=>{i.d(t,{e:()=>j});var n=i(74848),a=i(96540),s=i(95081),o=i(88393),d=(i(60445),i(100),i(58080),i(12174),i(29109),i(83650),i(46759),i(69648),i(80066),i(4580)),r=i(41253),l=(i(95821),i(49795)),c=(i(3418),i(48702),i(10941),i(16219),i(89809)),y=(i(54769),i(60337),i(4402),i(11011),i(40337),i(41653)),u=(i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029)),_=(i(47979),i(63055),i(28765)),m=(i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),v=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(32934)),h=(i(78080),i(11012),i(79903),i(36100)),p=(i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(69844)),g=i(70999);i(71172),i(44432),i(26968),i(56950),i(43433),i(87583),i(4623),i(44917),i(94734),i(26490),i(10647),i(80622),i(31825);const k={_socialMediaLinkText:"dyn_no_access.chainalysis.social_media_link_text",_socialMediaUrl:"dyn_no_access.chainalysis.social_media_link_url",buttonTitle:"dyn_no_access.chainalysis.button_text",subtitle:"dyn_no_access.chainalysis.description",title:"dyn_no_access.chainalysis.title"},w={buttonTitle:"dyn_no_access.default.button_text",subtitle:"dyn_no_access.default.description",title:"dyn_no_access.default.title"},b={_socialMediaLinkText:void 0,_socialMediaUrl:void 0,buttonTitle:"dyn_no_access.gate.button_text",subtitle:"dyn_no_access.gate.description",title:"dyn_no_access.gate.title"};var x=i(88616);const j=()=>{const{deniedAddress:e,setDeniedAddress:t,setDeniedOauthProvider:i,deniedOauthProvider:j,deniedOauthUsername:f}=(0,u.iU)(),{t:N}=(0,s.Bd)(),I=j?(0,o.eW)(j):void 0,{selectedWalletConnector:C,socialMediaIconUrl:S,notInTheListImageUrl:A,accessDeniedButton:E}=(0,c.J)(),{displayedDestination:W}=(0,_.vm)(),{goToInitialView:P}=(0,r.At)(),{_socialMediaLinkText:M,_socialMediaUrl:T,isAccessListView:O,isGateBlockedView:R,subtitle:U,title:F,buttonTitle:K}=(()=>{const{socialMediaLinkText:e,socialMediaUrl:t,accessDeniedMessagePrimary:i,accessDeniedMessageSecondary:n}=(0,c.J)(),{view:a}=(0,r.At)(),{t:o}=(0,s.Bd)(),d="chainalysis-blocked-wallet"===a.type,l="gate-blocked-wallet"===a.type,y="no-access"===a.type;return{_socialMediaLinkText:d?o(k._socialMediaLinkText):l?void 0:e,_socialMediaUrl:d?o(k._socialMediaUrl):l?void 0:t,buttonTitle:o(d?k.buttonTitle:l?b.buttonTitle:w.buttonTitle),isAccessListView:y,isChainalysisView:d,isGateBlockedView:l,subtitle:d?o(k.subtitle):l?o(b.subtitle):n||o(w.subtitle),title:d?o(k.title):l?o(b.title):i||o(w.title)}})(),V=S&&"string"!=typeof S?(0,g.$)(Object.keys(S)[0]):null,z=(0,a.useMemo)((()=>C?(0,n.jsx)(v.V,{}):(0,n.jsx)(x.U,{containerClassName:"wallet-no-access__icon--verified",Icon:null!=I?I:o.ei,iconSize:50,InnerIcon:d.h,variant:"red"})),[I,C]),B=(0,l.F)(e,6,4),q=(null==E?void 0:E.title)||K,L=(null==E?void 0:E.action)||(()=>{P(),t(""),i(void 0),null==C||C.endSession()}),D=void 0===j?null!=W?W:B:f,$=Boolean(A)&&(O||R),J=V&&(O||R);return(0,n.jsxs)("div",{className:"wallet-no-access__container",children:[$&&(0,n.jsx)("img",{src:A,alt:N("dyn_no_access.not_in_the_list_image_alt"),className:"wallet-no-access__image",copykey:"dyn_no_access.not_in_the_list_image_alt"}),(0,n.jsxs)("div",{className:"wallet-no-access__main",children:[(0,n.jsxs)("div",{className:"wallet-no-access__user-info-container",children:[z,(0,n.jsxs)("div",{"data-testid":"walletAddress",className:"wallet-no-access__wallet-address-container",children:[C&&(0,n.jsx)(p.m,{variant:"red",containerClassName:"user-info__status-dot"}),(0,n.jsx)(m.o,{variant:"body_normal",color:"primary",weight:"medium",className:"wallet-no-access__wallet-address",children:D})]})]}),(0,n.jsxs)("div",{className:"wallet-no-access__content",children:[(0,n.jsx)(m.o,{variant:"title",color:"primary",className:"wallet-no-access__content--primary",children:F}),(0,n.jsx)(m.o,{variant:"body_normal",weight:"regular",color:"secondary",className:"wallet-no-access__content--secondary",children:U})]}),(0,n.jsx)(h.E,{onClick:L,className:"wallet-no-access__button--primary",expanded:!0,buttonPadding:"large",children:q}),T&&M&&(0,n.jsxs)("div",{className:"wallet-no-access__social-info-container",children:[(0,n.jsxs)("a",{href:T,className:"wallet-no-access__waitlist-link",children:[(0,n.jsx)(m.o,{variant:"button_primary",color:"primary",children:M}),J&&(0,n.jsx)(V,{className:"wallet-no-access__social-icon",style:{height:(0,y.a)(24),width:(0,y.a)(24)}})]}),"string"==typeof S&&(0,n.jsx)("img",{alt:"social media",src:S,style:{height:"1.5rem",width:"1.5rem"}})]})]})]})}},66322:(e,t,i)=>{i.d(t,{F:()=>u});var n=i(74848),a=i(95081),s=i(95821),o=i(80066),d=(i(60445),i(100),i(58080),i(96540),i(12174),i(29109),i(83650),i(46759),i(69648),i(88393),i(41253),i(3418),i(48702),i(10941),i(16219),i(89809)),r=(i(54769),i(60337),i(4402),i(11011),i(40337),i(41653)),l=(i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),c=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(95748)),y=i(5053);i(78080),i(11012),i(79903),i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968),i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const u=()=>{const{selectedWalletConnector:e}=(0,d.J)(),{t}=(0,a.Bd)();if(!e)return null;const{metadata:i}=e,u=Object.entries((0,o.FJ)(i.downloadLinks)).filter((([,e])=>""!==e)).filter((([e])=>"ios"!==e&&"android"!==e)).map((([e,t])=>(0,n.jsx)(c.r,{name:e,link:t,Icon:(0,y.G)(e)},e)));return(0,n.jsxs)("div",{className:"no-qr-code-installed__container","data-testid":"no-qr-code-installed",children:[(0,n.jsx)("div",{className:"no-qr-code-installed__img",children:(0,n.jsx)(s.lc,{icon:i.icon,walletKey:e.key,style:{height:(0,r.a)(64),width:(0,r.a)(64)}})}),(0,n.jsx)(l.o,{className:"no-qr-code-installed__typography--title",variant:"title",copykey:"dyn_qr_code.wallet_not_installed.install",children:t("dyn_qr_code.wallet_not_installed.install",{wallet:i.name})}),(0,n.jsx)(l.o,{variant:"body_normal",className:"no-qr-code-installed__typography",color:"secondary",copykey:"dyn_qr_code.wallet_not_installed.select",children:t("dyn_qr_code.wallet_not_installed.select")}),(0,n.jsx)("div",{className:"no-qr-code-installed__links-section",children:u}),(0,n.jsx)(l.o,{variant:"body_mini",className:"no-qr-code-installed__typography",weight:"medium",color:"secondary",copykey:"dyn_qr_code.wallet_not_installed.refresh",children:t("dyn_qr_code.wallet_not_installed.refresh")})]})}},95748:(e,t,i)=>{i.d(t,{r:()=>o});var n=i(74848),a=i(95081),s=(i(60445),i(100),i(58080),i(96540),i(12174),i(29109),i(83650),i(46759),i(69648),i(88393),i(80066),i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128));i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(78080),i(11012),i(79903),i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968),i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const o=({name:e,link:t,Icon:i})=>{const{t:o}=(0,a.Bd)();return(0,n.jsx)("div",{className:"wallet-help-link",children:(0,n.jsxs)("a",{className:"wallet-help-link__anchor",href:t,target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(i,{style:{height:"1.5rem",width:"1.5rem"}}),(0,n.jsx)(s.o,{variant:"button_primary",weight:"medium",copykey:"dyn_qr_code.wallet_not_installed.browser_install",children:o("dyn_qr_code.wallet_not_installed.browser_install",{browser:(d=e,d[0].toUpperCase()+d.slice(1))})})]})});var d}},10857:(e,t,i)=>{i.d(t,{y:()=>r});var n=i(74848),a=i(95081),s=(i(60445),i(100),i(58080),i(96540),i(12174),i(29109),i(83650),i(46759),i(69648),i(88393),i(80066),i(42661)),o=(i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),d=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(17632));i(78080),i(11012),i(79903),i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968),i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const r=({choice:e,variant:t="default"})=>{const{t:i}=(0,a.Bd)();return(0,n.jsx)("div",{className:"auth-choice-info",children:{passkey:{default:[{description:"dyn_embedded_authenticator.passkey.auth_info.convinience.description",title:"dyn_embedded_authenticator.passkey.auth_info.convinience.title"},{description:"dyn_embedded_authenticator.passkey.auth_info.security.description",title:"dyn_embedded_authenticator.passkey.auth_info.security.title"}],noEmailSignup:[{description:"dyn_embedded_authenticator.passkey.no_email_auth_info.convinience.description",title:"dyn_embedded_authenticator.passkey.no_email_auth_info.convinience.title"},{description:"dyn_embedded_authenticator.passkey.no_email_auth_info.security.description",title:"dyn_embedded_authenticator.passkey.no_email_auth_info.security.title"}]}}[e][t].map(((e,t)=>(0,n.jsxs)("div",{className:"auth-choice-info__container-item",children:[(0,n.jsx)("div",{className:"auth-choice-info__container-icon",children:(0,n.jsx)(d.I,{size:"medium",className:"auth-choice-info__icon",children:(0,n.jsx)(s.h,{})})}),(0,n.jsxs)("div",{className:"action-card__item-title",children:[(0,n.jsx)(o.o,{variant:"body_normal",weight:"regular",copykey:e.title,children:i(e.title)}),(0,n.jsx)(o.o,{variant:"body_small",weight:"regular",color:"secondary",copykey:e.description,children:i(e.description)})]})]},`authChoiceInfo_${t}`)))})}},24735:(e,t,i)=>{i.d(t,{q:()=>w});var n=i(74848),a=i(96540),s=i(95081),o=i(95540),d=i(44128),r=i(36100),l=(i(83650),i(46759),i(69648),i(88393),i(80066),i(92209)),c=i(27659),y=(i(41253),i(95821),i(60445),i(3418),i(48702),i(10941),i(16219),i(12174),i(29109),i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(24721)),u=(i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(75988)),_=(i(451),i(32482)),m=(i(30593),i(7085),i(87237),i(5678)),v=(i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(100),i(58080),i(53006),i(11012),i(71172),i(14624),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(77782)),h=(i(26968),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(78080),i(95253),i(18271)),p=i(10857),g=(i(44719),i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const k={helpSession:{description:"dyn_embedded_authenticator.need_help_description",title:"dyn_embedded_authenticator.need_help_title"},reveal:{description:"dyn_embedded_authenticator.reveal_description",title:"dyn_embedded_authenticator.reveal_title"},sendTransaction:{description:"dyn_embedded_authenticator.description",title:"dyn_embedded_authenticator.title"},signMessage:{description:"dyn_embedded_authenticator.description",title:"dyn_embedded_authenticator.title"},signTransaction:{description:"dyn_embedded_authenticator.description",title:"dyn_embedded_authenticator.title"}},w=({currentAction:e})=>{var t,i,w;const{t:b}=(0,s.Bd)(),{primaryWallet:x,projectSettings:j,setShowAuthFlow:f}=(0,g.J)(),{getEOAWallet:N}=(0,u.R)(),I=null!==(t=x&&N(x))&&void 0!==t?t:x,{initPasskeyRecoveryProcess:C}=(0,_.V)(),{isTurnkeyWallet:S}=(0,m.b)(),A=(0,a.useMemo)((()=>{var t;const i=(0,y.a)(null===(t=null==j?void 0:j.sdk.embeddedWallets)||void 0===t?void 0:t.supportedSecurityMethods),n=Object.keys(i);return e&&["helpSession","reveal"].includes(e.type)?n:n.filter((e=>"email"!==e))}),[null==j?void 0:j.sdk.embeddedWallets]),E=I&&S&&I.connector.getAuthenticatorHandler().isSessionActive()?"dyn_embedded_authenticator.passkey.auth_info.start_button":"dyn_embedded_authenticator.passkey.auth_info.add_button",{title:W,description:P}=k[(null==e?void 0:e.type)||"signMessage"],M=null===(i=null==j?void 0:j.general)||void 0===i?void 0:i.supportUrls,T=null===(w=null==j?void 0:j.general)||void 0===w?void 0:w.supportEmail;return(null==A?void 0:A.length)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.r,{children:(0,n.jsx)(d.o,{as:"h1",variant:"title",color:"primary","data-testid":"dynamic-auth-modal-heading",className:"header__typography",copykey:W,children:b(W)})}),(0,n.jsxs)("div",{className:"embedded-auth-choice",children:[(0,n.jsx)("div",{className:"embedded-auth-choice__header",children:A.length>1?(0,n.jsx)(l.h,{}):(0,n.jsx)(c.h,{})}),(0,n.jsx)(d.o,{variant:"body_normal",weight:"regular",color:"secondary",className:"embedded-auth-choice__subtitle",copykey:P,children:b(P)}),A.length>1?(0,n.jsx)(h.b,{currentAction:e,supportedAuthenticators:A}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.y,{choice:"passkey"}),(0,n.jsx)(r.E,{dataTestId:"passkey-only-choice-button",buttonVariant:"brand-primary",color:"brand-primary",expanded:!0,onClick:()=>C("passkey"),copykey:E,typographyProps:{color:"inherit"},children:b(E)})]}),"reveal"!==(null==e?void 0:e.type)&&(0,n.jsx)(r.E,{buttonVariant:"primary",buttonClassName:"embedded-auth-choice__skip-button",expanded:!0,onClick:()=>{var t,i,n;(null===(t=null==e?void 0:e.settings)||void 0===t?void 0:t.goBack)?null===(n=null===(i=null==e?void 0:e.settings)||void 0===i?void 0:i.goBack)||void 0===n||n.call(i):f(!1)},copykey:"dyn_embedded_authenticator.skip",children:b("dyn_embedded_authenticator.skip")}),"helpSession"===(null==e?void 0:e.type)&&(M||T)&&(0,n.jsx)("div",{className:"embedded-auth-choice__support-links",children:(0,n.jsx)(v.h,{supportEmail:T,supportUrls:M})})]})]}):null}},18271:(e,t,i)=>{i.d(t,{b:()=>b});var n=i(29109),a=i(74848),s=i(96540),o=i(95081),d=(i(60445),i(100),i(58080),i(12174),i(83650),i(46759),i(69648),i(88393),i(80066),i(16873)),r=i(42919),l=(i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(89809)),c=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(74456)),y=(i(20545),i(50574),i(451),i(55229)),u=i(5332),_=(i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(17632)),m=(i(78080),i(11012),i(79903),i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(10067)),v=(i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968),i(90054)),h=i(14719),p=i(44128),g=i(13888),k=i(82544);i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const w=({titleKey:e,descriptionKey:t,description:i,LeadingIcon:n,action:s,badgeVariant:d,badgeKey:r,isLoading:l,dataTestId:c})=>{const{t:y}=(0,o.Bd)();return(0,a.jsxs)("button",{className:"action-card",onClick:s,"data-testid":c,children:[(0,a.jsx)(_.I,{className:"action-card__icon",children:n}),(0,a.jsxs)("div",{className:"action-card__content",children:[(0,a.jsxs)("div",{className:"action-card__content__row",children:[(0,a.jsx)(p.o,{variant:"body_normal",weight:"medium",copykey:e,children:y(e)}),(0,a.jsx)(k.E,{text:y(r),className:(0,v.x)("action-card__content__row__badge",{"action-card__content__row__badge--primary":"primary"===d},{"action-card__content__row__badge--secondary":"secondary"===d}),copykey:r})]}),(0,a.jsx)(p.o,{variant:"body_small",color:"secondary",copykey:t,children:i})]}),(0,a.jsx)(_.I,{color:"text-tertiary",className:"action-card__action-icon",children:l?(0,a.jsx)(g.y,{}):(0,a.jsx)(h.h,{})})]})},b=({currentAction:e,supportedAuthenticators:t})=>{var i,v;const[h,p]=(0,s.useState)(),{projectSettings:g}=(0,l.J)(),{t:k}=(0,o.Bd)(),{initAuthMethod:b,isLoading:x}=(0,u.g)(),{createRootElement:j}=(0,c.k)(),f=j(y.b),N={email:{badgeKey:"dyn_embedded_authenticator.email.badge",description:k("dyn_embedded_authenticator.email.description",{expiration:null===(v=null===(i=null==g?void 0:g.sdk.embeddedWallets)||void 0===i?void 0:i.sessionKeyDuration)||void 0===v?void 0:v.amount}),descriptionKey:"dyn_embedded_authenticator.email.description",icon:(0,a.jsx)(_.I,{color:"text-tertiary",size:"small",children:(0,a.jsx)(r.h,{})},"one-time-code-icon"),titleKey:"dyn_embedded_authenticator.email.title"},passkey:{badgeKey:"dyn_embedded_authenticator.passkey.badge",description:k("dyn_embedded_authenticator.passkey.description"),descriptionKey:"dyn_embedded_authenticator.passkey.description",icon:(0,a.jsx)(m.M,{defaultIcon:(0,a.jsx)(d.h,{"data-testid":"default-icon"})}),titleKey:"reveal"===(null==e?void 0:e.type)?"dyn_embedded_authenticator.passkey.reveal_title":"dyn_embedded_authenticator.passkey.title"}},I=t=>()=>(0,n.s)(void 0,void 0,void 0,(function*(){p(t),yield b({authenticatorType:t,currentAction:e,iframeContainer:f.current})}));return(0,a.jsx)("div",{className:"embedded-auth-choice-cards",children:t&&t.map((e=>(0,a.jsx)(w,{LeadingIcon:N[e].icon,action:I(e),badgeKey:N[e].badgeKey,badgeVariant:"passkey"===e?"primary":"secondary",descriptionKey:N[e].descriptionKey,description:N[e].description,titleKey:N[e].titleKey,isLoading:x&&e===h,dataTestId:`embedded-auth-choice__item-${e}`},e)))})}},10067:(e,t,i)=>{i.d(t,{M:()=>c});var n=i(74848),a=i(60445),s=(i(100),i(58080),i(96540),i(12174),i(29109),i(83650),i(46759),i(69648),i(88393),i(80066),i(62029)),o=i(16873),d=i(73203),r=i(76557),l=(i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(95081),i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(17632));i(78080),i(11012),i(79903),i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968),i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const c=({defaultIcon:e,className:t,size:i="small"})=>{let c=e||null;if((0,a.mU)()&&(c=(0,a.rG)()?(0,n.jsx)(r.h,{"data-testid":"iphone-8-icon"}):(0,n.jsx)(d.h,{"data-testid":"iphone-icon"})),(0,a.m0)()){const e=(0,a.oi)();c=e&&e>=9?(0,n.jsx)(o.h,{"data-testid":"android-9-icon"}):(0,n.jsx)(s.h,{"data-testid":"android-icon"})}return c?(0,n.jsx)(l.I,{className:t,size:i,children:c}):(0,n.jsx)(n.Fragment,{})}},99983:(e,t,i)=>{i.d(t,{K:()=>x});var n=i(29109),a=i(74848),s=i(96540),o=i(95081),d=i(60445),r=i(46759),l=(i(83650),i(69648),i(88393),i(80066),i(88339)),c=(i(41253),i(95821),i(53968)),y=(i(3418),i(48702),i(10941),i(16219),i(12174),i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(63789)),u=(i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(86754)),_=(i(50574),i(20545),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(100),i(58080),i(44128)),m=i(21416),v=(i(53006),i(36100)),h=i(46136),p=(i(11012),i(71172),i(14624),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(95540)),g=(i(26968),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(85439)),k=(i(78080),i(10067)),w=(i(95253),i(10857)),b=(i(44719),i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const x=({chains:e})=>{var t;const{walletConnectorOptions:i,environmentId:x,handleLogOut:j,user:f,userWithMissingInfo:N}=(0,b.J)(),I=1===(null===(t=null==f?void 0:f.verifiedCredentials)||void 0===t?void 0:t.length)&&!(0,y.X)(f,r.z3W.Email),{t:C}=(0,o.Bd)(),[S,A]=(0,s.useState)(!1);(0,s.useEffect)((()=>d.n$.removeItem(c.$1)),[]);const{createDynamicEmbeddedWalletMutation:E,isLoading:W,error:P}=(0,u.X)(),M=(0,s.useMemo)((()=>{if(P)return P instanceof d.ii?P.message:(0,g.y)(P)}),[P]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.r,{children:(0,a.jsx)(_.o,{as:"h1",variant:"title",color:"primary","data-testid":"dynamic-auth-modal-heading",className:"header__typography",copykey:"dyn_passkey_intro.title",children:C("dyn_passkey_intro.title")})}),(0,a.jsxs)("div",{className:"passkey-intro-view",children:[(0,a.jsx)("div",{className:"passkey-intro-view__header",children:(0,a.jsx)(l.h,{})}),(0,a.jsx)(_.o,{variant:"body_normal",weight:"regular",color:"secondary",className:"passkey-intro-view__subtitle",copykey:"dyn_passkey_intro.subtitle",children:C("dyn_passkey_intro.subtitle")}),M&&(0,a.jsx)(h.O,{children:M}),(0,a.jsx)(w.y,{choice:"passkey",variant:I?"noEmailSignup":"default"}),(0,a.jsxs)("div",{className:"passkey-intro-view__actions",children:[(0,a.jsx)(v.E,{buttonVariant:"brand-primary",buttonPadding:"large",onClick:()=>{return t=!0,(0,n.s)(void 0,void 0,void 0,(function*(){if(!f&&!N)throw new Error("User is not logged in");A(t),yield E({chains:e,environmentId:x,walletConnectorOptions:i,withAuthenticator:t})}));var t},dataTestId:"setup-passkey-button",loading:W&&S,disabled:W,typographyProps:{color:"inherit"},children:(0,a.jsxs)("div",{className:"passkey-intro-view__inline-button",children:[(0,a.jsx)(k.M,{size:"small"}),(0,a.jsx)(_.o,{copykey:"dyn_passkey_intro.button",children:C("dyn_passkey_intro.button")})]})}),(0,a.jsx)(m.Q,{"data-testid":"setup-passkey-logout-button",className:"passkey-intro-view__log-out",onClick:j,copykey:"dyn_passkey_intro.button_logout",children:C("dyn_passkey_intro.button_logout")})]})]})]})}},31747:(e,t,i)=>{i.d(t,{a:()=>_});var n=i(74848),a=i(96540),s=i(95081),o=(i(60445),i(100),i(58080),i(12174),i(29109),i(83650),i(46759),i(69648),i(88393),i(80066),i(26616)),d=(i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(89809)),r=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(24721)),l=(i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),c=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(78080),i(11012),i(79903),i(30261),i(96696),i(95540)),y=(i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(24536)),u=(i(26968),i(18271));i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const _=()=>{const{t:e}=(0,s.Bd)(),{projectSettings:t}=(0,d.J)(),i=(0,a.useMemo)((()=>{var e;const i=(0,r.a)(null===(e=null==t?void 0:t.sdk.embeddedWallets)||void 0===e?void 0:e.supportedSecurityMethods);return Object.keys(i).filter((e=>"email"!==e))}),[null==t?void 0:t.sdk.embeddedWallets]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.r,{children:(0,n.jsx)(l.o,{as:"h1",variant:"title",color:"primary","data-testid":"dynamic-auth-modal-heading",className:"header__typography",copykey:"dyn_passkey_new_domain_detected.title",children:e("dyn_passkey_new_domain_detected.title")})}),(0,n.jsxs)("div",{className:"passkey-new-domain-detected",children:[(0,n.jsx)(o.h,{className:"passkey-new-domain-detected__header"}),(0,n.jsx)(l.o,{variant:"body_normal",weight:"regular",color:"secondary",children:e("dyn_passkey_new_domain_detected.description")}),(0,n.jsx)(u.b,{supportedAuthenticators:i}),(0,n.jsx)(y.f,{isRecoveryFlow:!0})]})]})}},74041:(e,t,i)=>{i.d(t,{d:()=>b});var n=i(29109),a=i(74848),s=i(96540),o=i(95081),d=i(60445),r=(i(83650),i(46759),i(69648),i(88393),i(80066),i(91398)),l=i(63611),c=(i(41253),i(95821),i(3418),i(48702),i(15988)),y=(i(10941),i(16219),i(12174)),u=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(32708)),_=i(32482),m=(i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(100),i(58080),i(44128)),v=(i(53006),i(46136)),h=i(11012),p=(i(71172),i(14624),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(95540)),g=(i(26968),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(85439)),k=(i(78080),i(95253),i(44719),i(82444)),w=(i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const b=({canSkipAddingEmail:e=!0,shouldInitRecovery:t=!1,authenticatorType:i,currentAction:b,isFromEmailVerification:x=!1})=>{const{user:j,setShowAuthFlow:f}=(0,w.J)(),{t:N}=(0,o.Bd)(),{addRecoveryEmail:I,initPasskeyRecoveryProcess:C}=(0,_.V)(),[S,A]=(0,s.useState)(!1),[E,W]=(0,s.useState)(void 0);(0,c.S)((()=>{y.zm.once("embeddedWalletRecoveryEmailCompleted",(()=>(0,n.s)(void 0,void 0,void 0,(function*(){if(A(!0),W(void 0),t)return C(i,b);setTimeout((()=>{f(!1,{ignoreIfIsEmbeddedWidget:!1,performMultiWalletChecks:!1})}),5e3)})))),y.zm.once("embeddedWalletRecoveryEmailFailed",(e=>(0,n.s)(void 0,void 0,void 0,(function*(){W(e)}))))}));const{mutate:P,isLoading:M}=(0,u.n)((e=>(0,n.s)(void 0,void 0,void 0,(function*(){yield I(e)})))),T=e&&(0,a.jsx)(h.K,{onClick:()=>{f(!1)},type:"button","data-testid":"add-recovery-email-close-button",children:(0,a.jsx)(r.h,{})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.r,{trailing:T,children:(0,a.jsx)(m.o,{as:"h1",variant:"title",color:"primary","data-testid":"passkey-recovery-heading",className:"header__typography",copykey:"dyn_passkey_recovery.add_email.title",children:N("dyn_passkey_recovery.add_email.title")})}),(0,a.jsxs)("div",{className:"passkey-recovery-view",children:[(0,a.jsx)("div",{className:"passkey-recovery-view__header",children:(0,a.jsx)(l.h,{})}),S&&(0,a.jsx)(v.O,{variant:"success",copykey:"dyn_passkey_recovery.add_email.success_message",children:N("dyn_passkey_recovery.add_email.success_message")}),(0,a.jsx)(m.o,{variant:"body_normal",weight:"regular",color:"secondary",className:"passkey-recovery-view__subtitle",copykey:"dyn_passkey_recovery.add_email.description",children:N("dyn_passkey_recovery.add_email.description")}),void 0!==E&&(0,a.jsx)(v.O,{children:(()=>{if(E)return E instanceof d.ii?E.message:(0,g.y)(E)})()}),(0,a.jsx)("div",{className:"passkey-recovery-view__form",children:(0,a.jsx)(k.v,{onSubmit:P,currentEmail:null==j?void 0:j.email,isLoading:(M||x)&&!E,buttonCopyKey:"dyn_passkey_recovery.add_email.confirm_button",isDisabled:x&&!E&&!S})})]})]})}},84957:(e,t,i)=>{i.d(t,{Y:()=>E});var n=i(29109),a=i(74848),s=i(96540),o=i(95081),d=i(88393),r=i(60445),l=i(17632),c=i(11012),y=i(51645),u=i(88616),_=i(14624),m=i(95540),v=i(21416),h=i(44128),p=(i(83650),i(46759),i(69648)),g=(i(80066),i(56794)),k=i(91398),w=i(4580),b=i(41253),x=(i(95821),i(3418),i(48702),i(10941),i(16219),i(12174)),j=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(75988)),f=(i(451),i(32708)),N=i(10741),I=i(5678),C=(i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(100),i(58080),i(53006),i(71172),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(26968),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(85439)),S=(i(78080),i(95253),i(44719),i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const A=new RegExp(/^([A-Za-z0-9\s_+@\.-]+)$/),E=({authenticatorType:e,currentAction:t})=>{const{primaryWallet:i,environmentId:E,user:W,setShowAuthFlow:P}=(0,S.J)(),{isTurnkeyWalletWithoutAuthenticator:M}=(0,I.b)(),{getEOAWallet:T}=(0,j.R)(),[O,R]=(0,s.useState)(""),[U,F]=(0,s.useState)(!1),[K,V]=(0,s.useState)(!1),{t:z}=(0,o.Bd)(),{setView:B}=(0,b.At)(),{mutate:q,isLoading:L,error:D}=(0,f.n)((a=>(0,n.s)(void 0,void 0,void 0,(function*(){var n;const s=null!==(n=i&&T(i))&&void 0!==n?n:i;yield(0,N.Pw)({bundleInput:a,user:W,wallet:s}),V(!0),"email"===e&&x.zm.emit("passkeyRecoveryCompleted",i),setTimeout((()=>{const i=()=>{var e,i,n;(null===(e=null==t?void 0:t.settings)||void 0===e?void 0:e.goBack)?null===(n=null===(i=null==t?void 0:t.settings)||void 0===i?void 0:i.goBack)||void 0===n||n.call(i):P(!1)};if("passkey"===e)return B("passkey-recovery-complete",{goBack:()=>i()});"reveal"!==(null==t?void 0:t.type)&&i()}),2e3)})))),$=(0,s.useMemo)((()=>{if(D)return D instanceof r.ii?D.message:(0,C.y)(D)}),[D]),J=(0,a.jsx)(l.I,{color:"brand-primary",children:(0,a.jsx)(d.ei,{})}),X=M?"dyn_passkey_secure_modal":"dyn_passkey_recovery",H=(0,a.jsx)(c.K,{type:"button",onClick:()=>{P(!1,{emitCancelAuth:!0}),x.zm.emit("passkeyRecoveryFailed",new r.ii("Validation request cancelled"))},"data-testid":"close-button",children:(0,a.jsx)(k.h,{})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.r,{trailing:H,children:(0,a.jsx)(h.o,{as:"h1",variant:"title",color:"primary","data-testid":"dynamic-auth-modal-heading",className:"header__typography",copykey:`${X}.code.title`,children:z(`${X}.code.title`)})}),(0,a.jsxs)("div",{className:"passkey-recovery-view",children:[D||K?(0,a.jsx)(u.U,{Icon:d.ei,iconSize:64,variant:D?"red":"green",InnerIcon:D?w.h:g.h}):(0,a.jsx)(y.x,{Icon:J,isSpinning:!D&&!K,iconSize:96}),(0,a.jsx)(h.o,{variant:"body_normal",weight:"regular",color:"secondary",className:"passkey-recovery-view__subtitle",copykey:`${X}.code.description`,children:z(`${X}.code.description`,{email:null==W?void 0:W.email})}),(0,a.jsx)("div",{className:"passkey-recovery-view__actions",children:(0,a.jsx)(_.p,{id:"passkey-recovery-bundle","data-testid":"passkey-recovery-bundle-input",value:O,onChange:e=>{var t;const i=null===(t=e.target.value)||void 0===t?void 0:t.trim();R(i),(e=>!(!(null==e?void 0:e.length)||e.length<100||e.length>=256||!A.test(e)))(i)&&q(i)},label:z(`${X}.code.input_label`),disabled:L||U,error:Boolean(D),className:K?"passkey-recovery-view__input-valid":"",autoFocus:!0,message:$})}),(0,a.jsxs)("div",{className:"passkey-recovery-view__resend-code",children:[(0,a.jsx)(h.o,{color:"secondary",variant:"body_small",copykey:`${X}.code.resend.text`,children:z(`${X}.code.resend.text`)}),(0,a.jsx)(h.o,{variant:"body_small",color:"link",copykey:`${X}.code.resend.button`,children:(0,a.jsx)(v.Q,{"data-testid":"resend-email-button",onClick:()=>(0,n.s)(void 0,void 0,void 0,(function*(){try{F(!0),yield(0,N.bi)({authenticatorType:e,environmentId:E,user:W,wallet:i})}catch(e){p.v.error("Failed to complete passkey recovery",e)}finally{F(!1)}})),disabled:U||L||O.length>0&&!D,children:z(`${X}.code.resend.button`)})})]})]})]})}},76297:(e,t,i)=>{i.d(t,{P:()=>j});var n=i(29109),a=i(74848),s=i(96540),o=i(95081),d=i(60445),r=i(46136),l=i(24536),c=i(26968),y=i(44128),u=i(36100),_=(i(83650),i(46759),i(69648)),m=(i(88393),i(80066),i(63611)),v=(i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(12174)),h=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(75988)),p=(i(451),i(32708)),g=i(10741),k=i(5678),w=(i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(100),i(58080),i(53006),i(11012),i(71172),i(14624),i(44432),i(79903),i(53454),i(74566),i(85168),i(71092),i(56950),i(43433),i(87583),i(30261),i(96696),i(58169),i(23121),i(4623),i(22923),i(44917),i(94734),i(26490),i(10647),i(85439)),b=(i(78080),i(10067)),x=(i(95253),i(44719),i(79620),i(59553),i(31448),i(98592),i(18983),i(21858),i(80622),i(31825),i(89809));const j=({goBack:e})=>{const{primaryWallet:t,environmentId:i,user:j,setPasskeySuccessPopup:f}=(0,x.J)(),{isTurnkeyWalletWithoutAuthenticator:N}=(0,k.b)(),{getEOAWallet:I}=(0,h.R)(),{t:C}=(0,o.Bd)(),{mutate:S,isLoading:A,error:E}=(0,p.n)((()=>(0,n.s)(void 0,void 0,void 0,(function*(){var n;const a=null!==(n=t&&I(t))&&void 0!==n?n:t;if(!(yield(0,g.tQ)({environmentId:i,user:j,wallet:a})))throw new d.ii("Error completing passkey recovery");v.zm.emit("passkeyRecoveryCompleted",t),e(),f(c.p.CREATED)}))),{onFailure:e=>{_.v.error("Failed to init passkey recovery",e),v.zm.emit("passkeyRecoveryFailed",e)}}),W=(0,s.useMemo)((()=>{if(E)return E instanceof d.ii?E.message:(0,w.y)(E)}),[E]),P=N?"dyn_passkey_secure_modal":"dyn_passkey_recovery";return(0,a.jsxs)("div",{className:"passkey-recovery-view",children:[(0,a.jsx)("div",{className:"passkey-recovery-view__header",children:(0,a.jsx)(m.h,{})}),(0,a.jsx)(y.o,{variant:"body_normal",weight:"regular",color:"secondary",className:"passkey-recovery-view__subtitle",children:C(`${P}.complete.description`)}),W&&(0,a.jsx)(r.O,{children:W}),(0,a.jsx)("div",{className:"passkey-recovery-view__actions",children:(0,a.jsx)(u.E,{buttonVariant:"brand-primary",buttonPadding:"large",dataTestId:"passkey-recovery-complete-button",onClick:()=>S(),disabled:A,showInternalLoading:!1,typographyProps:{color:"inherit"},children:(0,a.jsxs)("div",{className:"passkey-recovery-view__inline-button",children:[(0,a.jsx)(b.M,{size:"small"}),(0,a.jsx)(y.o,{children:C(`${P}.complete.complete_button`)})]})})}),(0,a.jsx)(l.f,{isRecoveryFlow:!0})]})}},72269:(e,t,i)=>{i.d(t,{w:()=>x});var n=i(74848),a=i(96540),s=i(95081),o=i(60445),d=(i(100),i(58080),i(12174),i(29109),i(83650),i(46759),i(69648),i(88393),i(80066),i(91398)),r=i(8383),l=(i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(89809)),c=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(74456)),y=(i(20545),i(50574),i(451),i(55229)),u=i(5332),_=i(5678),m=(i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),v=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(51645)),h=i(17632),p=(i(78080),i(11012)),g=(i(79903),i(46136)),k=i(36100),w=(i(30261),i(96696),i(95540)),b=(i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(24536));i(26968),i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const x=({authenticatorType:e})=>{const{setShowAuthFlow:t}=(0,l.J)(),{isTurnkeyWalletWithoutAuthenticator:i}=(0,_.b)(),{initAuthMethod:x,isLoading:j,error:f}=(0,u.g)(),{createRootElement:N}=(0,c.k)(),I=N(y.b),{t:C}=(0,s.Bd)(),S=(0,a.useMemo)((()=>{if(f)return f instanceof o.ii?f.message:"Something went wrong."}),[f]),A=(0,n.jsx)(h.I,{color:"brand-primary",children:(0,n.jsx)(r.h,{})}),E=i?"dyn_passkey_secure_modal":"dyn_passkey_recovery",W=(0,n.jsx)(p.K,{type:"button",onClick:()=>t(!1,{emitCancelAuth:!0}),"data-testid":"close-button",children:(0,n.jsx)(d.h,{})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.r,{trailing:W,children:(0,n.jsx)(m.o,{as:"h1",variant:"title",color:"primary","data-testid":"dynamic-auth-modal-heading",className:"header__typography",children:C(`${E}.start.title`)})}),(0,n.jsxs)("div",{className:"passkey-recovery-view",children:[(0,n.jsx)(v.x,{Icon:A,isSpinning:j,iconSize:96}),(0,n.jsx)(m.o,{variant:"body_normal",weight:"regular",color:"secondary",className:"passkey-recovery-view__subtitle",children:C(`${E}.start.description`)}),S&&(0,n.jsx)(g.O,{children:S}),(0,n.jsx)("div",{className:"passkey-recovery-view__actions",children:(0,n.jsx)(k.E,{buttonPadding:"large",dataTestId:"passkey-recovery-button",onClick:()=>x({authenticatorType:e,iframeContainer:I.current}),disabled:j,showInternalLoading:!1,children:(0,n.jsx)("div",{children:(0,n.jsx)(m.o,{children:C(`${E}.start.start_button`)})})})}),(0,n.jsx)(b.f,{isRecoveryFlow:!0})]})]})}},55229:(e,t,i)=>{i.d(t,{M:()=>a,b:()=>n});const n="dyn-passkey-recovery-id",a="dyn-passkey-recovery-element-id"},34307:(e,t,i)=>{i.d(t,{A:()=>k});var n=i(29109),a=i(74848),s=i(96540),o=i(30261),d=i(95081),r=(i(60445),i(100),i(58080),i(12174),i(83650),i(46759),i(69648),i(88393),i(80066),i(14719)),l=i(91398),c=(i(41253),i(95821),i(3418),i(48702),i(10941),i(16219),i(89809)),y=(i(54769),i(60337),i(4402),i(11011),i(40337),i(81285),i(45468),i(96515)),u=(i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),_=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(78080),i(11012)),m=(i(79903),i(36100)),v=(i(96696),i(95540)),h=(i(44719),i(14624)),p=(i(53454),i(31448),i(95253)),g=(i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968));i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const k=()=>{var e;const{passkey:t,setPasskey:i,passkeyIcon:k,passkeyEdited:w,setPasskeyEdited:b}=(0,p.rM)(),{t:x}=(0,d.Bd)(),{environmentId:j,setShowAuthFlow:f,setPasskeySuccessPopup:N}=(0,c.J)(),[I,C]=(0,s.useState)(!1),S=(0,a.jsx)(_.K,{type:"button",onClick:()=>{f(!1)},"data-testid":"back-button",children:(0,a.jsx)(r.h,{})}),A=(0,a.jsx)(_.K,{onClick:()=>f(!1),type:"button",id:"close-button","data-testid":"close-button",children:(0,a.jsx)(l.h,{})});return t?(0,a.jsxs)("div",{className:"edit-passkeys-widget-view",children:[(0,a.jsx)(v.r,{leading:S,trailing:A}),(0,a.jsx)("div",{className:"edit-passkeys-widget-view__icon",children:k}),(0,a.jsx)(u.o,{as:"h1",variant:"title",color:"primary",className:"edit-passkeys-widget-view__title",copykey:"dyn_rename_passkeys.title",children:x("dyn_rename_passkeys.title")}),(0,a.jsx)(o.l1,{initialValues:{alias:null!==(e=t.alias)&&void 0!==e?e:""},onSubmit:e=>{var a;a=e.alias,(0,n.s)(void 0,void 0,void 0,(function*(){if(a&&(null==t?void 0:t.id)){const e=yield(0,y.lm)({alias:a.trim(),environmentId:j,id:t.id});e?(i(e),b(!w),f(!1),N(g.p.EDITED)):C(!0)}else C(!0)}))},children:({values:e})=>(0,a.jsxs)(o.lV,{className:"edit-passkeys-widget-view__body",children:[(0,a.jsx)(o.D0,{"data-testid":"input-field",name:"alias",type:"text",label:x("dyn_rename_passkeys.input_label"),copykey:"dyn_rename_passkeys.input_label",className:"edit-passkeys-widget-view__input",as:h.p,error:I,maxLength:32}),(0,a.jsx)(m.E,{type:"submit",className:"edit-passkeys-widget-view__body",buttonPadding:"large",disabled:!e.alias,copykey:"dyn_rename_passkeys.save",children:x("dyn_rename_passkeys.save")}),I&&(0,a.jsx)(u.o,{as:"h1",variant:"body_small",color:"error-1",copykey:"dyn_rename_passkeys.error",children:x("dyn_rename_passkeys.error")})]})})]}):(0,a.jsx)(u.o,{as:"h1",variant:"title",color:"primary",className:"edit-passkeys-widget-view__title",children:x("dyn_rename_passkeys.not_found")})}},64533:(e,t,i)=>{i.d(t,{d:()=>r});var n=i(29109),a=i(60445),s=(i(46759),i(45468),i(86713)),o=(i(48702),i(4402),i(69648),i(3418),i(11011),i(88393),i(80066),i(96540),i(74848),i(41253),i(95821),i(10941),i(16219),i(40337),i(74813)),d=(i(81285),i(20433),i(83073),i(99157),i(96515));i(7116);const r=e=>(0,n.s)(void 0,[e],void 0,(function*({user:e,walletConnector:t,environmentId:i,chains:n,sessionPublicKey:r,webAuthnAttestation:l,withAuthenticator:c}){if(!t)throw new a.ii("Connector is missing. Please make sure you added EthereumWalletConnectors and/or SolanaWalletConnectors to DynamicProvider settings");if(!e)throw new a.ii("User is not defined");let y;if(t.setEmail(e.email),c||void 0!==l){e.email||(0,o.M)(t,e);const{attestation:i,challenge:n,displayName:a}=l||(yield t.getWebAuthnAttestation());y={attestation:i,challenge:n,passkeyAlias:a}}const u=yield(0,d.Gh)(Object.assign({chains:n,environmentId:i,sessionPublicKey:r},y));if(!u)throw new a.ii("Failed to create embedded wallet");const _=t.connectedChain,m=(0,s.v)(u,[_]);if(!m)throw new a.ii("EmbeddedWalletVerifiedCredential not found");return t.setVerifiedCredentials(u.verifiedCredentials),{embeddedWalletVerifiedCredential:m,updatedUser:u,walletConnector:t}}))},76581:(e,t,i)=>{i.d(t,{x:()=>a});var n=i(80066);const a=e=>e.map((({walletConnector:e})=>e)).find((e=>(0,n.VC)(e)&&e.requiresNonDynamicEmailOtp))},21521:(e,t,i)=>{i.d(t,{q:()=>a});var n=i(80066);const a=(e,t)=>e.map((({walletConnector:e})=>e)).find((e=>(0,n.NO)(e)&&(0,n.VC)(e)&&e.connectedChain===t))},11823:(e,t,i)=>{i.d(t,{x:()=>a});var n=i(46759);const a=e=>{var t,i,a;return"SOL"===(null===(a=((null===(i=null===(t=null==e?void 0:e.sdk)||void 0===t?void 0:t.embeddedWallets)||void 0===i?void 0:i.chainConfigurations)||[]).find((e=>e.primary)))||void 0===a?void 0:a.name)?n.lVq.Sol:n.lVq.Evm}},10741:(e,t,i)=>{i.d(t,{Pw:()=>m,SR:()=>w,UX:()=>_,bi:()=>v,c6:()=>k,jX:()=>p,n6:()=>b,tQ:()=>h});var n=i(29109),a=i(80066),s=i(60445),o=(i(46759),i(45468),i(86713)),d=(i(48702),i(83219)),r=(i(4402),i(53968)),l=(i(69648),i(3418),i(11011),i(88393),i(96540),i(74848),i(41253),i(95821),i(10941),i(16219),i(40337),i(91969)),c=(i(81285),i(20433),i(83073),i(99157),i(96515)),y=(i(7116),i(18003)),u=i(55229);const _=e=>(0,n.s)(void 0,[e],void 0,(function*({authenticatorType:e,iframeContainer:t,iframeElementId:i,environmentId:n,user:o,wallet:r,sessionExpiration:l}){var y;if(!o)throw new s.ii(d.nM);if(!(null==r?void 0:r.connector)||!(null==r?void 0:r.id)||!(0,a.NO)(null==r?void 0:r.connector))throw new s.ii("Connector is missing. Please make sure you added EthereumWalletConnectors and/or SolanaWalletConnectors to DynamicProvider settings");const u=null===(y=r.connector)||void 0===y?void 0:y.getAuthenticatorHandler();if("passkey"===e&&u.isSessionActive())return p({environmentId:n,user:o,wallet:r});const _=yield u.initRecovery(e,t,i,l);if(!_)throw new s.ii("Something went wrong");const m=yield(0,c.UX)({authenticatorType:e,environmentId:n,publicKey:_,walletId:r.id});u.recoveryUserId="passkey"===e?m.turnkeyRecoveryUserId:m.turnkeyUserId})),m=e=>(0,n.s)(void 0,[e],void 0,(function*({user:e,bundleInput:t,wallet:i}){var n,o,l,c;if(!t)throw new s.ii("Code must be informed");if(!(null==i?void 0:i.connector)||!(null==i?void 0:i.id)||!(0,a.NO)(null==i?void 0:i.connector))throw new s.ii("Connector is missing. Please make sure you added EthereumWalletConnectors and/or SolanaWalletConnectors to DynamicProvider settings");if(!e)throw new s.ii(d.nM);const y=null===(l=null===(o=null===(n=e.verifiedCredentials)||void 0===n?void 0:n.find((({walletName:e})=>null==e?void 0:e.startsWith("turnkey"))))||void 0===o?void 0:o.walletProperties)||void 0===l?void 0:l.turnkeySubOrganizationId,u=null===(c=i.connector)||void 0===c?void 0:c.getAuthenticatorHandler();yield u.verifyRecoveryCode(t,y);const _={createdAt:(new Date).getTime(),emailCode:t,userId:u.recoveryUserId};s.n$.setItem(r.E4,_)})),v=e=>(0,n.s)(void 0,[e],void 0,(function*({authenticatorType:e,user:t,environmentId:i,wallet:n}){var o;if(!t)throw new s.ii(d.nM);if(!(null==n?void 0:n.connector)||!(null==n?void 0:n.id)||!(0,a.NO)(null==n?void 0:n.connector))throw new s.ii("Connector is missing. Please make sure you added EthereumWalletConnectors and/or SolanaWalletConnectors to DynamicProvider settings");const r=null===(o=n.connector)||void 0===o?void 0:o.getAuthenticatorHandler().publicKey;if(!r)throw new s.ii("Could not proceed with your request. Please restart the process.");return(0,c.UX)({authenticatorType:e,environmentId:i,publicKey:r,walletId:null==n?void 0:n.id})})),h=e=>(0,n.s)(void 0,[e],void 0,(function*({user:e,environmentId:t,wallet:i}){const{connector:n,user:a}=yield g({addPasskeyAuthenticator:!1,environmentId:t,user:e,wallet:i});return n.getAuthenticatorHandler().clear(),(0,l.P)(u.M),a})),p=e=>(0,n.s)(void 0,[e],void 0,(function*({user:e,environmentId:t,wallet:i}){const{user:n}=yield g({addPasskeyAuthenticator:!0,environmentId:t,user:e,wallet:i});return n})),g=e=>(0,n.s)(void 0,[e],void 0,(function*({wallet:e,user:t,environmentId:i,addPasskeyAuthenticator:n}){var r,l,y;if(!t)throw new s.ii(d.nM);if(!(e&&e.connector&&e.id&&(0,a.NO)(e.connector)))throw new s.ii("Connector is missing. Please make sure you added EthereumWalletConnectors and/or SolanaWalletConnectors to DynamicProvider settings");const u=e.connector;u.setEmail(t.email);const _=null===(y=null===(l=null===(r=t.verifiedCredentials)||void 0===r?void 0:r.find((({walletName:e})=>null==e?void 0:e.startsWith("turnkey"))))||void 0===l?void 0:l.walletProperties)||void 0===y?void 0:y.turnkeySubOrganizationId;if(!_)throw new s.ii("The authentication token is invalid - turnkeySubOrganizationId is missing");const m=e.connector.getAuthenticatorHandler(),{attestation:v,challenge:h}=yield u.getWebAuthnAttestation();n?yield m.addPasskeyAuthenticator({attestation:v,challenge:h,turnkeySubOrganizationId:_}):yield m.completeRecovery({attestation:v,challenge:h,turnkeySubOrganizationId:_});const p=yield(0,c.tQ)({attestation:v,challenge:h,environmentId:i,walletId:e.id});if(!p)throw new s.ii("No user returned from passkey recovery");const g=u.connectedChain;if(!(0,o.v)(p,[g]))throw new s.ii("EmbeddedWalletVerifiedCredential not found");return u.setVerifiedCredentials(p.verifiedCredentials),{connector:u,user:p}})),k=e=>{if(!(null==e?void 0:e.amount))return!1;const t=s.n$.getItem(r.E4);if(!t)return!1;const i=e.amount*("minutes"===e.unit?60:3600),n=(null==t?void 0:t.createdAt)+1e3*i,a=new Date(n);return!(new Date>=a&&(s.n$.removeItem(r.E4),1))},w=e=>(0,n.s)(void 0,[e],void 0,(function*({user:e,iframeContainer:t,iframeElementId:i,wallet:n,sessionExpiration:o}){var l,c,y,u;if(!e)throw new s.ii(d.nM);if(!(null==n?void 0:n.connector)||!(null==n?void 0:n.id)||!(0,a.NO)(null==n?void 0:n.connector))throw new s.ii("Connector is missing. Please make sure you added EthereumWalletConnectors and/or SolanaWalletConnectors to DynamicProvider settings");const _=s.n$.getItem(r.E4),m=null===(l=n.connector)||void 0===l?void 0:l.getAuthenticatorHandler();if(!_||Boolean(m.recoveryUserId))return!1;if(!(yield m.initRecovery("email",t,i,o)))throw new s.ii("Could not open embedded wallet connection communication");m.recoveryUserId=_.userId;const v=null===(u=null===(y=null===(c=e.verifiedCredentials)||void 0===c?void 0:c.find((({walletName:e})=>null==e?void 0:e.startsWith("turnkey"))))||void 0===y?void 0:y.walletProperties)||void 0===u?void 0:u.turnkeySubOrganizationId;return yield m.verifyRecoveryCode(_.emailCode,v),!0})),b=e=>(0,n.s)(void 0,[e],void 0,(function*({user:e,environmentId:t,wallet:i}){var n,o;if(!(null==e?void 0:e.email))throw new s.ii(d.nM);if(!((null==i?void 0:i.connector)&&(null==i?void 0:i.id)&&(0,a.NO)(null==i?void 0:i.connector)&&(0,a.VC)(null==i?void 0:i.connector)))throw new s.ii("Connector is missing. Please make sure you added EthereumWalletConnectors and/or SolanaWalletConnectors to DynamicProvider settings");const{turnkeySubOrganizationId:r,turnkeyUserId:l}=null===(o=null===(n=e.verifiedCredentials)||void 0===n?void 0:n.find((({walletName:e})=>null==e?void 0:e.startsWith("turnkey"))))||void 0===o?void 0:o.walletProperties;if(!r||!l)throw new s.ii("The authentication token is invalid - turnkeySubOrganizationId or turnkeyUserID is missing");const u=i.connector.getAuthenticatorHandler(),{signedRequest:_}=yield u.addEmailRecovery({email:e.email,organizationId:r,turnkeyUserId:l});return yield(0,c.Rq)({environmentId:t,updateRecoveryEmailRequest:{turnkeySignedRequest:_}}),i.connector.setEmail(e.email),(0,y.e4)({environmentId:t})}))},65274:(e,t,i)=>{i.d(t,{z:()=>y});var n=i(74848),a=i(95081),s=i(60445),o=i(95821),d=(i(100),i(58080),i(96540),i(12174),i(29109),i(83650),i(46759),i(69648),i(88393),i(80066),i(41253),i(3418),i(48702),i(10941),i(16219),i(89809)),r=(i(54769),i(60337),i(4402),i(11011),i(40337),i(41653)),l=(i(81285),i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),c=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(51645));i(78080),i(11012),i(79903),i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968),i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const y=()=>{const{selectedWalletConnector:e}=(0,d.J)(),{t}=(0,a.Bd)(),i=(0,n.jsx)(o.lc,{icon:null==e?void 0:e.metadata.icon,walletKey:null==e?void 0:e.key,style:{height:(0,r.a)(94*c.X),width:(0,r.a)(94*c.X)}});return(0,n.jsxs)("div",{className:"pending-connect__container",children:[(0,n.jsx)(c.x,{Icon:i,iconSize:94,isSpinning:!0,className:"pending-connect__icon-with-spinner"}),(0,n.jsx)(l.o,{variant:"body_normal",weight:"regular",className:"pending-connect__copy-text",copykey:(0,s.Fr)()?"dyn_pending_connection.mobile":"dyn_pending_connection.computer",children:(0,s.Fr)()?t("dyn_pending_connection.mobile"):t("dyn_pending_connection.computer")})]})}},30130:(e,t,i)=>{i.d(t,{j:()=>g});var n=i(29109),a=i(74848),s=i(96540),o=i(95081),d=i(95821),r=i(90054),l=(i(100),i(58080),i(12174),i(60445),i(83650),i(46759),i(69648)),c=(i(88393),i(80066),i(41253),i(3418),i(48702),i(10941),i(16219),i(89809)),y=(i(54769),i(60337),i(4402),i(11011),i(40337),i(41653)),u=i(21537),_=(i(81285),i(31457)),m=(i(45468),i(99157),i(7116),i(20433),i(83073),i(21029),i(47979),i(63055),i(28019)),v=(i(28765),i(40961),i(20545),i(50574),i(451),i(30593),i(7085),i(87237),i(80607),i(6864),i(29147),i(72366),i(55537),i(65381),i(75705),i(27373),i(44128)),h=(i(58169),i(53006),i(74566),i(85168),i(71092),i(79620),i(22923),i(23121),i(59553),i(51645)),p=(i(78080),i(11012),i(79903),i(36100));i(30261),i(96696),i(44719),i(14624),i(53454),i(31448),i(95253),i(98592),i(18983),i(21858),i(4623),i(44917),i(94734),i(26490),i(10647),i(26968),i(80622),i(31825),i(71172),i(44432),i(56950),i(43433),i(87583);const g=()=>{const[e,t]=(0,s.useState)(!1),{selectedWalletConnector:i}=(0,c.J)(),{signAlreadyConnectedUser:g}=(0,m.F)(),{t:k}=(0,o.Bd)(),w=(0,_.p)(i);if(!i)return null;const b=(0,a.jsx)(d.lc,{icon:i.metadata.icon,walletKey:i.key,style:{height:(0,y.a)(96*h.X),width:(0,y.a)(96*h.X)}}),x=k(w?"dyn_pending_signature.phantom_ledger_sign":"dyn_pending_signature.regular_sign_description");return(0,a.jsxs)("div",{className:"pending-signature__container","data-testid":"pending-signature-view",children:[(0,a.jsx)(h.x,{Icon:b,iconSize:96,isSpinning:!0,indicator:"connected",className:"pending-signature__icon-with-spinner"}),(0,a.jsx)(v.o,{variant:"body_normal",weight:"regular",className:(0,r.x)("pending-signature__copy"),copykey:w?"dyn_pending_signature.phantom_ledger_sign":"dyn_pending_signature.regular_sign_description",children:x}),w&&(0,a.jsxs)(v.o,{variant:"body_small",weight:"regular",className:(0,r.x)("pending-signature__copy","pending-signature__copy--mini"),copykey:"dyn_pending_signature.phantom_ledger_warning",children:[(0,a.jsx)("strong",{children:k("dyn_pending_signature.note")}),k("dyn_pending_signature.phantom_ledger_warning")]}),(0,u.$)(i)&&(0,a.jsx)(p.E,{buttonClassName:"pending-signature__button",onClick:()=>(0,n.s)(void 0,void 0,void 0,(function*(){try{t(!0),yield g({walletConnector:i})}catch(e){l.v.error(e)}finally{t(!1)}})),loading:e,buttonVariant:"primary",buttonPadding:"large",expanded:!0,typographyProps:{variant:"button_primary",weight:"medium"},copykey:"dyn_pending_signature.click_to_sign",children:k("dyn_pending_signature.click_to_sign")})]})}}}]);